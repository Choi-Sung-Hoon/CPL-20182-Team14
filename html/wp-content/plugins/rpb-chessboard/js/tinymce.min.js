!function(RPBChessboard){"use strict";function editFENButtonCallback(editor){var selectionRange=editor.selection.getRng();selectionRange.startContainer!==selectionRange.endContainer&&editor.selection.collapse();var currentNode=selectionRange.startContainer,text=currentNode.textContent,beginSelection=selectionRange.startOffset,endSelection=selectionRange.endOffset,info=0<=beginSelection&&beginSelection<=endSelection&&endSelection<=text.length?RPBChessboard.identifyFENShortcodeContent(text,beginSelection,endSelection):null,callback=function(fen,options){!function(editor,fen,options){editor.selection.setContent(RPBChessboard.serializeFENShortcodeContent(fen,options))}(editor,fen,options)};null===info?RPBChessboard.showEditFENDialog(callback):(selectionRange.setStart(currentNode,info.beginShortcode),selectionRange.setEnd(currentNode,info.endShortcode),RPBChessboard.showEditFENDialog({fen:info.fen,options:info.options,callback:callback}))}"undefined"!=typeof tinymce&&tinymce.PluginManager.add("RPBChessboard",function(editor,url){editor.addButton("rpb-chessboard",{title:RPBChessboard.i18n.EDIT_CHESS_DIAGRAM_DIALOG_TITLE,image:url+"/../images/tinymce.png",onclick:function(){editFENButtonCallback(editor)}})})}(RPBChessboard);