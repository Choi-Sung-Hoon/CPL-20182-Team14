!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){window.kokopu=require("kokopu"),window.sanitizeHtml=require("sanitize-html")},{kokopu:41,"sanitize-html":108}],2:[function(require,module,exports){(function(global){"use strict";var ret;"Set"in global?"function"==typeof Set.prototype.forEach&&(ret=!1,new Set([!0]).forEach(function(el){ret=el}),!0===ret)?module.exports=function(arr){var ret=[];return new Set(arr).forEach(function(el){ret.push(el)}),ret}:module.exports=function(arr){var seen=new Set;return arr.filter(function(el){return!seen.has(el)&&(seen.add(el),!0)})}:module.exports=function(arr){for(var ret=[],i=0;i<arr.length;i++)-1===ret.indexOf(arr[i])&&ret.push(arr[i]);return ret}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(require,module,exports){"use strict";exports.byteLength=function(b64){var lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1];return 3*(validLen+placeHoldersLen)/4-placeHoldersLen},exports.toByteArray=function(b64){for(var tmp,lens=getLens(b64),validLen=lens[0],placeHoldersLen=lens[1],arr=new Arr(function(b64,validLen,placeHoldersLen){return 3*(validLen+placeHoldersLen)/4-placeHoldersLen}(0,validLen,placeHoldersLen)),curByte=0,len=0<placeHoldersLen?validLen-4:validLen,i=0;i<len;i+=4)tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)],arr[curByte++]=tmp>>16&255,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp;2===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4,arr[curByte++]=255&tmp);1===placeHoldersLen&&(tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2,arr[curByte++]=tmp>>8&255,arr[curByte++]=255&tmp);return arr},exports.fromByteArray=function(uint8){for(var tmp,len=uint8.length,extraBytes=len%3,parts=[],i=0,len2=len-extraBytes;i<len2;i+=16383)parts.push(encodeChunk(uint8,i,len2<i+16383?len2:i+16383));1===extraBytes?(tmp=uint8[len-1],parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")):2===extraBytes&&(tmp=(uint8[len-2]<<8)+uint8[len-1],parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"="));return parts.join("")};for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;function getLens(b64){var len=b64.length;if(0<len%4)throw new Error("Invalid string. Length must be a multiple of 4");var validLen=b64.indexOf("=");return-1===validLen&&(validLen=len),[validLen,validLen===len?0:4-validLen%4]}function encodeChunk(uint8,start,end){for(var tmp,num,output=[],i=start;i<end;i+=3)tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(255&uint8[i+2]),output.push(lookup[(num=tmp)>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[63&num]);return output.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63},{}],4:[function(require,module,exports){},{}],5:[function(require,module,exports){"use strict";var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=function(length){+length!=length&&(length=0);return Buffer.alloc(+length)},exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;function createBuffer(length){if(K_MAX_LENGTH<length)throw new RangeError("Invalid typed array length");var buf=new Uint8Array(length);return buf.__proto__=Buffer.prototype,buf}function Buffer(arg,encodingOrOffset,length){if("number"!=typeof arg)return from(arg,encodingOrOffset,length);if("string"==typeof encodingOrOffset)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(arg)}function from(value,encodingOrOffset,length){if("number"==typeof value)throw new TypeError('"value" argument must not be a number');return isArrayBuffer(value)||value&&isArrayBuffer(value.buffer)?function(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset)throw new RangeError('"offset" is outside of buffer bounds');if(array.byteLength<byteOffset+(length||0))throw new RangeError('"length" is outside of buffer bounds');var buf;buf=void 0===byteOffset&&void 0===length?new Uint8Array(array):void 0===length?new Uint8Array(array,byteOffset):new Uint8Array(array,byteOffset,length);return buf.__proto__=Buffer.prototype,buf}(value,encodingOrOffset,length):"string"==typeof value?function(string,encoding){"string"==typeof encoding&&""!==encoding||(encoding="utf8");if(!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);var length=0|byteLength(string,encoding),buf=createBuffer(length),actual=buf.write(string,encoding);actual!==length&&(buf=buf.slice(0,actual));return buf}(value,encodingOrOffset):function(obj){if(Buffer.isBuffer(obj)){var len=0|checked(obj.length),buf=createBuffer(len);return 0===buf.length||obj.copy(buf,0,0,len),buf}if(obj){if(ArrayBuffer.isView(obj)||"length"in obj)return"number"!=typeof obj.length||numberIsNaN(obj.length)?createBuffer(0):fromArrayLike(obj);if("Buffer"===obj.type&&Array.isArray(obj.data))return fromArrayLike(obj.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(value)}function assertSize(size){if("number"!=typeof size)throw new TypeError('"size" argument must be of type number');if(size<0)throw new RangeError('"size" argument must not be negative')}function allocUnsafe(size){return assertSize(size),createBuffer(size<0?0:0|checked(size))}function fromArrayLike(array){for(var length=array.length<0?0:0|checked(array.length),buf=createBuffer(length),i=0;i<length;i+=1)buf[i]=255&array[i];return buf}function checked(length){if(K_MAX_LENGTH<=length)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K_MAX_LENGTH.toString(16)+" bytes");return 0|length}function byteLength(string,encoding){if(Buffer.isBuffer(string))return string.length;if(ArrayBuffer.isView(string)||isArrayBuffer(string))return string.byteLength;"string"!=typeof string&&(string=""+string);var len=string.length;if(0===len)return 0;for(var loweredCase=!1;;)switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":case void 0:return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*len;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase)return utf8ToBytes(string).length;encoding=(""+encoding).toLowerCase(),loweredCase=!0}}function swap(b,n,m){var i=b[n];b[n]=b[m],b[m]=i}function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(0===buffer.length)return-1;if("string"==typeof byteOffset?(encoding=byteOffset,byteOffset=0):2147483647<byteOffset?byteOffset=2147483647:byteOffset<-2147483648&&(byteOffset=-2147483648),numberIsNaN(byteOffset=+byteOffset)&&(byteOffset=dir?0:buffer.length-1),byteOffset<0&&(byteOffset=buffer.length+byteOffset),byteOffset>=buffer.length){if(dir)return-1;byteOffset=buffer.length-1}else if(byteOffset<0){if(!dir)return-1;byteOffset=0}if("string"==typeof val&&(val=Buffer.from(val,encoding)),Buffer.isBuffer(val))return 0===val.length?-1:arrayIndexOf(buffer,val,byteOffset,encoding,dir);if("number"==typeof val)return val&=255,"function"==typeof Uint8Array.prototype.indexOf?dir?Uint8Array.prototype.indexOf.call(buffer,val,byteOffset):Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset):arrayIndexOf(buffer,[val],byteOffset,encoding,dir);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var i,indexSize=1,arrLength=arr.length,valLength=val.length;if(void 0!==encoding&&("ucs2"===(encoding=String(encoding).toLowerCase())||"ucs-2"===encoding||"utf16le"===encoding||"utf-16le"===encoding)){if(arr.length<2||val.length<2)return-1;arrLength/=indexSize=2,valLength/=2,byteOffset/=2}function read(buf,i){return 1===indexSize?buf[i]:buf.readUInt16BE(i*indexSize)}if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++)if(read(arr,i)===read(val,-1===foundIndex?0:i-foundIndex)){if(-1===foundIndex&&(foundIndex=i),i-foundIndex+1===valLength)return foundIndex*indexSize}else-1!==foundIndex&&(i-=i-foundIndex),foundIndex=-1}else for(arrLength<byteOffset+valLength&&(byteOffset=arrLength-valLength),i=byteOffset;0<=i;i--){for(var found=!0,j=0;j<valLength;j++)if(read(arr,i+j)!==read(val,j)){found=!1;break}if(found)return i}return-1}function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;length?remaining<(length=Number(length))&&(length=remaining):length=remaining;var strLen=string.length;strLen/2<length&&(length=strLen/2);for(var i=0;i<length;++i){var parsed=parseInt(string.substr(2*i,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(function(str){for(var byteArray=[],i=0;i<str.length;++i)byteArray.push(255&str.charCodeAt(i));return byteArray}(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(function(str,units){for(var c,hi,lo,byteArray=[],i=0;i<str.length&&!((units-=2)<0);++i)c=str.charCodeAt(i),hi=c>>8,lo=c%256,byteArray.push(lo),byteArray.push(hi);return byteArray}(string,buf.length-offset),buf,offset,length)}function base64Slice(buf,start,end){return 0===start&&end===buf.length?base64.fromByteArray(buf):base64.fromByteArray(buf.slice(start,end))}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);for(var res=[],i=start;i<end;){var secondByte,thirdByte,fourthByte,tempCodePoint,firstByte=buf[i],codePoint=null,bytesPerSequence=239<firstByte?4:223<firstByte?3:191<firstByte?2:1;if(i+bytesPerSequence<=end)switch(bytesPerSequence){case 1:firstByte<128&&(codePoint=firstByte);break;case 2:128==(192&(secondByte=buf[i+1]))&&127<(tempCodePoint=(31&firstByte)<<6|63&secondByte)&&(codePoint=tempCodePoint);break;case 3:secondByte=buf[i+1],thirdByte=buf[i+2],128==(192&secondByte)&&128==(192&thirdByte)&&2047<(tempCodePoint=(15&firstByte)<<12|(63&secondByte)<<6|63&thirdByte)&&(tempCodePoint<55296||57343<tempCodePoint)&&(codePoint=tempCodePoint);break;case 4:secondByte=buf[i+1],thirdByte=buf[i+2],fourthByte=buf[i+3],128==(192&secondByte)&&128==(192&thirdByte)&&128==(192&fourthByte)&&65535<(tempCodePoint=(15&firstByte)<<18|(63&secondByte)<<12|(63&thirdByte)<<6|63&fourthByte)&&tempCodePoint<1114112&&(codePoint=tempCodePoint)}null===codePoint?(codePoint=65533,bytesPerSequence=1):65535<codePoint&&(codePoint-=65536,res.push(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint),res.push(codePoint),i+=bytesPerSequence}return function(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,codePoints);var res="",i=0;for(;i<len;)res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH));return res}(res)}exports.kMaxLength=K_MAX_LENGTH,(Buffer.TYPED_ARRAY_SUPPORT=function(){try{var arr=new Uint8Array(1);return arr.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===arr.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{get:function(){if(this instanceof Buffer)return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{get:function(){if(this instanceof Buffer)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Buffer.poolSize=8192,Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)},Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,Buffer.alloc=function(size,fill,encoding){return function(size,fill,encoding){return assertSize(size),size<=0?createBuffer(size):void 0!==fill?"string"==typeof encoding?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill):createBuffer(size)}(size,fill,encoding)},Buffer.allocUnsafe=function(size){return allocUnsafe(size)},Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)},Buffer.isBuffer=function(b){return null!=b&&!0===b._isBuffer},Buffer.compare=function(a,b){if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var x=a.length,y=b.length,i=0,len=Math.min(x,y);i<len;++i)if(a[i]!==b[i]){x=a[i],y=b[i];break}return x<y?-1:y<x?1:0},Buffer.isEncoding=function(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(list,length){if(!Array.isArray(list))throw new TypeError('"list" argument must be an Array of Buffers');if(0===list.length)return Buffer.alloc(0);var i;if(void 0===length)for(i=length=0;i<list.length;++i)length+=list[i].length;var buffer=Buffer.allocUnsafe(length),pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(ArrayBuffer.isView(buf)&&(buf=Buffer.from(buf)),!Buffer.isBuffer(buf))throw new TypeError('"list" argument must be an Array of Buffers');buf.copy(buffer,pos),pos+=buf.length}return buffer},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var len=this.length;if(len%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<len;i+=2)swap(this,i,i+1);return this},Buffer.prototype.swap32=function(){var len=this.length;if(len%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<len;i+=4)swap(this,i,i+3),swap(this,i+1,i+2);return this},Buffer.prototype.swap64=function(){var len=this.length;if(len%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<len;i+=8)swap(this,i,i+7),swap(this,i+1,i+6),swap(this,i+2,i+5),swap(this,i+3,i+4);return this},Buffer.prototype.toLocaleString=Buffer.prototype.toString=function(){var length=this.length;return 0===length?"":0===arguments.length?utf8Slice(this,0,length):function(encoding,start,end){var loweredCase=!1;if((void 0===start||start<0)&&(start=0),start>this.length)return"";if((void 0===end||end>this.length)&&(end=this.length),end<=0)return"";if((end>>>=0)<=(start>>>=0))return"";for(encoding||(encoding="utf8");;)switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase(),loweredCase=!0}}.apply(this,arguments)},Buffer.prototype.equals=function(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===Buffer.compare(this,b)},Buffer.prototype.inspect=function(){var str="",max=exports.INSPECT_MAX_BYTES;return 0<this.length&&(str=this.toString("hex",0,max).match(/.{2}/g).join(" "),this.length>max&&(str+=" ... ")),"<Buffer "+str+">"},Buffer.prototype.compare=function(target,start,end,thisStart,thisEnd){if(!Buffer.isBuffer(target))throw new TypeError("Argument must be a Buffer");if(void 0===start&&(start=0),void 0===end&&(end=target?target.length:0),void 0===thisStart&&(thisStart=0),void 0===thisEnd&&(thisEnd=this.length),start<0||end>target.length||thisStart<0||thisEnd>this.length)throw new RangeError("out of range index");if(thisEnd<=thisStart&&end<=start)return 0;if(thisEnd<=thisStart)return-1;if(end<=start)return 1;if(this===target)return 0;for(var x=(thisEnd>>>=0)-(thisStart>>>=0),y=(end>>>=0)-(start>>>=0),len=Math.min(x,y),thisCopy=this.slice(thisStart,thisEnd),targetCopy=target.slice(start,end),i=0;i<len;++i)if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i],y=targetCopy[i];break}return x<y?-1:y<x?1:0},Buffer.prototype.includes=function(val,byteOffset,encoding){return-1!==this.indexOf(val,byteOffset,encoding)},Buffer.prototype.indexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!0)},Buffer.prototype.lastIndexOf=function(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,!1)},Buffer.prototype.write=function(string,offset,length,encoding){if(void 0===offset)encoding="utf8",length=this.length,offset=0;else if(void 0===length&&"string"==typeof offset)encoding=offset,length=this.length,offset=0;else{if(!isFinite(offset))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");offset>>>=0,isFinite(length)?(length>>>=0,void 0===encoding&&(encoding="utf8")):(encoding=length,length=void 0)}var remaining=this.length-offset;if((void 0===length||remaining<length)&&(length=remaining),0<string.length&&(length<0||offset<0)||offset>this.length)throw new RangeError("Attempt to write outside buffer bounds");encoding||(encoding="utf8");for(var loweredCase=!1;;)switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase(),loweredCase=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(127&buf[i]);return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i)ret+=String.fromCharCode(buf[i]);return ret}function hexSlice(buf,start,end){var len=buf.length;(!start||start<0)&&(start=0),(!end||end<0||len<end)&&(end=len);for(var out="",i=start;i<end;++i)out+=toHex(buf[i]);return out}function utf16leSlice(buf,start,end){for(var bytes=buf.slice(start,end),res="",i=0;i<bytes.length;i+=2)res+=String.fromCharCode(bytes[i]+256*bytes[i+1]);return res}function checkOffset(offset,ext,length){if(offset%1!=0||offset<0)throw new RangeError("offset is not uint");if(length<offset+ext)throw new RangeError("Trying to access beyond buffer length")}function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(max<value||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,4),ieee754.write(buf,value,offset,littleEndian,23,4),offset+4}function writeDouble(buf,value,offset,littleEndian,noAssert){return value=+value,offset>>>=0,noAssert||checkIEEE754(buf,0,offset,8),ieee754.write(buf,value,offset,littleEndian,52,8),offset+8}Buffer.prototype.slice=function(start,end){var len=this.length;(start=~~start)<0?(start+=len)<0&&(start=0):len<start&&(start=len),(end=void 0===end?len:~~end)<0?(end+=len)<0&&(end=0):len<end&&(end=len),end<start&&(end=start);var newBuf=this.subarray(start,end);return newBuf.__proto__=Buffer.prototype,newBuf},Buffer.prototype.readUIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return val},Buffer.prototype.readUIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset+--byteLength],mul=1;0<byteLength&&(mul*=256);)val+=this[offset+--byteLength]*mul;return val},Buffer.prototype.readUInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),this[offset]},Buffer.prototype.readUInt16LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]|this[offset+1]<<8},Buffer.prototype.readUInt16BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,2,this.length),this[offset]<<8|this[offset+1]},Buffer.prototype.readUInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+16777216*this[offset+3]},Buffer.prototype.readUInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),16777216*this[offset]+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])},Buffer.prototype.readIntLE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var val=this[offset],mul=1,i=0;++i<byteLength&&(mul*=256);)val+=this[offset+i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readIntBE=function(offset,byteLength,noAssert){offset>>>=0,byteLength>>>=0,noAssert||checkOffset(offset,byteLength,this.length);for(var i=byteLength,mul=1,val=this[offset+--i];0<i&&(mul*=256);)val+=this[offset+--i]*mul;return(mul*=128)<=val&&(val-=Math.pow(2,8*byteLength)),val},Buffer.prototype.readInt8=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,1,this.length),128&this[offset]?-1*(255-this[offset]+1):this[offset]},Buffer.prototype.readInt16LE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt16BE=function(offset,noAssert){offset>>>=0,noAssert||checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return 32768&val?4294901760|val:val},Buffer.prototype.readInt32LE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24},Buffer.prototype.readInt32BE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]},Buffer.prototype.readFloatLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!0,23,4)},Buffer.prototype.readFloatBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,4,this.length),ieee754.read(this,offset,!1,23,4)},Buffer.prototype.readDoubleLE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!0,52,8)},Buffer.prototype.readDoubleBE=function(offset,noAssert){return offset>>>=0,noAssert||checkOffset(offset,8,this.length),ieee754.read(this,offset,!1,52,8)},Buffer.prototype.writeUIntLE=function(value,offset,byteLength,noAssert){(value=+value,offset>>>=0,byteLength>>>=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var mul=1,i=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUIntBE=function(value,offset,byteLength,noAssert){(value=+value,offset>>>=0,byteLength>>>=0,noAssert)||checkInt(this,value,offset,byteLength,Math.pow(2,8*byteLength)-1,0);var i=byteLength-1,mul=1;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)this[offset+i]=value/mul&255;return offset+byteLength},Buffer.prototype.writeUInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,255,0),this[offset]=255&value,offset+1},Buffer.prototype.writeUInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeUInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,65535,0),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeUInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset+3]=value>>>24,this[offset+2]=value>>>16,this[offset+1]=value>>>8,this[offset]=255&value,offset+4},Buffer.prototype.writeUInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,4294967295,0),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeIntLE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0,mul=1,sub=0;for(this[offset]=255&value;++i<byteLength&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i-1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeIntBE=function(value,offset,byteLength,noAssert){if(value=+value,offset>>>=0,!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1,mul=1,sub=0;for(this[offset+i]=255&value;0<=--i&&(mul*=256);)value<0&&0===sub&&0!==this[offset+i+1]&&(sub=1),this[offset+i]=(value/mul>>0)-sub&255;return offset+byteLength},Buffer.prototype.writeInt8=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,1,127,-128),value<0&&(value=255+value+1),this[offset]=255&value,offset+1},Buffer.prototype.writeInt16LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=255&value,this[offset+1]=value>>>8,offset+2},Buffer.prototype.writeInt16BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,2,32767,-32768),this[offset]=value>>>8,this[offset+1]=255&value,offset+2},Buffer.prototype.writeInt32LE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),this[offset]=255&value,this[offset+1]=value>>>8,this[offset+2]=value>>>16,this[offset+3]=value>>>24,offset+4},Buffer.prototype.writeInt32BE=function(value,offset,noAssert){return value=+value,offset>>>=0,noAssert||checkInt(this,value,offset,4,2147483647,-2147483648),value<0&&(value=4294967295+value+1),this[offset]=value>>>24,this[offset+1]=value>>>16,this[offset+2]=value>>>8,this[offset+3]=255&value,offset+4},Buffer.prototype.writeFloatLE=function(value,offset,noAssert){return writeFloat(this,value,offset,!0,noAssert)},Buffer.prototype.writeFloatBE=function(value,offset,noAssert){return writeFloat(this,value,offset,!1,noAssert)},Buffer.prototype.writeDoubleLE=function(value,offset,noAssert){return writeDouble(this,value,offset,!0,noAssert)},Buffer.prototype.writeDoubleBE=function(value,offset,noAssert){return writeDouble(this,value,offset,!1,noAssert)},Buffer.prototype.copy=function(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(start||(start=0),end||0===end||(end=this.length),targetStart>=target.length&&(targetStart=target.length),targetStart||(targetStart=0),0<end&&end<start&&(end=start),end===start)return 0;if(0===target.length||0===this.length)return 0;if(targetStart<0)throw new RangeError("targetStart out of bounds");if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");end>this.length&&(end=this.length),target.length-targetStart<end-start&&(end=target.length-targetStart+start);var len=end-start;if(this===target&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(targetStart,start,end);else if(this===target&&start<targetStart&&targetStart<end)for(var i=len-1;0<=i;--i)target[i+targetStart]=this[i+start];else Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart);return len},Buffer.prototype.fill=function(val,start,end,encoding){if("string"==typeof val){if("string"==typeof start?(encoding=start,start=0,end=this.length):"string"==typeof end&&(encoding=end,end=this.length),void 0!==encoding&&"string"!=typeof encoding)throw new TypeError("encoding must be a string");if("string"==typeof encoding&&!Buffer.isEncoding(encoding))throw new TypeError("Unknown encoding: "+encoding);if(1===val.length){var code=val.charCodeAt(0);("utf8"===encoding&&code<128||"latin1"===encoding)&&(val=code)}}else"number"==typeof val&&(val&=255);if(start<0||this.length<start||this.length<end)throw new RangeError("Out of range index");if(end<=start)return this;var i;if(start>>>=0,end=void 0===end?this.length:end>>>0,val||(val=0),"number"==typeof val)for(i=start;i<end;++i)this[i]=val;else{var bytes=Buffer.isBuffer(val)?val:new Buffer(val,encoding),len=bytes.length;if(0===len)throw new TypeError('The value "'+val+'" is invalid for argument "value"');for(i=0;i<end-start;++i)this[i+start]=bytes[i%len]}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function toHex(n){return n<16?"0"+n.toString(16):n.toString(16)}function utf8ToBytes(string,units){var codePoint;units=units||1/0;for(var length=string.length,leadSurrogate=null,bytes=[],i=0;i<length;++i){if(55295<(codePoint=string.charCodeAt(i))&&codePoint<57344){if(!leadSurrogate){if(56319<codePoint){-1<(units-=3)&&bytes.push(239,191,189);continue}if(i+1===length){-1<(units-=3)&&bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){-1<(units-=3)&&bytes.push(239,191,189),leadSurrogate=codePoint;continue}codePoint=65536+(leadSurrogate-55296<<10|codePoint-56320)}else leadSurrogate&&-1<(units-=3)&&bytes.push(239,191,189);if(leadSurrogate=null,codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,63&codePoint|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,63&codePoint|128)}else{if(!(codePoint<1114112))throw new Error("Invalid code point");if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,63&codePoint|128)}}return bytes}function base64ToBytes(str){return base64.toByteArray(function(str){if((str=(str=str.split("=")[0]).trim().replace(INVALID_BASE64_RE,"")).length<2)return"";for(;str.length%4!=0;)str+="=";return str}(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length&&!(i+offset>=dst.length||i>=src.length);++i)dst[i+offset]=src[i];return i}function isArrayBuffer(obj){return obj instanceof ArrayBuffer||null!=obj&&null!=obj.constructor&&"ArrayBuffer"===obj.constructor.name&&"number"==typeof obj.byteLength}function numberIsNaN(obj){return obj!=obj}},{"base64-js":3,ieee754:37}],6:[function(require,module,exports){(function(Buffer){function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function(arg){return"boolean"==typeof arg},exports.isNull=function(arg){return null===arg},exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=function(arg){return"number"==typeof arg},exports.isString=function(arg){return"string"==typeof arg},exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=function(arg){return void 0===arg},exports.isRegExp=function(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function(d){return"[object Date]"===objectToString(d)},exports.isError=function(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function(arg){return"function"==typeof arg},exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=Buffer.isBuffer}).call(this,{isBuffer:require("../../is-buffer/index.js")})},{"../../is-buffer/index.js":39}],7:[function(require,module,exports){var ElementType=require("domelementtype"),entities=require("entities"),booleanAttributes={__proto__:null,allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,loop:!0,multiple:!0,muted:!0,open:!0,readonly:!0,required:!0,reversed:!0,scoped:!0,seamless:!0,selected:!0,typemustmatch:!0},unencodedElements={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var singleTag={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},render=module.exports=function(dom,opts){Array.isArray(dom)||dom.cheerio||(dom=[dom]),opts=opts||{};for(var output="",i=0;i<dom.length;i++){var elem=dom[i];"root"===elem.type?output+=render(elem.children,opts):ElementType.isTag(elem)?output+=renderTag(elem,opts):elem.type===ElementType.Directive?output+=renderDirective(elem):elem.type===ElementType.Comment?output+=renderComment(elem):elem.type===ElementType.CDATA?output+=renderCdata(elem):output+=renderText(elem,opts)}return output};function renderTag(elem,opts){"svg"===elem.name&&(opts={decodeEntities:opts.decodeEntities,xmlMode:!0});var tag="<"+elem.name,attribs=function(attributes,opts){if(attributes){var value,output="";for(var key in attributes)output&&(output+=" "),!(value=attributes[key])&&booleanAttributes[key]?output+=key:output+=key+'="'+(opts.decodeEntities?entities.encodeXML(value):value)+'"';return output}}(elem.attribs,opts);return attribs&&(tag+=" "+attribs),!opts.xmlMode||elem.children&&0!==elem.children.length?(tag+=">",elem.children&&(tag+=render(elem.children,opts)),singleTag[elem.name]&&!opts.xmlMode||(tag+="</"+elem.name+">")):tag+="/>",tag}function renderDirective(elem){return"<"+elem.data+">"}function renderText(elem,opts){var data=elem.data||"";return!opts.decodeEntities||elem.parent&&elem.parent.name in unencodedElements||(data=entities.encodeXML(data)),data}function renderCdata(elem){return"<![CDATA["+elem.children[0].data+"]]>"}function renderComment(elem){return"\x3c!--"+elem.data+"--\x3e"}},{domelementtype:8,entities:20}],8:[function(require,module,exports){module.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",isTag:function(elem){return"tag"===elem.type||"script"===elem.type||"style"===elem.type}}},{}],9:[function(require,module,exports){module.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(elem){return"tag"===elem.type||"script"===elem.type||"style"===elem.type}}},{}],10:[function(require,module,exports){var ElementType=require("domelementtype"),re_whitespace=/\s+/g,NodePrototype=require("./lib/node"),ElementPrototype=require("./lib/element");function DomHandler(callback,options,elementCB){"object"==typeof callback?(elementCB=options,options=callback,callback=null):"function"==typeof options&&(elementCB=options,options=defaultOpts),this._callback=callback,this._options=options||defaultOpts,this._elementCB=elementCB,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var defaultOpts={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};DomHandler.prototype.onparserinit=function(parser){this._parser=parser},DomHandler.prototype.onreset=function(){DomHandler.call(this,this._callback,this._options,this._elementCB)},DomHandler.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},DomHandler.prototype._handleCallback=DomHandler.prototype.onerror=function(error){if("function"==typeof this._callback)this._callback(error,this.dom);else if(error)throw error},DomHandler.prototype.onclosetag=function(){var elem=this._tagStack.pop();this._options.withEndIndices&&elem&&(elem.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(elem)},DomHandler.prototype._createDomElement=function(properties){if(!this._options.withDomLvl1)return properties;var element;for(var key in element="tag"===properties.type?Object.create(ElementPrototype):Object.create(NodePrototype),properties)properties.hasOwnProperty(key)&&(element[key]=properties[key]);return element},DomHandler.prototype._addDomElement=function(element){var parent=this._tagStack[this._tagStack.length-1],siblings=parent?parent.children:this.dom,previousSibling=siblings[siblings.length-1];element.next=null,this._options.withStartIndices&&(element.startIndex=this._parser.startIndex),this._options.withEndIndices&&(element.endIndex=this._parser.endIndex),previousSibling?(element.prev=previousSibling).next=element:element.prev=null,siblings.push(element),element.parent=parent||null},DomHandler.prototype.onopentag=function(name,attribs){var properties={type:"script"===name?ElementType.Script:"style"===name?ElementType.Style:ElementType.Tag,name:name,attribs:attribs,children:[]},element=this._createDomElement(properties);this._addDomElement(element),this._tagStack.push(element)},DomHandler.prototype.ontext=function(data){var lastTag,normalize=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(lastTag=this.dom[this.dom.length-1]).type===ElementType.Text)normalize?lastTag.data=(lastTag.data+data).replace(re_whitespace," "):lastTag.data+=data;else if(this._tagStack.length&&(lastTag=this._tagStack[this._tagStack.length-1])&&(lastTag=lastTag.children[lastTag.children.length-1])&&lastTag.type===ElementType.Text)normalize?lastTag.data=(lastTag.data+data).replace(re_whitespace," "):lastTag.data+=data;else{normalize&&(data=data.replace(re_whitespace," "));var element=this._createDomElement({data:data,type:ElementType.Text});this._addDomElement(element)}},DomHandler.prototype.oncomment=function(data){var lastTag=this._tagStack[this._tagStack.length-1];if(lastTag&&lastTag.type===ElementType.Comment)lastTag.data+=data;else{var properties={data:data,type:ElementType.Comment},element=this._createDomElement(properties);this._addDomElement(element),this._tagStack.push(element)}},DomHandler.prototype.oncdatastart=function(){var properties={children:[{data:"",type:ElementType.Text}],type:ElementType.CDATA},element=this._createDomElement(properties);this._addDomElement(element),this._tagStack.push(element)},DomHandler.prototype.oncommentend=DomHandler.prototype.oncdataend=function(){this._tagStack.pop()},DomHandler.prototype.onprocessinginstruction=function(name,data){var element=this._createDomElement({name:name,data:data,type:ElementType.Directive});this._addDomElement(element)},module.exports=DomHandler},{"./lib/element":11,"./lib/node":12,domelementtype:9}],11:[function(require,module,exports){var NodePrototype=require("./node"),ElementPrototype=module.exports=Object.create(NodePrototype),domLvl1={tagName:"name"};Object.keys(domLvl1).forEach(function(key){var shorthand=domLvl1[key];Object.defineProperty(ElementPrototype,key,{get:function(){return this[shorthand]||null},set:function(val){return this[shorthand]=val}})})},{"./node":12}],12:[function(require,module,exports){var NodePrototype=module.exports={get firstChild(){var children=this.children;return children&&children[0]||null},get lastChild(){var children=this.children;return children&&children[children.length-1]||null},get nodeType(){return nodeTypes[this.type]||nodeTypes.element}},domLvl1={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},nodeTypes={element:1,text:3,cdata:4,comment:8};Object.keys(domLvl1).forEach(function(key){var shorthand=domLvl1[key];Object.defineProperty(NodePrototype,key,{get:function(){return this[shorthand]||null},set:function(val){return this[shorthand]=val}})})},{}],13:[function(require,module,exports){var DomUtils=module.exports;[require("./lib/stringify"),require("./lib/traversal"),require("./lib/manipulation"),require("./lib/querying"),require("./lib/legacy"),require("./lib/helpers")].forEach(function(ext){Object.keys(ext).forEach(function(key){DomUtils[key]=ext[key].bind(DomUtils)})})},{"./lib/helpers":14,"./lib/legacy":15,"./lib/manipulation":16,"./lib/querying":17,"./lib/stringify":18,"./lib/traversal":19}],14:[function(require,module,exports){exports.removeSubsets=function(nodes){for(var node,ancestor,replace,idx=nodes.length;-1<--idx;){for(node=ancestor=nodes[idx],replace=!(nodes[idx]=null);ancestor;){if(-1<nodes.indexOf(ancestor)){replace=!1,nodes.splice(idx,1);break}ancestor=ancestor.parent}replace&&(nodes[idx]=node)}return nodes};var POSITION_DISCONNECTED=1,POSITION_PRECEDING=2,POSITION_FOLLOWING=4,POSITION_CONTAINS=8,POSITION_CONTAINED_BY=16,comparePos=exports.compareDocumentPosition=function(nodeA,nodeB){var current,sharedParent,siblings,aSibling,bSibling,idx,aParents=[],bParents=[];if(nodeA===nodeB)return 0;for(current=nodeA;current;)aParents.unshift(current),current=current.parent;for(current=nodeB;current;)bParents.unshift(current),current=current.parent;for(idx=0;aParents[idx]===bParents[idx];)idx++;return 0===idx?POSITION_DISCONNECTED:(siblings=(sharedParent=aParents[idx-1]).children,aSibling=aParents[idx],bSibling=bParents[idx],siblings.indexOf(aSibling)>siblings.indexOf(bSibling)?sharedParent===nodeB?POSITION_FOLLOWING|POSITION_CONTAINED_BY:POSITION_FOLLOWING:sharedParent===nodeA?POSITION_PRECEDING|POSITION_CONTAINS:POSITION_PRECEDING)};exports.uniqueSort=function(nodes){var node,position,idx=nodes.length;for(nodes=nodes.slice();-1<--idx;)node=nodes[idx],-1<(position=nodes.indexOf(node))&&position<idx&&nodes.splice(idx,1);return nodes.sort(function(a,b){var relative=comparePos(a,b);return relative&POSITION_PRECEDING?-1:relative&POSITION_FOLLOWING?1:0}),nodes}},{}],15:[function(require,module,exports){var ElementType=require("domelementtype"),isTag=exports.isTag=ElementType.isTag;exports.testElement=function(options,element){for(var key in options)if(options.hasOwnProperty(key)){if("tag_name"===key){if(!isTag(element)||!options.tag_name(element.name))return!1}else if("tag_type"===key){if(!options.tag_type(element.type))return!1}else if("tag_contains"===key){if(isTag(element)||!options.tag_contains(element.data))return!1}else if(!element.attribs||!options[key](element.attribs[key]))return!1}else;return!0};var Checks={tag_name:function(name){return"function"==typeof name?function(elem){return isTag(elem)&&name(elem.name)}:"*"===name?isTag:function(elem){return isTag(elem)&&elem.name===name}},tag_type:function(type){return"function"==typeof type?function(elem){return type(elem.type)}:function(elem){return elem.type===type}},tag_contains:function(data){return"function"==typeof data?function(elem){return!isTag(elem)&&data(elem.data)}:function(elem){return!isTag(elem)&&elem.data===data}}};function getAttribCheck(attrib,value){return"function"==typeof value?function(elem){return elem.attribs&&value(elem.attribs[attrib])}:function(elem){return elem.attribs&&elem.attribs[attrib]===value}}function combineFuncs(a,b){return function(elem){return a(elem)||b(elem)}}exports.getElements=function(options,element,recurse,limit){var funcs=Object.keys(options).map(function(key){var value=options[key];return key in Checks?Checks[key](value):getAttribCheck(key,value)});return 0===funcs.length?[]:this.filter(funcs.reduce(combineFuncs),element,recurse,limit)},exports.getElementById=function(id,element,recurse){return Array.isArray(element)||(element=[element]),this.findOne(getAttribCheck("id",id),element,!1!==recurse)},exports.getElementsByTagName=function(name,element,recurse,limit){return this.filter(Checks.tag_name(name),element,recurse,limit)},exports.getElementsByTagType=function(type,element,recurse,limit){return this.filter(Checks.tag_type(type),element,recurse,limit)}},{domelementtype:9}],16:[function(require,module,exports){exports.removeElement=function(elem){if(elem.prev&&(elem.prev.next=elem.next),elem.next&&(elem.next.prev=elem.prev),elem.parent){var childs=elem.parent.children;childs.splice(childs.lastIndexOf(elem),1)}},exports.replaceElement=function(elem,replacement){var prev=replacement.prev=elem.prev;prev&&(prev.next=replacement);var next=replacement.next=elem.next;next&&(next.prev=replacement);var parent=replacement.parent=elem.parent;if(parent){var childs=parent.children;childs[childs.lastIndexOf(elem)]=replacement}},exports.appendChild=function(elem,child){if(1!==(child.parent=elem).children.push(child)){var sibling=elem.children[elem.children.length-2];(sibling.next=child).prev=sibling,child.next=null}},exports.append=function(elem,next){var parent=elem.parent,currNext=elem.next;if(next.next=currNext,((next.prev=elem).next=next).parent=parent,currNext){if(currNext.prev=next,parent){var childs=parent.children;childs.splice(childs.lastIndexOf(currNext),0,next)}}else parent&&parent.children.push(next)},exports.prepend=function(elem,prev){var parent=elem.parent;if(parent){var childs=parent.children;childs.splice(childs.lastIndexOf(elem),0,prev)}elem.prev&&(elem.prev.next=prev),prev.parent=parent,prev.prev=elem.prev,(prev.next=elem).prev=prev}},{}],17:[function(require,module,exports){var isTag=require("domelementtype").isTag;function find(test,elems,recurse,limit){for(var childs,result=[],i=0,j=elems.length;i<j&&!(test(elems[i])&&(result.push(elems[i]),--limit<=0))&&(childs=elems[i].children,!(recurse&&childs&&0<childs.length&&(childs=find(test,childs,recurse,limit),result=result.concat(childs),(limit-=childs.length)<=0)));i++);return result}module.exports={filter:function(test,element,recurse,limit){Array.isArray(element)||(element=[element]);"number"==typeof limit&&isFinite(limit)||(limit=1/0);return find(test,element,!1!==recurse,limit)},find:find,findOneChild:function(test,elems){for(var i=0,l=elems.length;i<l;i++)if(test(elems[i]))return elems[i];return null},findOne:function findOne(test,elems){var elem=null;for(var i=0,l=elems.length;i<l&&!elem;i++)isTag(elems[i])&&(test(elems[i])?elem=elems[i]:0<elems[i].children.length&&(elem=findOne(test,elems[i].children)));return elem},existsOne:function existsOne(test,elems){for(var i=0,l=elems.length;i<l;i++)if(isTag(elems[i])&&(test(elems[i])||0<elems[i].children.length&&existsOne(test,elems[i].children)))return!0;return!1},findAll:function(test,rootElems){var result=[],stack=rootElems.slice();for(;stack.length;){var elem=stack.shift();isTag(elem)&&(elem.children&&0<elem.children.length&&stack.unshift.apply(stack,elem.children),test(elem)&&result.push(elem))}return result}}},{domelementtype:9}],18:[function(require,module,exports){var ElementType=require("domelementtype"),getOuterHTML=require("dom-serializer"),isTag=ElementType.isTag;module.exports={getInnerHTML:function(elem,opts){return elem.children?elem.children.map(function(elem){return getOuterHTML(elem,opts)}).join(""):""},getOuterHTML:getOuterHTML,getText:function getText(elem){if(Array.isArray(elem))return elem.map(getText).join("");if(isTag(elem))return"br"===elem.name?"\n":getText(elem.children);if(elem.type===ElementType.CDATA)return getText(elem.children);if(elem.type===ElementType.Text)return elem.data;return""}}},{"dom-serializer":7,domelementtype:9}],19:[function(require,module,exports){var getChildren=exports.getChildren=function(elem){return elem.children},getParent=exports.getParent=function(elem){return elem.parent};exports.getSiblings=function(elem){var parent=getParent(elem);return parent?getChildren(parent):[elem]},exports.getAttributeValue=function(elem,name){return elem.attribs&&elem.attribs[name]},exports.hasAttrib=function(elem,name){return!!elem.attribs&&hasOwnProperty.call(elem.attribs,name)},exports.getName=function(elem){return elem.name}},{}],20:[function(require,module,exports){var encode=require("./lib/encode.js"),decode=require("./lib/decode.js");exports.decode=function(data,level){return(!level||level<=0?decode.XML:decode.HTML)(data)},exports.decodeStrict=function(data,level){return(!level||level<=0?decode.XML:decode.HTMLStrict)(data)},exports.encode=function(data,level){return(!level||level<=0?encode.XML:encode.HTML)(data)},exports.encodeXML=encode.XML,exports.encodeHTML4=exports.encodeHTML5=exports.encodeHTML=encode.HTML,exports.decodeXML=exports.decodeXMLStrict=decode.XML,exports.decodeHTML4=exports.decodeHTML5=exports.decodeHTML=decode.HTML,exports.decodeHTML4Strict=exports.decodeHTML5Strict=exports.decodeHTMLStrict=decode.HTMLStrict,exports.escape=encode.escape},{"./lib/decode.js":21,"./lib/encode.js":23}],21:[function(require,module,exports){var entityMap=require("../maps/entities.json"),legacyMap=require("../maps/legacy.json"),xmlMap=require("../maps/xml.json"),decodeCodePoint=require("./decode_codepoint.js"),decodeXMLStrict=getStrictDecoder(xmlMap),decodeHTMLStrict=getStrictDecoder(entityMap);function getStrictDecoder(map){var keys=Object.keys(map).join("|"),replace=getReplacer(map),re=new RegExp("&(?:"+(keys+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(str){return String(str).replace(re,replace)}}var decodeHTML=function(){for(var legacy=Object.keys(legacyMap).sort(sorter),keys=Object.keys(entityMap).sort(sorter),i=0,j=0;i<keys.length;i++)legacy[j]===keys[i]?(keys[i]+=";?",j++):keys[i]+=";";var re=new RegExp("&(?:"+keys.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),replace=getReplacer(entityMap);function replacer(str){return";"!==str.substr(-1)&&(str+=";"),replace(str)}return function(str){return String(str).replace(re,replacer)}}();function sorter(a,b){return a<b?1:-1}function getReplacer(map){return function(str){return"#"===str.charAt(1)?"X"===str.charAt(2)||"x"===str.charAt(2)?decodeCodePoint(parseInt(str.substr(3),16)):decodeCodePoint(parseInt(str.substr(2),10)):map[str.slice(1,-1)]}}module.exports={XML:decodeXMLStrict,HTML:decodeHTML,HTMLStrict:decodeHTMLStrict}},{"../maps/entities.json":25,"../maps/legacy.json":26,"../maps/xml.json":27,"./decode_codepoint.js":22}],22:[function(require,module,exports){var decodeMap=require("../maps/decode.json");module.exports=function(codePoint){if(55296<=codePoint&&codePoint<=57343||1114111<codePoint)return"�";codePoint in decodeMap&&(codePoint=decodeMap[codePoint]);var output="";65535<codePoint&&(codePoint-=65536,output+=String.fromCharCode(codePoint>>>10&1023|55296),codePoint=56320|1023&codePoint);return output+=String.fromCharCode(codePoint)}},{"../maps/decode.json":24}],23:[function(require,module,exports){var inverseXML=getInverseObj(require("../maps/xml.json")),xmlReplacer=getInverseReplacer(inverseXML);exports.XML=getInverse(inverseXML,xmlReplacer);var inverseHTML=getInverseObj(require("../maps/entities.json")),htmlReplacer=getInverseReplacer(inverseHTML);function getInverseObj(obj){return Object.keys(obj).sort().reduce(function(inverse,name){return inverse[obj[name]]="&"+name+";",inverse},{})}function getInverseReplacer(inverse){var single=[],multiple=[];return Object.keys(inverse).forEach(function(k){1===k.length?single.push("\\"+k):multiple.push(k)}),multiple.unshift("["+single.join("")+"]"),new RegExp(multiple.join("|"),"g")}exports.HTML=getInverse(inverseHTML,htmlReplacer);var re_nonASCII=/[^\0-\x7F]/g,re_astralSymbols=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function singleCharReplacer(c){return"&#x"+c.charCodeAt(0).toString(16).toUpperCase()+";"}function astralReplacer(c){return"&#x"+(1024*(c.charCodeAt(0)-55296)+c.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function getInverse(inverse,re){function func(name){return inverse[name]}return function(data){return data.replace(re,func).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}}var re_xmlChars=getInverseReplacer(inverseXML);exports.escape=function(data){return data.replace(re_xmlChars,singleCharReplacer).replace(re_astralSymbols,astralReplacer).replace(re_nonASCII,singleCharReplacer)}},{"../maps/entities.json":25,"../maps/xml.json":27}],24:[function(require,module,exports){module.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},{}],25:[function(require,module,exports){module.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],26:[function(require,module,exports){module.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},{}],27:[function(require,module,exports){module.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},{}],28:[function(require,module,exports){var objectCreate=Object.create||function(proto){var F=function(){};return F.prototype=proto,new F},objectKeys=Object.keys||function(obj){var keys=[];for(var k in obj)Object.prototype.hasOwnProperty.call(obj,k)&&keys.push(k);return k},bind=Function.prototype.bind||function(context){var fn=this;return function(){return fn.apply(context,arguments)}};function EventEmitter(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=objectCreate(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}((module.exports=EventEmitter).EventEmitter=EventEmitter).prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0;var hasDefineProperty,defaultMaxListeners=10;try{var o={};Object.defineProperty&&Object.defineProperty(o,"x",{value:0}),hasDefineProperty=0===o.x}catch(err){hasDefineProperty=!1}function $getMaxListeners(that){return void 0===that._maxListeners?EventEmitter.defaultMaxListeners:that._maxListeners}function _addListener(target,type,listener,prepend){var m,events,existing;if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');if((events=target._events)?(events.newListener&&(target.emit("newListener",type,listener.listener?listener.listener:listener),events=target._events),existing=events[type]):(events=target._events=objectCreate(null),target._eventsCount=0),existing){if("function"==typeof existing?existing=events[type]=prepend?[listener,existing]:[existing,listener]:prepend?existing.unshift(listener):existing.push(listener),!existing.warned&&(m=$getMaxListeners(target))&&0<m&&existing.length>m){existing.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+' "'+String(type)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');w.name="MaxListenersExceededWarning",w.emitter=target,w.type=type,w.count=existing.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",w.name,w.message)}}else existing=events[type]=listener,++target._eventsCount;return target}function onceWrapper(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var args=new Array(arguments.length),i=0;i<args.length;++i)args[i]=arguments[i];this.listener.apply(this.target,args)}}function _onceWrap(target,type,listener){var state={fired:!1,wrapFn:void 0,target:target,type:type,listener:listener},wrapped=bind.call(onceWrapper,state);return wrapped.listener=listener,state.wrapFn=wrapped}function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];return evlistener?"function"==typeof evlistener?unwrap?[evlistener.listener||evlistener]:[evlistener]:unwrap?function(arr){for(var ret=new Array(arr.length),i=0;i<ret.length;++i)ret[i]=arr[i].listener||arr[i];return ret}(evlistener):arrayClone(evlistener,evlistener.length):[]}function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if("function"==typeof evlistener)return 1;if(evlistener)return evlistener.length}return 0}function arrayClone(arr,n){for(var copy=new Array(n),i=0;i<n;++i)copy[i]=arr[i];return copy}hasDefineProperty?Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(arg){if("number"!=typeof arg||arg<0||arg!=arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg}}):EventEmitter.defaultMaxListeners=defaultMaxListeners,EventEmitter.prototype.setMaxListeners=function(n){if("number"!=typeof n||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=n,this},EventEmitter.prototype.getMaxListeners=function(){return $getMaxListeners(this)},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,events,doError="error"===type;if(events=this._events)doError=doError&&null==events.error;else if(!doError)return!1;if(doError){if(1<arguments.length&&(er=arguments[1]),er instanceof Error)throw er;var err=new Error('Unhandled "error" event. ('+er+")");throw err.context=er,err}if(!(handler=events[type]))return!1;var isFn="function"==typeof handler;switch(len=arguments.length){case 1:!function(handler,isFn,self){if(isFn)handler.call(self);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self)}(handler,isFn,this);break;case 2:!function(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1)}(handler,isFn,this,arguments[1]);break;case 3:!function(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}(handler,isFn,this,arguments[1],arguments[2]);break;case 4:!function(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:for(args=new Array(len-1),i=1;i<len;i++)args[i-1]=arguments[i];!function(handler,isFn,self,args){if(isFn)handler.apply(self,args);else for(var len=handler.length,listeners=arrayClone(handler,len),i=0;i<len;++i)listeners[i].apply(self,args)}(handler,isFn,this,args)}return!0},EventEmitter.prototype.on=EventEmitter.prototype.addListener=function(type,listener){return _addListener(this,type,listener,!1)},EventEmitter.prototype.prependListener=function(type,listener){return _addListener(this,type,listener,!0)},EventEmitter.prototype.once=function(type,listener){if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');return this.on(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.prependOnceListener=function(type,listener){if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');return this.prependListener(type,_onceWrap(this,type,listener)),this},EventEmitter.prototype.removeListener=function(type,listener){var list,events,position,i,originalListener;if("function"!=typeof listener)throw new TypeError('"listener" argument must be a function');if(!(events=this._events))return this;if(!(list=events[type]))return this;if(list===listener||list.listener===listener)0==--this._eventsCount?this._events=objectCreate(null):(delete events[type],events.removeListener&&this.emit("removeListener",type,list.listener||listener));else if("function"!=typeof list){for(position=-1,i=list.length-1;0<=i;i--)if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener,position=i;break}if(position<0)return this;0===position?list.shift():function(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}(list,position),1===list.length&&(events[type]=list[0]),events.removeListener&&this.emit("removeListener",type,originalListener||listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var listeners,events,i;if(!(events=this._events))return this;if(!events.removeListener)return 0===arguments.length?(this._events=objectCreate(null),this._eventsCount=0):events[type]&&(0==--this._eventsCount?this._events=objectCreate(null):delete events[type]),this;if(0===arguments.length){var key,keys=objectKeys(events);for(i=0;i<keys.length;++i)"removeListener"!==(key=keys[i])&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events=objectCreate(null),this._eventsCount=0,this}if("function"==typeof(listeners=events[type]))this.removeListener(type,listeners);else if(listeners)for(i=listeners.length-1;0<=i;i--)this.removeListener(type,listeners[i]);return this},EventEmitter.prototype.listeners=function(type){return _listeners(this,type,!0)},EventEmitter.prototype.rawListeners=function(type){return _listeners(this,type,!1)},EventEmitter.listenerCount=function(emitter,type){return"function"==typeof emitter.listenerCount?emitter.listenerCount(type):listenerCount.call(emitter,type)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]}},{}],29:[function(require,module,exports){function CollectingHandler(cbs){this._cbs=cbs||{},this.events=[]}module.exports=CollectingHandler;var EVENTS=require("./").EVENTS;Object.keys(EVENTS).forEach(function(name){if(0===EVENTS[name])CollectingHandler.prototype[name="on"+name]=function(){this.events.push([name]),this._cbs[name]&&this._cbs[name]()};else if(1===EVENTS[name])CollectingHandler.prototype[name="on"+name]=function(a){this.events.push([name,a]),this._cbs[name]&&this._cbs[name](a)};else{if(2!==EVENTS[name])throw Error("wrong number of arguments");CollectingHandler.prototype[name="on"+name]=function(a,b){this.events.push([name,a,b]),this._cbs[name]&&this._cbs[name](a,b)}}}),CollectingHandler.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},CollectingHandler.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var i=0,len=this.events.length;i<len;i++)if(this._cbs[this.events[i][0]]){var num=this.events[i].length;1===num?this._cbs[this.events[i][0]]():2===num?this._cbs[this.events[i][0]](this.events[i][1]):this._cbs[this.events[i][0]](this.events[i][1],this.events[i][2])}}},{"./":36}],30:[function(require,module,exports){var index=require("./index.js"),DomHandler=index.DomHandler,DomUtils=index.DomUtils;function FeedHandler(callback,options){this.init(callback,options)}function getElements(what,where){return DomUtils.getElementsByTagName(what,where,!0)}function getOneElement(what,where){return DomUtils.getElementsByTagName(what,where,!0,1)[0]}function fetch(what,where,recurse){return DomUtils.getText(DomUtils.getElementsByTagName(what,where,recurse,1)).trim()}function addConditionally(obj,prop,what,where,recurse){var tmp=fetch(what,where,recurse);tmp&&(obj[prop]=tmp)}require("inherits")(FeedHandler,DomHandler),FeedHandler.prototype.init=DomHandler;var isValidFeed=function(value){return"rss"===value||"feed"===value||"rdf:RDF"===value};FeedHandler.prototype.onend=function(){var tmp,childs,feed={},feedRoot=getOneElement(isValidFeed,this.dom);feedRoot&&("feed"===feedRoot.name?(childs=feedRoot.children,feed.type="atom",addConditionally(feed,"id","id",childs),addConditionally(feed,"title","title",childs),(tmp=getOneElement("link",childs))&&(tmp=tmp.attribs)&&(tmp=tmp.href)&&(feed.link=tmp),addConditionally(feed,"description","subtitle",childs),(tmp=fetch("updated",childs))&&(feed.updated=new Date(tmp)),addConditionally(feed,"author","email",childs,!0),feed.items=getElements("entry",childs).map(function(item){var tmp,entry={};return addConditionally(entry,"id","id",item=item.children),addConditionally(entry,"title","title",item),(tmp=getOneElement("link",item))&&(tmp=tmp.attribs)&&(tmp=tmp.href)&&(entry.link=tmp),(tmp=fetch("summary",item)||fetch("content",item))&&(entry.description=tmp),(tmp=fetch("updated",item))&&(entry.pubDate=new Date(tmp)),entry})):(childs=getOneElement("channel",feedRoot.children).children,feed.type=feedRoot.name.substr(0,3),feed.id="",addConditionally(feed,"title","title",childs),addConditionally(feed,"link","link",childs),addConditionally(feed,"description","description",childs),(tmp=fetch("lastBuildDate",childs))&&(feed.updated=new Date(tmp)),addConditionally(feed,"author","managingEditor",childs,!0),feed.items=getElements("item",feedRoot.children).map(function(item){var tmp,entry={};return addConditionally(entry,"id","guid",item=item.children),addConditionally(entry,"title","title",item),addConditionally(entry,"link","link",item),addConditionally(entry,"description","description",item),(tmp=fetch("pubDate",item))&&(entry.pubDate=new Date(tmp)),entry}))),this.dom=feed,DomHandler.prototype._handleCallback.call(this,feedRoot?null:Error("couldn't find root of feed"))},module.exports=FeedHandler},{"./index.js":36,inherits:38}],31:[function(require,module,exports){var Tokenizer=require("./Tokenizer.js"),formTags={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},openImpliesClose={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:formTags,input:formTags,output:formTags,button:formTags,datalist:formTags,textarea:formTags,option:{option:!0},optgroup:{optgroup:!0}},voidElements={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},re_nameEnd=/\s|\//;function Parser(cbs,options){this._options=options||{},this._cbs=cbs||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(Tokenizer=this._options.Tokenizer),this._tokenizer=new Tokenizer(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}require("inherits")(Parser,require("events").EventEmitter),Parser.prototype._updatePosition=function(initialOffset){null===this.endIndex?this._tokenizer._sectionStart<=initialOffset?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-initialOffset:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},Parser.prototype.ontext=function(data){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(data)},Parser.prototype.onopentagname=function(name){if(this._lowerCaseTagNames&&(name=name.toLowerCase()),this._tagname=name,!this._options.xmlMode&&name in openImpliesClose)for(var el;(el=this._stack[this._stack.length-1])in openImpliesClose[name];this.onclosetag(el));!this._options.xmlMode&&name in voidElements||this._stack.push(name),this._cbs.onopentagname&&this._cbs.onopentagname(name),this._cbs.onopentag&&(this._attribs={})},Parser.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in voidElements&&this._cbs.onclosetag(this._tagname),this._tagname=""},Parser.prototype.onclosetag=function(name){if(this._updatePosition(1),this._lowerCaseTagNames&&(name=name.toLowerCase()),!this._stack.length||name in voidElements&&!this._options.xmlMode)this._options.xmlMode||"br"!==name&&"p"!==name||(this.onopentagname(name),this._closeCurrentTag());else{var pos=this._stack.lastIndexOf(name);if(-1!==pos)if(this._cbs.onclosetag)for(pos=this._stack.length-pos;pos--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=pos;else"p"!==name||this._options.xmlMode||(this.onopentagname(name),this._closeCurrentTag())}},Parser.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing?this._closeCurrentTag():this.onopentagend()},Parser.prototype._closeCurrentTag=function(){var name=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===name&&(this._cbs.onclosetag&&this._cbs.onclosetag(name),this._stack.pop())},Parser.prototype.onattribname=function(name){this._lowerCaseAttributeNames&&(name=name.toLowerCase()),this._attribname=name},Parser.prototype.onattribdata=function(value){this._attribvalue+=value},Parser.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},Parser.prototype._getInstructionName=function(value){var idx=value.search(re_nameEnd),name=idx<0?value:value.substr(0,idx);return this._lowerCaseTagNames&&(name=name.toLowerCase()),name},Parser.prototype.ondeclaration=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("!"+name,"!"+value)}},Parser.prototype.onprocessinginstruction=function(value){if(this._cbs.onprocessinginstruction){var name=this._getInstructionName(value);this._cbs.onprocessinginstruction("?"+name,"?"+value)}},Parser.prototype.oncomment=function(value){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(value),this._cbs.oncommentend&&this._cbs.oncommentend()},Parser.prototype.oncdata=function(value){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(value),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+value+"]]")},Parser.prototype.onerror=function(err){this._cbs.onerror&&this._cbs.onerror(err)},Parser.prototype.onend=function(){if(this._cbs.onclosetag)for(var i=this._stack.length;0<i;this._cbs.onclosetag(this._stack[--i]));this._cbs.onend&&this._cbs.onend()},Parser.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},Parser.prototype.parseComplete=function(data){this.reset(),this.end(data)},Parser.prototype.write=function(chunk){this._tokenizer.write(chunk)},Parser.prototype.end=function(chunk){this._tokenizer.end(chunk)},Parser.prototype.pause=function(){this._tokenizer.pause()},Parser.prototype.resume=function(){this._tokenizer.resume()},Parser.prototype.parseChunk=Parser.prototype.write,Parser.prototype.done=Parser.prototype.end,module.exports=Parser},{"./Tokenizer.js":34,events:28,inherits:38}],32:[function(require,module,exports){function ProxyHandler(cbs){this._cbs=cbs||{}}module.exports=ProxyHandler;var EVENTS=require("./").EVENTS;Object.keys(EVENTS).forEach(function(name){if(0===EVENTS[name])ProxyHandler.prototype[name="on"+name]=function(){this._cbs[name]&&this._cbs[name]()};else if(1===EVENTS[name])ProxyHandler.prototype[name="on"+name]=function(a){this._cbs[name]&&this._cbs[name](a)};else{if(2!==EVENTS[name])throw Error("wrong number of arguments");ProxyHandler.prototype[name="on"+name]=function(a,b){this._cbs[name]&&this._cbs[name](a,b)}}})},{"./":36}],33:[function(require,module,exports){module.exports=Stream;var Parser=require("./WritableStream.js");function Stream(options){Parser.call(this,new Cbs(this),options)}function Cbs(scope){this.scope=scope}require("inherits")(Stream,Parser),Stream.prototype.readable=!0;var EVENTS=require("../").EVENTS;Object.keys(EVENTS).forEach(function(name){if(0===EVENTS[name])Cbs.prototype["on"+name]=function(){this.scope.emit(name)};else if(1===EVENTS[name])Cbs.prototype["on"+name]=function(a){this.scope.emit(name,a)};else{if(2!==EVENTS[name])throw Error("wrong number of arguments!");Cbs.prototype["on"+name]=function(a,b){this.scope.emit(name,a,b)}}})},{"../":36,"./WritableStream.js":35,inherits:38}],34:[function(require,module,exports){module.exports=Tokenizer;var char,SUCCESS,decodeCodePoint=require("entities/lib/decode_codepoint.js"),entityMap=require("entities/maps/entities.json"),legacyMap=require("entities/maps/legacy.json"),xmlMap=require("entities/maps/xml.json"),i=0,TEXT=i++,BEFORE_TAG_NAME=i++,IN_TAG_NAME=i++,IN_SELF_CLOSING_TAG=i++,BEFORE_CLOSING_TAG_NAME=i++,IN_CLOSING_TAG_NAME=i++,AFTER_CLOSING_TAG_NAME=i++,BEFORE_ATTRIBUTE_NAME=i++,IN_ATTRIBUTE_NAME=i++,AFTER_ATTRIBUTE_NAME=i++,BEFORE_ATTRIBUTE_VALUE=i++,IN_ATTRIBUTE_VALUE_DQ=i++,IN_ATTRIBUTE_VALUE_SQ=i++,IN_ATTRIBUTE_VALUE_NQ=i++,BEFORE_DECLARATION=i++,IN_DECLARATION=i++,IN_PROCESSING_INSTRUCTION=i++,BEFORE_COMMENT=i++,IN_COMMENT=i++,AFTER_COMMENT_1=i++,AFTER_COMMENT_2=i++,BEFORE_CDATA_1=i++,BEFORE_CDATA_2=i++,BEFORE_CDATA_3=i++,BEFORE_CDATA_4=i++,BEFORE_CDATA_5=i++,BEFORE_CDATA_6=i++,IN_CDATA=i++,AFTER_CDATA_1=i++,AFTER_CDATA_2=i++,BEFORE_SPECIAL=i++,BEFORE_SPECIAL_END=i++,BEFORE_SCRIPT_1=i++,BEFORE_SCRIPT_2=i++,BEFORE_SCRIPT_3=i++,BEFORE_SCRIPT_4=i++,BEFORE_SCRIPT_5=i++,AFTER_SCRIPT_1=i++,AFTER_SCRIPT_2=i++,AFTER_SCRIPT_3=i++,AFTER_SCRIPT_4=i++,AFTER_SCRIPT_5=i++,BEFORE_STYLE_1=i++,BEFORE_STYLE_2=i++,BEFORE_STYLE_3=i++,BEFORE_STYLE_4=i++,AFTER_STYLE_1=i++,AFTER_STYLE_2=i++,AFTER_STYLE_3=i++,AFTER_STYLE_4=i++,BEFORE_ENTITY=i++,BEFORE_NUMERIC_ENTITY=i++,IN_NAMED_ENTITY=i++,IN_NUMERIC_ENTITY=i++,IN_HEX_ENTITY=i++,j=0,SPECIAL_NONE=j++,SPECIAL_SCRIPT=j++,SPECIAL_STYLE=j++;function whitespace(c){return" "===c||"\n"===c||"\t"===c||"\f"===c||"\r"===c}function ifElseState(upper,SUCCESS,FAILURE){var lower=upper.toLowerCase();return upper===lower?function(c){c===lower?this._state=SUCCESS:(this._state=FAILURE,this._index--)}:function(c){c===lower||c===upper?this._state=SUCCESS:(this._state=FAILURE,this._index--)}}function consumeSpecialNameChar(upper,NEXT_STATE){var lower=upper.toLowerCase();return function(c){c===lower||c===upper?this._state=NEXT_STATE:(this._state=IN_TAG_NAME,this._index--)}}function Tokenizer(options,cbs){this._state=TEXT,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=TEXT,this._special=SPECIAL_NONE,this._cbs=cbs,this._running=!0,this._ended=!1,this._xmlMode=!(!options||!options.xmlMode),this._decodeEntities=!(!options||!options.decodeEntities)}Tokenizer.prototype._stateText=function(c){"<"===c?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=BEFORE_TAG_NAME,this._sectionStart=this._index):this._decodeEntities&&this._special===SPECIAL_NONE&&"&"===c&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=TEXT,this._state=BEFORE_ENTITY,this._sectionStart=this._index)},Tokenizer.prototype._stateBeforeTagName=function(c){"/"===c?this._state=BEFORE_CLOSING_TAG_NAME:"<"===c?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===c||this._special!==SPECIAL_NONE||whitespace(c)?this._state=TEXT:"!"===c?(this._state=BEFORE_DECLARATION,this._sectionStart=this._index+1):"?"===c?(this._state=IN_PROCESSING_INSTRUCTION,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==c&&"S"!==c?IN_TAG_NAME:BEFORE_SPECIAL,this._sectionStart=this._index)},Tokenizer.prototype._stateInTagName=function(c){("/"===c||">"===c||whitespace(c))&&(this._emitToken("onopentagname"),this._state=BEFORE_ATTRIBUTE_NAME,this._index--)},Tokenizer.prototype._stateBeforeCloseingTagName=function(c){whitespace(c)||(">"===c?this._state=TEXT:this._special!==SPECIAL_NONE?"s"===c||"S"===c?this._state=BEFORE_SPECIAL_END:(this._state=TEXT,this._index--):(this._state=IN_CLOSING_TAG_NAME,this._sectionStart=this._index))},Tokenizer.prototype._stateInCloseingTagName=function(c){(">"===c||whitespace(c))&&(this._emitToken("onclosetag"),this._state=AFTER_CLOSING_TAG_NAME,this._index--)},Tokenizer.prototype._stateAfterCloseingTagName=function(c){">"===c&&(this._state=TEXT,this._sectionStart=this._index+1)},Tokenizer.prototype._stateBeforeAttributeName=function(c){">"===c?(this._cbs.onopentagend(),this._state=TEXT,this._sectionStart=this._index+1):"/"===c?this._state=IN_SELF_CLOSING_TAG:whitespace(c)||(this._state=IN_ATTRIBUTE_NAME,this._sectionStart=this._index)},Tokenizer.prototype._stateInSelfClosingTag=function(c){">"===c?(this._cbs.onselfclosingtag(),this._state=TEXT,this._sectionStart=this._index+1):whitespace(c)||(this._state=BEFORE_ATTRIBUTE_NAME,this._index--)},Tokenizer.prototype._stateInAttributeName=function(c){("="===c||"/"===c||">"===c||whitespace(c))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=AFTER_ATTRIBUTE_NAME,this._index--)},Tokenizer.prototype._stateAfterAttributeName=function(c){"="===c?this._state=BEFORE_ATTRIBUTE_VALUE:"/"===c||">"===c?(this._cbs.onattribend(),this._state=BEFORE_ATTRIBUTE_NAME,this._index--):whitespace(c)||(this._cbs.onattribend(),this._state=IN_ATTRIBUTE_NAME,this._sectionStart=this._index)},Tokenizer.prototype._stateBeforeAttributeValue=function(c){'"'===c?(this._state=IN_ATTRIBUTE_VALUE_DQ,this._sectionStart=this._index+1):"'"===c?(this._state=IN_ATTRIBUTE_VALUE_SQ,this._sectionStart=this._index+1):whitespace(c)||(this._state=IN_ATTRIBUTE_VALUE_NQ,this._sectionStart=this._index,this._index--)},Tokenizer.prototype._stateInAttributeValueDoubleQuotes=function(c){'"'===c?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=BEFORE_ATTRIBUTE_NAME):this._decodeEntities&&"&"===c&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=BEFORE_ENTITY,this._sectionStart=this._index)},Tokenizer.prototype._stateInAttributeValueSingleQuotes=function(c){"'"===c?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=BEFORE_ATTRIBUTE_NAME):this._decodeEntities&&"&"===c&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=BEFORE_ENTITY,this._sectionStart=this._index)},Tokenizer.prototype._stateInAttributeValueNoQuotes=function(c){whitespace(c)||">"===c?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=BEFORE_ATTRIBUTE_NAME,this._index--):this._decodeEntities&&"&"===c&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=BEFORE_ENTITY,this._sectionStart=this._index)},Tokenizer.prototype._stateBeforeDeclaration=function(c){this._state="["===c?BEFORE_CDATA_1:"-"===c?BEFORE_COMMENT:IN_DECLARATION},Tokenizer.prototype._stateInDeclaration=function(c){">"===c&&(this._cbs.ondeclaration(this._getSection()),this._state=TEXT,this._sectionStart=this._index+1)},Tokenizer.prototype._stateInProcessingInstruction=function(c){">"===c&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=TEXT,this._sectionStart=this._index+1)},Tokenizer.prototype._stateBeforeComment=function(c){"-"===c?(this._state=IN_COMMENT,this._sectionStart=this._index+1):this._state=IN_DECLARATION},Tokenizer.prototype._stateInComment=function(c){"-"===c&&(this._state=AFTER_COMMENT_1)},Tokenizer.prototype._stateAfterComment1=function(c){this._state="-"===c?AFTER_COMMENT_2:IN_COMMENT},Tokenizer.prototype._stateAfterComment2=function(c){">"===c?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=TEXT,this._sectionStart=this._index+1):"-"!==c&&(this._state=IN_COMMENT)},Tokenizer.prototype._stateBeforeCdata1=ifElseState("C",BEFORE_CDATA_2,IN_DECLARATION),Tokenizer.prototype._stateBeforeCdata2=ifElseState("D",BEFORE_CDATA_3,IN_DECLARATION),Tokenizer.prototype._stateBeforeCdata3=ifElseState("A",BEFORE_CDATA_4,IN_DECLARATION),Tokenizer.prototype._stateBeforeCdata4=ifElseState("T",BEFORE_CDATA_5,IN_DECLARATION),Tokenizer.prototype._stateBeforeCdata5=ifElseState("A",BEFORE_CDATA_6,IN_DECLARATION),Tokenizer.prototype._stateBeforeCdata6=function(c){"["===c?(this._state=IN_CDATA,this._sectionStart=this._index+1):(this._state=IN_DECLARATION,this._index--)},Tokenizer.prototype._stateInCdata=function(c){"]"===c&&(this._state=AFTER_CDATA_1)},Tokenizer.prototype._stateAfterCdata1=(char="]",SUCCESS=AFTER_CDATA_2,function(c){c===char&&(this._state=SUCCESS)}),Tokenizer.prototype._stateAfterCdata2=function(c){">"===c?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=TEXT,this._sectionStart=this._index+1):"]"!==c&&(this._state=IN_CDATA)},Tokenizer.prototype._stateBeforeSpecial=function(c){"c"===c||"C"===c?this._state=BEFORE_SCRIPT_1:"t"===c||"T"===c?this._state=BEFORE_STYLE_1:(this._state=IN_TAG_NAME,this._index--)},Tokenizer.prototype._stateBeforeSpecialEnd=function(c){this._special!==SPECIAL_SCRIPT||"c"!==c&&"C"!==c?this._special!==SPECIAL_STYLE||"t"!==c&&"T"!==c?this._state=TEXT:this._state=AFTER_STYLE_1:this._state=AFTER_SCRIPT_1},Tokenizer.prototype._stateBeforeScript1=consumeSpecialNameChar("R",BEFORE_SCRIPT_2),Tokenizer.prototype._stateBeforeScript2=consumeSpecialNameChar("I",BEFORE_SCRIPT_3),Tokenizer.prototype._stateBeforeScript3=consumeSpecialNameChar("P",BEFORE_SCRIPT_4),Tokenizer.prototype._stateBeforeScript4=consumeSpecialNameChar("T",BEFORE_SCRIPT_5),Tokenizer.prototype._stateBeforeScript5=function(c){("/"===c||">"===c||whitespace(c))&&(this._special=SPECIAL_SCRIPT),this._state=IN_TAG_NAME,this._index--},Tokenizer.prototype._stateAfterScript1=ifElseState("R",AFTER_SCRIPT_2,TEXT),Tokenizer.prototype._stateAfterScript2=ifElseState("I",AFTER_SCRIPT_3,TEXT),Tokenizer.prototype._stateAfterScript3=ifElseState("P",AFTER_SCRIPT_4,TEXT),Tokenizer.prototype._stateAfterScript4=ifElseState("T",AFTER_SCRIPT_5,TEXT),Tokenizer.prototype._stateAfterScript5=function(c){">"===c||whitespace(c)?(this._special=SPECIAL_NONE,this._state=IN_CLOSING_TAG_NAME,this._sectionStart=this._index-6,this._index--):this._state=TEXT},Tokenizer.prototype._stateBeforeStyle1=consumeSpecialNameChar("Y",BEFORE_STYLE_2),Tokenizer.prototype._stateBeforeStyle2=consumeSpecialNameChar("L",BEFORE_STYLE_3),Tokenizer.prototype._stateBeforeStyle3=consumeSpecialNameChar("E",BEFORE_STYLE_4),Tokenizer.prototype._stateBeforeStyle4=function(c){("/"===c||">"===c||whitespace(c))&&(this._special=SPECIAL_STYLE),this._state=IN_TAG_NAME,this._index--},Tokenizer.prototype._stateAfterStyle1=ifElseState("Y",AFTER_STYLE_2,TEXT),Tokenizer.prototype._stateAfterStyle2=ifElseState("L",AFTER_STYLE_3,TEXT),Tokenizer.prototype._stateAfterStyle3=ifElseState("E",AFTER_STYLE_4,TEXT),Tokenizer.prototype._stateAfterStyle4=function(c){">"===c||whitespace(c)?(this._special=SPECIAL_NONE,this._state=IN_CLOSING_TAG_NAME,this._sectionStart=this._index-5,this._index--):this._state=TEXT},Tokenizer.prototype._stateBeforeEntity=ifElseState("#",BEFORE_NUMERIC_ENTITY,IN_NAMED_ENTITY),Tokenizer.prototype._stateBeforeNumericEntity=ifElseState("X",IN_HEX_ENTITY,IN_NUMERIC_ENTITY),Tokenizer.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var entity=this._buffer.substring(this._sectionStart+1,this._index),map=this._xmlMode?xmlMap:entityMap;map.hasOwnProperty(entity)&&(this._emitPartial(map[entity]),this._sectionStart=this._index+1)}},Tokenizer.prototype._parseLegacyEntity=function(){var start=this._sectionStart+1,limit=this._index-start;for(6<limit&&(limit=6);2<=limit;){var entity=this._buffer.substr(start,limit);if(legacyMap.hasOwnProperty(entity))return this._emitPartial(legacyMap[entity]),void(this._sectionStart+=limit+1);limit--}},Tokenizer.prototype._stateInNamedEntity=function(c){";"===c?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(c<"a"||"z"<c)&&(c<"A"||"Z"<c)&&(c<"0"||"9"<c)&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==TEXT?"="!==c&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},Tokenizer.prototype._decodeNumericEntity=function(offset,base){var sectionStart=this._sectionStart+offset;if(sectionStart!==this._index){var entity=this._buffer.substring(sectionStart,this._index),parsed=parseInt(entity,base);this._emitPartial(decodeCodePoint(parsed)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},Tokenizer.prototype._stateInNumericEntity=function(c){";"===c?(this._decodeNumericEntity(2,10),this._sectionStart++):(c<"0"||"9"<c)&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},Tokenizer.prototype._stateInHexEntity=function(c){";"===c?(this._decodeNumericEntity(3,16),this._sectionStart++):(c<"a"||"f"<c)&&(c<"A"||"F"<c)&&(c<"0"||"9"<c)&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},Tokenizer.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===TEXT?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},Tokenizer.prototype.write=function(chunk){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=chunk,this._parse()},Tokenizer.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var c=this._buffer.charAt(this._index);this._state===TEXT?this._stateText(c):this._state===BEFORE_TAG_NAME?this._stateBeforeTagName(c):this._state===IN_TAG_NAME?this._stateInTagName(c):this._state===BEFORE_CLOSING_TAG_NAME?this._stateBeforeCloseingTagName(c):this._state===IN_CLOSING_TAG_NAME?this._stateInCloseingTagName(c):this._state===AFTER_CLOSING_TAG_NAME?this._stateAfterCloseingTagName(c):this._state===IN_SELF_CLOSING_TAG?this._stateInSelfClosingTag(c):this._state===BEFORE_ATTRIBUTE_NAME?this._stateBeforeAttributeName(c):this._state===IN_ATTRIBUTE_NAME?this._stateInAttributeName(c):this._state===AFTER_ATTRIBUTE_NAME?this._stateAfterAttributeName(c):this._state===BEFORE_ATTRIBUTE_VALUE?this._stateBeforeAttributeValue(c):this._state===IN_ATTRIBUTE_VALUE_DQ?this._stateInAttributeValueDoubleQuotes(c):this._state===IN_ATTRIBUTE_VALUE_SQ?this._stateInAttributeValueSingleQuotes(c):this._state===IN_ATTRIBUTE_VALUE_NQ?this._stateInAttributeValueNoQuotes(c):this._state===BEFORE_DECLARATION?this._stateBeforeDeclaration(c):this._state===IN_DECLARATION?this._stateInDeclaration(c):this._state===IN_PROCESSING_INSTRUCTION?this._stateInProcessingInstruction(c):this._state===BEFORE_COMMENT?this._stateBeforeComment(c):this._state===IN_COMMENT?this._stateInComment(c):this._state===AFTER_COMMENT_1?this._stateAfterComment1(c):this._state===AFTER_COMMENT_2?this._stateAfterComment2(c):this._state===BEFORE_CDATA_1?this._stateBeforeCdata1(c):this._state===BEFORE_CDATA_2?this._stateBeforeCdata2(c):this._state===BEFORE_CDATA_3?this._stateBeforeCdata3(c):this._state===BEFORE_CDATA_4?this._stateBeforeCdata4(c):this._state===BEFORE_CDATA_5?this._stateBeforeCdata5(c):this._state===BEFORE_CDATA_6?this._stateBeforeCdata6(c):this._state===IN_CDATA?this._stateInCdata(c):this._state===AFTER_CDATA_1?this._stateAfterCdata1(c):this._state===AFTER_CDATA_2?this._stateAfterCdata2(c):this._state===BEFORE_SPECIAL?this._stateBeforeSpecial(c):this._state===BEFORE_SPECIAL_END?this._stateBeforeSpecialEnd(c):this._state===BEFORE_SCRIPT_1?this._stateBeforeScript1(c):this._state===BEFORE_SCRIPT_2?this._stateBeforeScript2(c):this._state===BEFORE_SCRIPT_3?this._stateBeforeScript3(c):this._state===BEFORE_SCRIPT_4?this._stateBeforeScript4(c):this._state===BEFORE_SCRIPT_5?this._stateBeforeScript5(c):this._state===AFTER_SCRIPT_1?this._stateAfterScript1(c):this._state===AFTER_SCRIPT_2?this._stateAfterScript2(c):this._state===AFTER_SCRIPT_3?this._stateAfterScript3(c):this._state===AFTER_SCRIPT_4?this._stateAfterScript4(c):this._state===AFTER_SCRIPT_5?this._stateAfterScript5(c):this._state===BEFORE_STYLE_1?this._stateBeforeStyle1(c):this._state===BEFORE_STYLE_2?this._stateBeforeStyle2(c):this._state===BEFORE_STYLE_3?this._stateBeforeStyle3(c):this._state===BEFORE_STYLE_4?this._stateBeforeStyle4(c):this._state===AFTER_STYLE_1?this._stateAfterStyle1(c):this._state===AFTER_STYLE_2?this._stateAfterStyle2(c):this._state===AFTER_STYLE_3?this._stateAfterStyle3(c):this._state===AFTER_STYLE_4?this._stateAfterStyle4(c):this._state===BEFORE_ENTITY?this._stateBeforeEntity(c):this._state===BEFORE_NUMERIC_ENTITY?this._stateBeforeNumericEntity(c):this._state===IN_NAMED_ENTITY?this._stateInNamedEntity(c):this._state===IN_NUMERIC_ENTITY?this._stateInNumericEntity(c):this._state===IN_HEX_ENTITY?this._stateInHexEntity(c):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},Tokenizer.prototype.pause=function(){this._running=!1},Tokenizer.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},Tokenizer.prototype.end=function(chunk){this._ended&&this._cbs.onerror(Error(".end() after done!")),chunk&&this.write(chunk),this._ended=!0,this._running&&this._finish()},Tokenizer.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},Tokenizer.prototype._handleTrailingData=function(){var data=this._buffer.substr(this._sectionStart);this._state===IN_CDATA||this._state===AFTER_CDATA_1||this._state===AFTER_CDATA_2?this._cbs.oncdata(data):this._state===IN_COMMENT||this._state===AFTER_COMMENT_1||this._state===AFTER_COMMENT_2?this._cbs.oncomment(data):this._state!==IN_NAMED_ENTITY||this._xmlMode?this._state!==IN_NUMERIC_ENTITY||this._xmlMode?this._state!==IN_HEX_ENTITY||this._xmlMode?this._state!==IN_TAG_NAME&&this._state!==BEFORE_ATTRIBUTE_NAME&&this._state!==BEFORE_ATTRIBUTE_VALUE&&this._state!==AFTER_ATTRIBUTE_NAME&&this._state!==IN_ATTRIBUTE_NAME&&this._state!==IN_ATTRIBUTE_VALUE_SQ&&this._state!==IN_ATTRIBUTE_VALUE_DQ&&this._state!==IN_ATTRIBUTE_VALUE_NQ&&this._state!==IN_CLOSING_TAG_NAME&&this._cbs.ontext(data):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},Tokenizer.prototype.reset=function(){Tokenizer.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},Tokenizer.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},Tokenizer.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},Tokenizer.prototype._emitToken=function(name){this._cbs[name](this._getSection()),this._sectionStart=-1},Tokenizer.prototype._emitPartial=function(value){this._baseState!==TEXT?this._cbs.onattribdata(value):this._cbs.ontext(value)}},{"entities/lib/decode_codepoint.js":22,"entities/maps/entities.json":25,"entities/maps/legacy.json":26,"entities/maps/xml.json":27}],35:[function(require,module,exports){module.exports=Stream;var Parser=require("./Parser.js"),WritableStream=require("stream").Writable||require("readable-stream").Writable,StringDecoder=require("string_decoder").StringDecoder,Buffer=require("buffer").Buffer;function Stream(cbs,options){var parser=this._parser=new Parser(cbs,options),decoder=this._decoder=new StringDecoder;WritableStream.call(this,{decodeStrings:!1}),this.once("finish",function(){parser.end(decoder.end())})}require("inherits")(Stream,WritableStream),WritableStream.prototype._write=function(chunk,encoding,cb){chunk instanceof Buffer&&(chunk=this._decoder.write(chunk)),this._parser.write(chunk),cb()}},{"./Parser.js":31,buffer:5,inherits:38,"readable-stream":4,stream:121,string_decoder:122}],36:[function(require,module,exports){var Parser=require("./Parser.js"),DomHandler=require("domhandler");function defineProp(name,value){return delete module.exports[name],module.exports[name]=value}module.exports={Parser:Parser,Tokenizer:require("./Tokenizer.js"),ElementType:require("domelementtype"),DomHandler:DomHandler,get FeedHandler(){return defineProp("FeedHandler",require("./FeedHandler.js"))},get Stream(){return defineProp("Stream",require("./Stream.js"))},get WritableStream(){return defineProp("WritableStream",require("./WritableStream.js"))},get ProxyHandler(){return defineProp("ProxyHandler",require("./ProxyHandler.js"))},get DomUtils(){return defineProp("DomUtils",require("domutils"))},get CollectingHandler(){return defineProp("CollectingHandler",require("./CollectingHandler.js"))},DefaultHandler:DomHandler,get RssHandler(){return defineProp("RssHandler",this.FeedHandler)},parseDOM:function(data,options){var handler=new DomHandler(options);return new Parser(handler,options).end(data),handler.dom},parseFeed:function(feed,options){var handler=new module.exports.FeedHandler(options);return new Parser(handler,options).end(feed),handler.dom},createDomStream:function(cb,options,elementCb){var handler=new DomHandler(cb,options,elementCb);return new Parser(handler,options)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},{"./CollectingHandler.js":29,"./FeedHandler.js":30,"./Parser.js":31,"./ProxyHandler.js":32,"./Stream.js":33,"./Tokenizer.js":34,"./WritableStream.js":35,domelementtype:9,domhandler:10,domutils:13}],37:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;0<nBits;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;0<nBits;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)},exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),2<=(value+=1<=e+eBias?rt/c:rt*Math.pow(2,1-eBias))*c&&(e++,c/=2),eMax<=e+eBias?(m=0,e=eMax):1<=e+eBias?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));8<=mLen;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;0<eLen;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}},{}],38:[function(require,module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},{}],39:[function(require,module,exports){function isBuffer(obj){return!!obj.constructor&&"function"==typeof obj.constructor.isBuffer&&obj.constructor.isBuffer(obj)}module.exports=function(obj){return null!=obj&&(isBuffer(obj)||function(obj){return"function"==typeof obj.readFloatLE&&"function"==typeof obj.slice&&isBuffer(obj.slice(0,0))}(obj)||!!obj._isBuffer)}},{}],40:[function(require,module,exports){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},{}],41:[function(require,module,exports){"use strict";exports.i18n=require("./src/i18n"),exports.exception=require("./src/exception");var util=require("./src/util");exports.forEachSquare=util.forEachSquare,exports.squareColor=util.squareColor,exports.squareToCoordinates=util.squareToCoordinates,exports.coordinatesToSquare=util.coordinatesToSquare,exports.isMoveDescriptor=require("./src/movedescriptor").isMoveDescriptor,exports.Position=require("./src/position").Position,exports.Game=require("./src/game").Game;var pgn=require("./src/pgn");exports.pgnRead=pgn.pgnRead},{"./src/exception":43,"./src/game":44,"./src/i18n":45,"./src/movedescriptor":46,"./src/pgn":47,"./src/position":48,"./src/util":55}],42:[function(require,module,exports){"use strict";exports.WHITE=0,exports.BLACK=1,exports.KING=0,exports.QUEEN=1,exports.ROOK=2,exports.BISHOP=3,exports.KNIGHT=4,exports.PAWN=5,exports.WK=0,exports.BK=1,exports.WQ=2,exports.BQ=3,exports.WR=4,exports.BR=5,exports.WB=6,exports.BB=7,exports.WN=8,exports.BN=9,exports.WP=10,exports.BP=11,exports.EMPTY=-1,exports.INVALID=-2,exports.WHITE_WINS=0,exports.BLACK_WINS=1,exports.DRAW=2,exports.LINE=3,exports.REGULAR_CHESS=0,exports.CHESS_960=1;var RESULT_SYMBOL=["1-0","0-1","1/2-1/2","*"],VARIANT_SYMBOL=["regular","chess960"];exports.colorToString=function(color){return"wb"[color]},exports.pieceToString=function(piece){return"kqrbnp"[piece]},exports.rankToString=function(rank){return"12345678"[rank]},exports.fileToString=function(file){return"abcdefgh"[file]},exports.resultToString=function(result){return RESULT_SYMBOL[result]},exports.variantToString=function(variant){return VARIANT_SYMBOL[variant]},exports.colorFromString=function(color){return"wb".indexOf(color)},exports.pieceFromString=function(piece){return"kqrbnp".indexOf(piece)},exports.rankFromString=function(rank){return"12345678".indexOf(rank)},exports.fileFromString=function(file){return"abcdefgh".indexOf(file)},exports.resultFromString=function(result){return RESULT_SYMBOL.indexOf(result)},exports.variantFromString=function(variant){return VARIANT_SYMBOL.indexOf(variant)},exports.squareToString=function(square){return"abcdefgh"[square%16]+"12345678"[Math.floor(square/16)]},exports.squareFromString=function(square){if(!/^[a-h][1-8]$/.test(square))return-1;var file="abcdefgh".indexOf(square[0]);return 16*"12345678".indexOf(square[1])+file},exports.coloredPieceToString=function(cp){return"wb"[cp%2]+"kqrbnp"[Math.floor(cp/2)]},exports.coloredPieceFromString=function(cp){if(!/^[wb][kqrbnp]$/.test(cp))return-1;var color="wb".indexOf(cp[0]);return 2*"kqrbnp".indexOf(cp[1])+color}},{}],43:[function(require,module,exports){"use strict";function buildMessage(message,offset,tokens){for(var i=offset;i<tokens.length;++i){var re=new RegExp("%"+(i-offset+1)+"\\$s");message=message.replace(re,tokens[i])}return message}function toString(exceptionName,message){return exceptionName+" -> "+message}(exports.IllegalArgument=function(functionName){this.functionName=functionName}).prototype.toString=function(){return"Illegal argument in function "+this.functionName},(exports.InvalidFEN=function(fen,message){this.fen=fen,this.message=buildMessage(message,2,arguments)}).prototype.toString=function(){return toString("InvalidFEN",this.message)},(exports.InvalidNotation=function(fen,notation,message){this.fen=fen,this.notation=notation,this.message=buildMessage(message,3,arguments)}).prototype.toString=function(){return toString("InvalidNotation",this.message)},(exports.InvalidPGN=function(pgn,index,message){this.pgn=pgn,this.index=index,this.message=buildMessage(message,3,arguments)}).prototype.toString=function(){return toString("InvalidPGN",this.message)}},{}],44:[function(require,module,exports){"use strict";var bt=require("./basetypes"),exception=require("./exception"),i18n=require("./i18n"),Position=require("./position").Position,Game=exports.Game=function(){this._playerName=[void 0,void 0],this._playerElo=[void 0,void 0],this._playerTitle=[void 0,void 0],this._event=void 0,this._round=void 0,this._date=void 0,this._site=void 0,this._annotator=void 0,this._result=bt.LINE,this._initialPosition=new Position,this._fullMoveNumber=1,this._mainVariation=new Variation(this,!0)};function Node(parentVariation,previous,move){if(this._parentVariation=parentVariation,this._previous=previous,this._next=void 0,this._position=new Position(void 0===previous?parentVariation.initialPosition():previous.position()),"--"===move){if(this._notation="--",!this._position.playNullMove())throw new exception.InvalidNotation(this._position,"--",i18n.ILLEGAL_NULL_MOVE)}else{var moveDescriptor=this._position.notation(move);this._notation=this._position.notation(moveDescriptor),this._position.play(moveDescriptor)}this._fullMoveNumber=void 0===previous?parentVariation.initialFullMoveNumber():previous._fullMoveNumber+("w"===previous.position().turn()?1:0),this._variations=[],this._nags={},this._tags={},this._comment=void 0,this._isLongComment=!1}function Variation(parent,isLongVariation){this._parent=parent,this._first=void 0,this._isLongVariation=isLongVariation,this._nags={},this._tags={},this._comment=void 0,this._isLongComment=!1}Game.prototype.playerName=function(color,value){if((color=bt.colorFromString(color))<0)throw new exception.IllegalArgument("Game#playerName()");if(1===arguments.length)return this._playerName[color];this._playerName[color]=value},Game.prototype.playerElo=function(color,value){if((color=bt.colorFromString(color))<0)throw new exception.IllegalArgument("Game#playerElo()");if(1===arguments.length)return this._playerElo[color];this._playerElo[color]=value},Game.prototype.playerTitle=function(color,value){if((color=bt.colorFromString(color))<0)throw new exception.IllegalArgument("Game#playerTitle()");if(1===arguments.length)return this._playerTitle[color];this._playerTitle[color]=value},Game.prototype.event=function(value){if(0===arguments.length)return this._event;this._event=value},Game.prototype.round=function(value){if(0===arguments.length)return this._round;this._round=value},Game.prototype.date=function(value){if(0===arguments.length)return this._date;if(null==value)this._date=void 0;else if(value instanceof Date)this._date=value;else if("object"==typeof value&&"number"==typeof value.year&&"number"==typeof value.month)this._date={year:value.year,month:value.month};else{if("object"!=typeof value||"number"!=typeof value.year||void 0!==value.month&&null!==value.month)throw new exception.IllegalArgument("Game#date()");this._date={year:value.year}}},Game.prototype.site=function(value){if(0===arguments.length)return this._site;this._site=value},Game.prototype.annotator=function(value){if(0===arguments.length)return this._annotator;this._annotator=value},Game.prototype.result=function(value){if(0===arguments.length)return bt.resultToString(this._result);var result=bt.resultFromString(value);if(result<0)throw new exception.IllegalArgument("Game#result()");this._result=result},Game.prototype.variant=function(){return this._initialPosition.variant()},Game.prototype.initialPosition=function(initialPosition,fullMoveNumber){if(0===arguments.length)return this._initialPosition;if(!(initialPosition instanceof Position))throw new exception.IllegalArgument("Game#initialPosition()");if(1===arguments.length)fullMoveNumber=1;else if("number"!=typeof fullMoveNumber)throw new exception.IllegalArgument("Game#initialPosition()");this._initialPosition=initialPosition,this._fullMoveNumber=fullMoveNumber,this._mainVariation=new Variation(this,!0)},Game.prototype.mainVariation=function(){return this._mainVariation},Node.prototype.notation=function(){return this._notation},Node.prototype.positionBefore=function(){return void 0===this._previous?this._parentVariation.initialPosition():this._previous.position()},Node.prototype.position=function(){return this._position},Node.prototype.fullMoveNumber=function(){return this._fullMoveNumber},Node.prototype.moveColor=function(){return this.positionBefore().turn()},Node.prototype.next=function(){return this._next},Node.prototype.variations=function(){return this._variations.slice(0)},Node.prototype.nags=function(){var res=[];for(var key in this._nags)this._nags[key]&&res.push(key);return res},Node.prototype.hasNag=function(nag){return!!this._nags[nag]},Node.prototype.addNag=function(nag){this._nags[nag]=!0},Node.prototype.removeNag=function(nag){delete this._nags[nag]},Node.prototype.tags=function(){var res=[];for(var key in this._tags)void 0!==this._tags[key]&&res.push(key);return res},Node.prototype.tag=function(tagKey,value){if(1===arguments.length)return this._tags[tagKey];this._tags[tagKey]=value},Node.prototype.comment=function(value,isLongComment){if(0===arguments.length)return this._comment;this._comment=value,this._isLongComment=!!isLongComment},Node.prototype.isLongComment=function(){return this._isLongComment&&this._parentVariation.isLongVariation()},Node.prototype.play=function(move){return this._next=new Node(this._parentVariation,this,move),this._next},Node.prototype.addVariation=function(isLongVariation){return this._variations.push(new Variation(this,isLongVariation)),this._variations[this._variations.length-1]},Variation.prototype.isLongVariation=function(){return this._isLongVariation&&(this._parent instanceof Game||this._parent._parentVariation.isLongVariation())},Variation.prototype.initialPosition=function(){return this._parent instanceof Game?this._parent.initialPosition():this._parent.positionBefore()},Variation.prototype.initialFullMoveNumber=function(){return this._parent._fullMoveNumber},Variation.prototype.first=function(){return this._first},Variation.prototype.nags=Node.prototype.nags,Variation.prototype.hasNag=Node.prototype.hasNag,Variation.prototype.addNag=Node.prototype.addNag,Variation.prototype.removeNag=Node.prototype.removeNag,Variation.prototype.tags=Node.prototype.tags,Variation.prototype.tag=Node.prototype.tag,Variation.prototype.comment=Node.prototype.comment,Variation.prototype.isLongComment=function(){return this._isLongComment&&this.isLongVariation()},Variation.prototype.play=function(move){return this._first=new Node(this,void 0,move),this._first}},{"./basetypes":42,"./exception":43,"./i18n":45,"./position":48}],45:[function(require,module,exports){"use strict";exports.ORDINALS=["1st","2nd","3rd","4th","5th","6th","7th","8th"],exports.WRONG_NUMBER_OF_FEN_FIELDS="A FEN string must contain exactly 6 space-separated fields.",exports.WRONG_NUMBER_OF_SUBFIELDS_IN_BOARD_FIELD="The 1st field of a FEN string must contain exactly 8 `/`-separated subfields.",exports.UNEXPECTED_CHARACTER_IN_BOARD_FIELD="Unexpected character in the 1st field of the FEN string: `%1$s`.",exports.UNEXPECTED_END_OF_SUBFIELD_IN_BOARD_FIELD="The %1$s subfield of the FEN string 1st field is unexpectedly short.",exports.INVALID_TURN_FIELD="The 2nd field of a FEN string must be either `w` or `b`.",exports.INVALID_CASTLING_FIELD="The 3rd field of a FEN string must be either `-` or a list of characters among `K`, `Q`, `k` and `q` (in this order).",exports.INVALID_EN_PASSANT_FIELD="The 4th field of a FEN string must be either `-` or a square from the 3rd or 6th rank where en-passant is allowed.",exports.WRONG_RANK_IN_EN_PASSANT_FIELD="The rank number indicated in the FEN string 4th field is inconsistent with respect to the 2nd field.",exports.INVALID_MOVE_COUNTING_FIELD="The %1$s field of a FEN string must be a number.",exports.INVALID_MOVE_NOTATION_SYNTAX="The syntax of the move notation is invalid.",exports.ILLEGAL_POSITION="The position is not legal.",exports.ILLEGAL_QUEEN_SIDE_CASTLING="Queen-side castling is not legal in the considered position.",exports.ILLEGAL_KING_SIDE_CASTLING="King-side castling is not legal in the considered position.",exports.NO_PIECE_CAN_MOVE_TO="No %1$s can move to %2$s.",exports.NO_PIECE_CAN_MOVE_TO_DISAMBIGUATION="No %1$s on the specified rank/file can move to %2$s.",exports.REQUIRE_DISAMBIGUATION="Cannot determine uniquely which %1$s is supposed to move to %2$s.",exports.WRONG_DISAMBIGUATION_SYMBOL="Wrong disambiguation symbol (expected: `%1$s`, observed: `%2$s`).",exports.TRYING_TO_CAPTURE_YOUR_OWN_PIECES="Capturing its own pieces is not legal.",exports.INVALID_CAPTURING_PAWN_MOVE="Invalid capturing pawn move.",exports.INVALID_NON_CAPTURING_PAWN_MOVE="Invalid non-capturing pawn move.",exports.NOT_SAFE_FOR_WHITE_KING="This move would put let the white king in check.",exports.NOT_SAFE_FOR_BLACK_KING="This move would put let the black king in check.",exports.MISSING_PROMOTION="A promoted piece must be specified for this move.",exports.MISSING_PROMOTION_SYMBOL="Character `=` is required to specify a promoted piece.",exports.INVALID_PROMOTED_PIECE="%1$s cannot be specified as a promoted piece.",exports.ILLEGAL_PROMOTION="Specifying a promoted piece is illegal for this move.",exports.ILLEGAL_NULL_MOVE="Cannot play a null-move in this position.",exports.MISSING_CAPTURE_SYMBOL="Capture symbol `x` is missing.",exports.INVALID_CAPTURE_SYMBOL="This move is not a capture move.",exports.WRONG_CHECK_CHECKMATE_SYMBOL="Wrong check/checkmate symbol (expected: `%1$s`, observed: `%2$s`).",exports.INVALID_PGN_TOKEN="Unrecognized character or group of characters.",exports.INVALID_MOVE_IN_PGN_TEXT="Invalid move (%1$s). %2$s",exports.INVALID_FEN_IN_PGN_TEXT="Invalid FEN string in the initial position header. %1$s",exports.UNEXPECTED_PGN_HEADER="Unexpected PGN game header.",exports.UNEXPECTED_BEGIN_OF_VARIATION="Unexpected begin of variation.",exports.UNEXPECTED_END_OF_VARIATION="Unexpected end of variation.",exports.UNEXPECTED_END_OF_GAME="Unexpected end of game: there are pending variations.",exports.UNEXPECTED_END_OF_TEXT="Unexpected end of text: there is a pending game.",exports.INVALID_GAME_INDEX="Game index %1$s is invalid (only %2$s game(s) found in the PGN data).",exports.UNKNOWN_VARIANT="Unknown chess game variant (%1$s)."},{}],46:[function(require,module,exports){"use strict";var bt=require("./basetypes"),exception=require("./exception");function MoveDescriptor(flags,from,to,movingPiece,finalPiece,optionalPiece,optionalSquare1,optionalSquare2){this._type=flags,this._from=from,this._to=to,this._movingPiece=movingPiece,this._finalPiece=finalPiece,this._optionalPiece=optionalPiece,this._optionalSquare1=optionalSquare1,this._optionalSquare2=optionalSquare2}exports.make=function(from,to,color,movingPiece,capturedPiece){var movingColoredPiece=2*movingPiece+color;return new MoveDescriptor(0<=capturedPiece?4:0,from,to,movingColoredPiece,movingColoredPiece,capturedPiece,-1,-1)},exports.makeCastling=function(from,to,rookFrom,rookTo,color){var movingKing=2*bt.KING+color;return new MoveDescriptor(1,from,to,movingKing,movingKing,2*bt.ROOK+color,rookFrom,rookTo)},exports.makeEnPassant=function(from,to,enPassantSquare,color){var movingPawn=2*bt.PAWN+color;return new MoveDescriptor(6,from,to,movingPawn,movingPawn,2*bt.PAWN+1-color,enPassantSquare,-1)},exports.makePromotion=function(from,to,color,promotion,capturedPiece){return new MoveDescriptor(8|(0<=capturedPiece?4:0),from,to,2*bt.PAWN+color,2*promotion+color,capturedPiece,-1,-1)},exports.isMoveDescriptor=function(obj){return obj instanceof MoveDescriptor},MoveDescriptor.prototype.toString=function(){var result=bt.squareToString(this._from)+bt.squareToString(this._to);return this.isPromotion()?result+=this.promotion().toUpperCase():this.isCastling()&&(result+="O"),result},MoveDescriptor.prototype.isCastling=function(){return 0!=(1&this._type)},MoveDescriptor.prototype.isEnPassant=function(){return 0!=(2&this._type)},MoveDescriptor.prototype.isCapture=function(){return 0!=(4&this._type)},MoveDescriptor.prototype.isPromotion=function(){return 0!=(8&this._type)},MoveDescriptor.prototype.from=function(){return bt.squareToString(this._from)},MoveDescriptor.prototype.to=function(){return bt.squareToString(this._to)},MoveDescriptor.prototype.color=function(){return bt.colorToString(this._movingPiece%2)},MoveDescriptor.prototype.movingPiece=function(){return bt.pieceToString(Math.floor(this._movingPiece/2))},MoveDescriptor.prototype.movingColoredPiece=function(){return bt.coloredPieceToString(this._movingPiece)},MoveDescriptor.prototype.capturedPiece=function(){if(!this.isCapture())throw new exception.IllegalArgument("MoveDescriptor#capturedPiece()");return bt.pieceToString(Math.floor(this._optionalPiece/2))},MoveDescriptor.prototype.capturedColoredPiece=function(){if(!this.isCapture())throw new exception.IllegalArgument("MoveDescriptor#capturedColoredPiece()");return bt.coloredPieceToString(this._optionalPiece)},MoveDescriptor.prototype.rookFrom=function(){if(!this.isCastling())throw new exception.IllegalArgument("MoveDescriptor#rookFrom()");return bt.squareToString(this._optionalSquare1)},MoveDescriptor.prototype.rookTo=function(){if(!this.isCastling())throw new exception.IllegalArgument("MoveDescriptor#rookTo()");return bt.squareToString(this._optionalSquare2)},MoveDescriptor.prototype.enPassantSquare=function(){if(!this.isEnPassant())throw new exception.IllegalArgument("MoveDescriptor#enPassantSquare()");return bt.squareToString(this._optionalSquare1)},MoveDescriptor.prototype.promotion=function(){if(!this.isPromotion())throw new exception.IllegalArgument("MoveDescriptor#promotion()");return bt.pieceToString(Math.floor(this._finalPiece/2))},MoveDescriptor.prototype.coloredPromotion=function(){if(!this.isPromotion())throw new exception.IllegalArgument("MoveDescriptor#coloredPromotion()");return bt.coloredPieceToString(this._finalPiece)}},{"./basetypes":42,"./exception":43}],47:[function(require,module,exports){"use strict";var exception=require("./exception"),i18n=require("./i18n"),Position=require("./position").Position,Game=require("./game").Game,SPECIAL_NAGS_LOOKUP={"!!":3,"!":1,"!?":5,"?!":6,"?":2,"??":4,"+-":18,"+/-":16,"+/=":14,"+=":14,"=":10,"~":13,inf:13,"=/+":15,"=+":15,"-/+":17,"-+":19};var TOKEN_HEADER=1,TOKEN_MOVE=2,TOKEN_NAG=3,TOKEN_COMMENT=4,TOKEN_BEGIN_VARIATION=5,TOKEN_END_VARIATION=6,TOKEN_END_OF_GAME=7;function TokenStream(pgnString){this.text=pgnString,this._pos=0,this.emptyLineFound=!1,this.token=0,this.tokenValue=null,this.tokenPos=0}function parseNullableHeader(value){return"?"===value?void 0:value}function processHeader(stream,game,initialPositionFactory,key,value){switch(value=value.trim(),key){case"White":game.playerName("w",parseNullableHeader(value));break;case"Black":game.playerName("b",parseNullableHeader(value));break;case"WhiteElo":game.playerElo("w",value);break;case"BlackElo":game.playerElo("b",value);break;case"WhiteTitle":game.playerTitle("w",value);break;case"BlackTitle":game.playerTitle("b",value);break;case"Event":game.event(parseNullableHeader(value));break;case"Round":game.round(parseNullableHeader(value));break;case"Date":game.date(function(value){if(/^([0-9]{4})\.([0-9]{2})\.([0-9]{2})$/.test(value)){var year=RegExp.$1,month=RegExp.$2,day=RegExp.$3;if(year=parseInt(year,10),month=parseInt(month,10),day=parseInt(day,10),1<=month&&month<=12&&1<=day&&day<=31)return new Date(year,month-1,day)}else if(/^([0-9]{4})\.([0-9]{2})\.\?\?$/.test(value)){if(year=RegExp.$1,1<=(month=parseInt(RegExp.$2,10))&&month<=12)return{year:parseInt(year,10),month:month}}else if(/^([0-9]{4})(?:\.\?\?\.\?\?)?$/.test(value))return{year:parseInt(RegExp.$1,10)}}(value));break;case"Site":game.site(parseNullableHeader(value));break;case"Annotator":game.annotator(value);break;case"FEN":initialPositionFactory.fen=value,initialPositionFactory.fenTokenPos=stream.tokenPos;break;case"Variant":if("chess960"!==value.toLowerCase()&&"fischerandom"!==value.toLowerCase())throw new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.UNKNOWN_VARIANT,value);initialPositionFactory.variant="chess960"}}function initializeInitialPosition(stream,game,initialPositionFactory){if(initialPositionFactory.fen)try{var position=new Position(initialPositionFactory.variant?initialPositionFactory.variant:"regular","empty"),moveCounters=position.fen(initialPositionFactory.fen);game.initialPosition(position,moveCounters.fullMoveNumber)}catch(error){throw error instanceof exception.InvalidFEN?new exception.InvalidPGN(stream.text,initialPositionFactory.fenTokenPos,i18n.INVALID_FEN_IN_PGN_TEXT,error.message):error}}function doParseGame(stream){for(var game=null,node=null,nodeIsVariation=!1,nodeStack=[],initialPositionFactory={};stream.consumeToken();)switch(null===game&&(game=new Game),stream.token!==TOKEN_HEADER&&null===node&&(initializeInitialPosition(stream,game,initialPositionFactory),node=game.mainVariation(),nodeIsVariation=!0),stream.token){case TOKEN_HEADER:if(null!==node)throw new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.UNEXPECTED_PGN_HEADER);processHeader(stream,game,initialPositionFactory,stream.tokenValue.key,stream.tokenValue.value);break;case TOKEN_MOVE:try{node=node.play(stream.tokenValue),nodeIsVariation=!1}catch(error){throw error instanceof exception.InvalidNotation?new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.INVALID_MOVE_IN_PGN_TEXT,error.notation,error.message):error}break;case TOKEN_NAG:node.addNag(stream.tokenValue);break;case TOKEN_COMMENT:for(var key in stream.tokenValue.tags)void 0!==stream.tokenValue.tags[key]&&node.tag(key,stream.tokenValue.tags[key]);node.comment(stream.tokenValue.comment,stream.emptyLineFound);break;case TOKEN_BEGIN_VARIATION:if(nodeIsVariation)throw new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.UNEXPECTED_BEGIN_OF_VARIATION);nodeStack.push(node),node=node.addVariation(stream.emptyLineFound),nodeIsVariation=!0;break;case TOKEN_END_VARIATION:if(0===nodeStack.length)throw new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.UNEXPECTED_END_OF_VARIATION);node=nodeStack.pop(),nodeIsVariation=!1;break;case TOKEN_END_OF_GAME:if(0<nodeStack.length)throw new exception.InvalidPGN(stream.text,stream.tokenPos,i18n.UNEXPECTED_END_OF_GAME);return game.result(stream.tokenValue),game}if(null!==game)throw new exception.InvalidPGN(stream.text,stream.text.length,i18n.UNEXPECTED_END_OF_TEXT);return null}function doSkipGame(stream){for(;stream.consumeToken();)switch(stream.token){case TOKEN_END_OF_GAME:return!0}return!1}TokenStream.prototype._skipBlanks=function(){for(var newLineCount=0;this._pos<this.text.length;){var s=this.text.substr(this._pos);if(/^([ \f\t\v])+/.test(s))this._pos+=RegExp.$1.length;else{if(!/^(\r?\n|\r)/.test(s))break;this._pos+=RegExp.$1.length,++newLineCount}}this.emptyLineFound=2<=newLineCount},TokenStream.prototype.consumeToken=function(){if(this._skipBlanks(),this._pos>=this.text.length)return!1;var rawHeaderValue,s=this.text.substr(this._pos);if(this.tokenPos=this._pos,/^(\[\s*(\w+)\s+\"((?:[^\\"\[\]]|\\[\\"\[\]])*)\"\s*\])/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_HEADER,this.tokenValue={key:RegExp.$2,value:(rawHeaderValue=RegExp.$3,rawHeaderValue.replace(/\\([\\"\[\]])/g,"$1"))};else if(/^((?:[1-9][0-9]*\s*\.(?:\.\.)?\s*)?((?:O-O-O|O-O|[KQRBN][a-h]?[1-8]?x?[a-h][1-8]|(?:[a-h]x?)?[a-h][1-8](?:=?[KQRBNP])?)[\+#]?|--))/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_MOVE,this.tokenValue=RegExp.$2;else if(/^(([!\?][!\?]?|\+\/?[\-=]|[\-=]\/?\+|=|inf|~)|\$([1-9][0-9]*))/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_NAG,this.tokenValue=0===RegExp.$3.length?SPECIAL_NAGS_LOOKUP[RegExp.$2]:parseInt(RegExp.$3,10);else if(/^(\{((?:[^\{\}\\]|\\[\{\}\\])*)\})/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_COMMENT,this.tokenValue=function(rawComment){rawComment=rawComment.replace(/\\([\{\}\\])/g,"$1");var tags={},comment=rawComment.replace(/\[%([a-zA-Z]+) ([^\[\]]+)\]/g,function(match,p1,p2){return tags[p1]=p2," "});return""===(comment=comment.replace(/^\s+|\s+$/g,"").replace(/\s+/g," "))&&(comment=void 0),{comment:comment,tags:tags}}(RegExp.$2);else if(/^(\()/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_BEGIN_VARIATION,this.tokenValue=null;else if(/^(\))/.test(s))this._pos+=RegExp.$1.length,this.token=TOKEN_END_VARIATION,this.tokenValue=null;else{if(!/^(1\-0|0\-1|1\/2\-1\/2|\*)/.test(s))throw new exception.InvalidPGN(this.text,this._pos,i18n.INVALID_PGN_TOKEN);this._pos+=RegExp.$1.length,this.token=TOKEN_END_OF_GAME,this.tokenValue=RegExp.$1}return!0},exports.pgnRead=function(pgnString,gameIndex){var stream=new TokenStream(pgnString);if(1!==arguments.length){for(var gameCounter=0;gameCounter<gameIndex;){if(!doSkipGame(stream))throw new exception.InvalidPGN(pgnString,-1,i18n.INVALID_GAME_INDEX,gameIndex,gameCounter);++gameCounter}if(null===(result=doParseGame(stream)))throw new exception.InvalidPGN(pgnString,-1,i18n.INVALID_GAME_INDEX,gameIndex,gameCounter);return result}for(var result=[];;){var currentGame=doParseGame(stream);if(null===currentGame)return result;result.push(currentGame)}}},{"./exception":43,"./game":44,"./i18n":45,"./position":48}],48:[function(require,module,exports){"use strict";var bt=require("./basetypes"),moveDescriptor=require("./movedescriptor"),exception=require("./exception"),impl=require("./private_position/impl"),fen=require("./private_position/fen"),attacks=require("./private_position/attacks"),legality=require("./private_position/legality"),moveGeneration=require("./private_position/movegeneration"),notation=require("./private_position/notation"),Position=exports.Position=function(){if(arguments[0]instanceof Position)this._impl=impl.makeCopy(arguments[0]._impl);else if(0===arguments.length||"start"===arguments[0]||"regular"===arguments[0]&&(1===arguments.length||"start"===arguments[1]))this._impl=impl.makeInitial();else if("empty"===arguments[0]||"regular"===arguments[0]&&"empty"===arguments[1])this._impl=impl.makeEmpty(bt.REGULAR_CHESS);else if("chess960"===arguments[0]&&"empty"===arguments[1])this._impl=impl.makeEmpty(bt.CHESS_960);else if("chess960"===arguments[0]&&"number"==typeof arguments[1]&&0<=arguments[1]&&arguments[1]<=959)this._impl=impl.make960FromScharnagl(arguments[1]);else if("regular"===arguments[0]||"chess960"===arguments[0]){if("string"!=typeof arguments[1])throw new exception.IllegalArgument("Position()");this._impl=fen.parseFEN(bt.variantFromString(arguments[0]),arguments[1],!1).position}else{if("string"!=typeof arguments[0])throw new exception.IllegalArgument("Position()");this._impl=fen.parseFEN(bt.REGULAR_CHESS,arguments[0],!1).position}};function makeFactory(status,factory){return factory.status=status,factory}Position.prototype.clear=function(variant){if(0===arguments.length)this._impl=impl.makeEmpty(bt.REGULAR_CHESS);else{var v=bt.variantFromString(variant);if(v<0)throw new exception.IllegalArgument("Position#clear()");this._impl=impl.makeEmpty(v)}},Position.prototype.reset=function(){this._impl=impl.makeInitial()},Position.prototype.reset960=function(scharnaglCode){this._impl=impl.make960FromScharnagl(scharnaglCode)},Position.prototype.ascii=function(){return fen.ascii(this._impl)},Position.prototype.fen=function(){if(0===arguments.length)return fen.getFEN(this._impl,0,1);if(1===arguments.length&&"object"==typeof arguments[0]){var fiftyMoveClock="number"==typeof arguments[0].fiftyMoveClock?arguments[0].fiftyMoveClock:0,fullMoveNumber="number"==typeof arguments[0].fullMoveNumber?arguments[0].fullMoveNumber:1;return fen.getFEN(this._impl,fiftyMoveClock,fullMoveNumber)}if(1===arguments.length&&"string"==typeof arguments[0]){var result=fen.parseFEN(this._impl.variant,arguments[0],!1);return this._impl=result.position,{fiftyMoveClock:result.fiftyMoveClock,fullMoveNumber:result.fullMoveNumber}}if(2<=arguments.length&&"string"==typeof arguments[0]&&"boolean"==typeof arguments[1]){result=fen.parseFEN(this._impl.variant,arguments[0],arguments[1]);return this._impl=result.position,{fiftyMoveClock:result.fiftyMoveClock,fullMoveNumber:result.fullMoveNumber}}throw new exception.IllegalArgument("Position#fen()")},Position.prototype.variant=function(){return bt.variantToString(this._impl.variant)},Position.prototype.square=function(square,value){if((square=bt.squareFromString(square))<0)throw new exception.IllegalArgument("Position#square()");if(1===arguments.length)return(cp=this._impl.board[square])<0?"-":bt.coloredPieceToString(cp);if("-"===value)this._impl.board[square]=bt.EMPTY,this._impl.legal=null;else{var cp;if((cp=bt.coloredPieceFromString(value))<0)throw new exception.IllegalArgument("Position#square()");this._impl.board[square]=cp,this._impl.legal=null}},Position.prototype.turn=function(value){if(0===arguments.length)return bt.colorToString(this._impl.turn);var turn=bt.colorFromString(value);if(turn<0)throw new exception.IllegalArgument("Position#turn()");this._impl.turn=turn,this._impl.legal=null},Position.prototype.castling=function(castle,value){if(this._impl.variant===bt.REGULAR_CHESS&&!/^[wb][qk]$/.test(castle)||this._impl.variant===bt.CHESS_960&&!/^[wb][a-h]$/.test(castle))throw new exception.IllegalArgument("Position#castling()");var color=bt.colorFromString(castle[0]),file=this._impl.variant===bt.REGULAR_CHESS?"k"===castle[1]?7:0:bt.fileFromString(castle[1]);if(1===arguments.length)return 0!=(this._impl.castling[color]&1<<file);value?this._impl.castling[color]|=1<<file:this._impl.castling[color]&=~(1<<file),this._impl.legal=null},Position.prototype.enPassant=function(value){if(0===arguments.length)return this._impl.enPassant<0?"-":bt.fileToString(this._impl.enPassant);if("-"===value)this._impl.enPassant=-1,this._impl.legal=null;else{var enPassant=bt.fileFromString(value);if(enPassant<0)throw new exception.IllegalArgument("Position#enPassant()");this._impl.enPassant=enPassant,this._impl.legal=null}},Position.prototype.isAttacked=function(square,byWho){if(square=bt.squareFromString(square),byWho=bt.colorFromString(byWho),square<0||byWho<0)throw new exception.IllegalArgument("Position#isAttacked()");return attacks.isAttacked(this._impl,square,byWho)},Position.prototype.getAttacks=function(square,byWho){if(square=bt.squareFromString(square),byWho=bt.colorFromString(byWho),square<0||byWho<0)throw new exception.IllegalArgument("Position#getAttacks()");return attacks.getAttacks(this._impl,square,byWho).map(bt.squareToString)},Position.prototype.isLegal=function(){return legality.isLegal(this._impl)},Position.prototype.kingSquare=function(color){if((color=bt.colorFromString(color))<0)throw new exception.IllegalArgument("Position#kingSquare()");legality.refreshLegalFlagAndKingSquares(this._impl);var square=this._impl.king[color];return!(square<0)&&bt.squareToString(square)},Position.prototype.isCheck=function(){return moveGeneration.isCheck(this._impl)},Position.prototype.isCheckmate=function(){return moveGeneration.isCheckmate(this._impl)},Position.prototype.isStalemate=function(){return moveGeneration.isStalemate(this._impl)},Position.prototype.hasMove=function(){return moveGeneration.hasMove(this._impl)},Position.prototype.moves=function(){return moveGeneration.moves(this._impl)},Position.prototype.isMoveLegal=function(from,to){if(from=bt.squareFromString(from),to=bt.squareFromString(to),from<0||to<0)throw new exception.IllegalArgument("Position#isMoveLegal()");var result=moveGeneration.isMoveLegal(this._impl,from,to);if(!result)return!1;if(moveDescriptor.isMoveDescriptor(result))return makeFactory("regular",function(){return result});switch(result.type){case"promotion":return makeFactory("promotion",function(promotion){if(0<=(promotion=bt.pieceFromString(promotion))){var builtMoveDescriptor=result.build(promotion);if(builtMoveDescriptor)return builtMoveDescriptor}throw new exception.IllegalArgument("Position#isMoveLegal()")});case"castle960":return makeFactory("castle960",function(type){switch(type){case"king":return result.build(!1);case"castle":return result.build(!0);default:throw new exception.IllegalArgument("Position#isMoveLegal()")}});default:throw new exception.IllegalArgument("Position#isMoveLegal()")}},Position.prototype.play=function(move){if("string"!=typeof move){if(moveDescriptor.isMoveDescriptor(move))return moveGeneration.play(this._impl,move),!0;throw new exception.IllegalArgument("Position#play()")}try{return moveGeneration.play(this._impl,notation.parseNotation(this._impl,move,!1)),!0}catch(err){if(err instanceof exception.InvalidNotation)return!1;throw err}},Position.prototype.isNullMoveLegal=function(){return moveGeneration.isNullMoveLegal(this._impl)},Position.prototype.playNullMove=function(){return moveGeneration.playNullMove(this._impl)},Position.prototype.notation=function(){if(1===arguments.length&&moveDescriptor.isMoveDescriptor(arguments[0]))return notation.getNotation(this._impl,arguments[0]);if(1===arguments.length&&"string"==typeof arguments[0])return notation.parseNotation(this._impl,arguments[0],!1);if(2<=arguments.length&&"string"==typeof arguments[0]&&"boolean"==typeof arguments[1])return notation.parseNotation(this._impl,arguments[0],arguments[1]);throw new exception.IllegalArgument("Position#notation()")}},{"./basetypes":42,"./exception":43,"./movedescriptor":46,"./private_position/attacks":49,"./private_position/fen":50,"./private_position/impl":51,"./private_position/legality":52,"./private_position/movegeneration":53,"./private_position/notation":54}],49:[function(require,module,exports){"use strict";var bt=require("../basetypes"),ATTACK_DIRECTIONS=exports.ATTACK_DIRECTIONS=[[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-17,-16,-15,-1,1,15,16,17],[-16,-1,1,16],[-16,-1,1,16],[-17,-15,15,17],[-17,-15,15,17],[-33,-31,-18,-14,14,18,31,33],[-33,-31,-18,-14,14,18,31,33],[15,17],[-17,-15]];function isAttackedByNonSliding(position,square,nonSlidingAttacker){for(var directions=ATTACK_DIRECTIONS[nonSlidingAttacker],i=0;i<directions.length;++i){var sq=square-directions[i];if(0==(136&sq)&&position.board[sq]===nonSlidingAttacker)return!0}return!1}function isAttackedBySliding(position,square,slidingAttacker,queenAttacker){for(var directions=ATTACK_DIRECTIONS[slidingAttacker],i=0;i<directions.length;++i)for(var sq=square;;){if(0==(136&(sq-=directions[i]))){var cp=position.board[sq];if(cp===bt.EMPTY)continue;if(cp===slidingAttacker||cp===queenAttacker)return!0}break}return!1}function findNonSlidingAttacks(position,square,result,nonSlidingAttacker){for(var directions=ATTACK_DIRECTIONS[nonSlidingAttacker],i=0;i<directions.length;++i){var sq=square-directions[i];0==(136&sq)&&position.board[sq]===nonSlidingAttacker&&result.push(sq)}}function findSlidingAttacks(position,square,result,slidingAttacker,queenAttacker){for(var directions=ATTACK_DIRECTIONS[slidingAttacker],i=0;i<directions.length;++i)for(var sq=square;;){if(0==(136&(sq-=directions[i]))){var cp=position.board[sq];if(cp===bt.EMPTY)continue;cp!==slidingAttacker&&cp!==queenAttacker||result.push(sq)}break}}exports.isAttacked=function(position,square,attackerColor){return isAttackedByNonSliding(position,square,2*bt.KING+attackerColor)||isAttackedByNonSliding(position,square,2*bt.KNIGHT+attackerColor)||isAttackedByNonSliding(position,square,2*bt.PAWN+attackerColor)||isAttackedBySliding(position,square,2*bt.ROOK+attackerColor,2*bt.QUEEN+attackerColor)||isAttackedBySliding(position,square,2*bt.BISHOP+attackerColor,2*bt.QUEEN+attackerColor)},exports.getAttacks=function(position,square,attackerColor){var result=[];return findNonSlidingAttacks(position,square,result,2*bt.KING+attackerColor),findNonSlidingAttacks(position,square,result,2*bt.KNIGHT+attackerColor),findNonSlidingAttacks(position,square,result,2*bt.PAWN+attackerColor),findSlidingAttacks(position,square,result,2*bt.ROOK+attackerColor,2*bt.QUEEN+attackerColor),findSlidingAttacks(position,square,result,2*bt.BISHOP+attackerColor,2*bt.QUEEN+attackerColor),result}},{"../basetypes":42}],50:[function(require,module,exports){"use strict";var bt=require("../basetypes"),exception=require("../exception"),i18n=require("../i18n"),impl=require("./impl");function castlingToString(position){if(position.variant===bt.CHESS_960){for(var whiteFlags="",blackFlags="",file=0;file<8;++file)position.castling[bt.WHITE]&1<<file&&(whiteFlags+=bt.fileToString(file)),position.castling[bt.BLACK]&1<<file&&(blackFlags+=bt.fileToString(file));return""===whiteFlags&&""===blackFlags?"-":whiteFlags.toUpperCase()+blackFlags}var result="";return 128&position.castling[bt.WHITE]&&(result+="K"),1&position.castling[bt.WHITE]&&(result+="Q"),128&position.castling[bt.BLACK]&&(result+="k"),1&position.castling[bt.BLACK]&&(result+="q"),""===result?"-":result}function enPassantToString(position){return position.enPassant<0?"-":bt.fileToString(position.enPassant)+(position.turn===bt.WHITE?"6":"3")}exports.ascii=function(position){for(var result="+---+---+---+---+---+---+---+---+\n",r=7;0<=r;--r){for(var f=0;f<8;++f){var cp=position.board[16*r+f];result+="| "+(cp<0?" ":"KkQqRrBbNnPp"[cp])+" "}result+="|\n",result+="+---+---+---+---+---+---+---+---+\n"}return result+=bt.colorToString(position.turn)+" "+castlingToString(position)+" "+enPassantToString(position),position.variant!==bt.REGULAR_CHESS&&(result+=" ("+bt.variantToString(position.variant)+")"),result},exports.getFEN=function(position,fiftyMoveClock,fullMoveNumber){for(var result="",r=7;0<=r;--r){for(var emptyCount=0,f=0;f<8;++f){var cp=position.board[16*r+f];cp<0?++emptyCount:(0<emptyCount&&(result+=emptyCount,emptyCount=0),result+="KkQqRrBbNnPp"[cp])}0<emptyCount&&(result+=emptyCount),0<r&&(result+="/")}return result+=" "+bt.colorToString(position.turn)+" "+castlingToString(position)+" "+enPassantToString(position),result+=" "+fiftyMoveClock+" "+fullMoveNumber},exports.parseFEN=function(variant,fen,strict){var fields=(fen=fen.replace(/^\s+|\s+$/g,"")).split(/\s+/);if(6!==fields.length)throw new exception.InvalidFEN(fen,i18n.WRONG_NUMBER_OF_FEN_FIELDS);var rankFields=fields[0].split("/");if(8!==rankFields.length)throw new exception.InvalidFEN(fen,i18n.WRONG_NUMBER_OF_SUBFIELDS_IN_BOARD_FIELD);var position=impl.makeEmpty(variant);position.legal=null;for(var r=7;0<=r;--r){for(var rankField=rankFields[7-r],i=0,f=0;i<rankField.length&&f<8;){var s=rankField[i],cp="KkQqRrBbNnPp".indexOf(s);if(/^[1-8]$/.test(s))f+=parseInt(s,10);else{if(!(0<=cp))throw new exception.InvalidFEN(fen,i18n.UNEXPECTED_CHARACTER_IN_BOARD_FIELD,s);position.board[16*r+f]=cp,++f}++i}if(i!==rankField.length||8!==f)throw new exception.InvalidFEN(fen,i18n.UNEXPECTED_END_OF_SUBFIELD_IN_BOARD_FIELD,i18n.ORDINALS[7-r])}if(position.turn=bt.colorFromString(fields[1]),position.turn<0)throw new exception.InvalidFEN(fen,i18n.INVALID_TURN_FIELD);if(position.castling=variant===bt.CHESS_960?function(castling,strict,board){var result=[0,0];if("-"===castling)return result;if(!(strict?/^[A-H]{0,2}[a-h]{0,2}$/:/^[A-Ha-hKQkq]*$/).test(castling))return null;function searchQueenSideRook(color){for(var rookFile=-1,targetRook=2*bt.ROOK+color,targetKing=2*bt.KING+color,sq=112*color;sq<112*color+8;++sq)if(board[sq]===targetRook){if(0<=rookFile)break;rookFile=sq%8}else if(board[sq]===targetKing){if(rookFile<0)break;return result[color]|=1<<rookFile,!0}return!1}function searchKingSideRook(color){for(var rookFile=-1,targetRook=2*bt.ROOK+color,targetKing=2*bt.KING+color,sq=112*color+7;112*color<=sq;--sq)if(board[sq]===targetRook){if(0<=rookFile)break;rookFile=sq%8}else if(board[sq]===targetKing){if(rookFile<0)break;return result[color]|=1<<rookFile,!0}return!1}if(0<=castling.indexOf("K")&&!searchKingSideRook(bt.WHITE))return null;if(0<=castling.indexOf("Q")&&!searchQueenSideRook(bt.WHITE))return null;if(0<=castling.indexOf("k")&&!searchKingSideRook(bt.BLACK))return null;if(0<=castling.indexOf("q")&&!searchQueenSideRook(bt.BLACK))return null;for(var file=0;file<8;++file){var s=bt.fileToString(file);0<=castling.indexOf(s.toUpperCase())&&(result[bt.WHITE]|=1<<file),0<=castling.indexOf(s)&&(result[bt.BLACK]|=1<<file)}return result}(fields[2],strict,position.board):function(castling,strict){var res=[0,0];if("-"===castling)return res;if(!(strict?/^K?Q?k?q?$/:/^[KQkq]*$/).test(castling))return null;0<=castling.indexOf("K")&&(res[bt.WHITE]|=128);0<=castling.indexOf("Q")&&(res[bt.WHITE]|=1);0<=castling.indexOf("k")&&(res[bt.BLACK]|=128);0<=castling.indexOf("q")&&(res[bt.BLACK]|=1);return res}(fields[2],strict),null===position.castling)throw new exception.InvalidFEN(fen,i18n.INVALID_CASTLING_FIELD);var enPassantField=fields[3];if("-"!==enPassantField){if(!/^[a-h][36]$/.test(enPassantField))throw new exception.InvalidFEN(fen,i18n.INVALID_EN_PASSANT_FIELD);if(strict&&("3"===enPassantField[1]&&position.turn===bt.WHITE||"6"===enPassantField[1]&&position.turn===bt.BLACK))throw new exception.InvalidFEN(fen,i18n.WRONG_RANK_IN_EN_PASSANT_FIELD);position.enPassant=bt.fileFromString(enPassantField[0])}var moveCountingRegExp=strict?/^(?:0|[1-9][0-9]*)$/:/^[0-9]+$/;if(!moveCountingRegExp.test(fields[4]))throw new exception.InvalidFEN(fen,i18n.INVALID_MOVE_COUNTING_FIELD,i18n.ORDINALS[4]);if(!moveCountingRegExp.test(fields[5]))throw new exception.InvalidFEN(fen,i18n.INVALID_MOVE_COUNTING_FIELD,i18n.ORDINALS[5]);return{position:position,fiftyMoveClock:parseInt(fields[4],10),fullMoveNumber:parseInt(fields[5],10)}}},{"../basetypes":42,"../exception":43,"../i18n":45,"./impl":51}],51:[function(require,module,exports){"use strict";var bt=require("../basetypes"),EMPTY=bt.EMPTY,INVALID=bt.INVALID;exports.makeEmpty=function(variant){return{board:[EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY],turn:bt.WHITE,castling:[0,0],enPassant:-1,variant:variant,legal:!1,king:[-1,-1]}},exports.makeInitial=function(){return{board:[bt.WR,bt.WN,bt.WB,bt.WQ,bt.WK,bt.WB,bt.WN,bt.WR,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,bt.BR,bt.BN,bt.BB,bt.BQ,bt.BK,bt.BB,bt.BN,bt.BR],turn:bt.WHITE,castling:[129,129],enPassant:-1,variant:bt.REGULAR_CHESS,legal:!0,king:[4,116]}},exports.make960FromScharnagl=function(scharnaglCode){var info=function(scharnaglCode){var scheme=[-1,-1,-1,-1,-1,-1,-1,-1],castling=0,kingFile=-1;function forEachEmpty(fun){for(var emptyIndex=0,file=0;file<8;++file)0<=scheme[file]||(fun(file,emptyIndex),++emptyIndex)}function setAt(piece,target1,target2){forEachEmpty(function(file,emptyIndex){emptyIndex!==target1&&emptyIndex!==target2||(scheme[file]=piece)})}switch(scheme[scharnaglCode%4*2+1]=bt.BISHOP,scharnaglCode=Math.floor(scharnaglCode/4),scheme[scharnaglCode%4*2]=bt.BISHOP,scharnaglCode=Math.floor(scharnaglCode/4),setAt(bt.QUEEN,scharnaglCode%6,-1),scharnaglCode=Math.floor(scharnaglCode/6)){case 0:setAt(bt.KNIGHT,0,1);break;case 1:setAt(bt.KNIGHT,0,2);break;case 2:setAt(bt.KNIGHT,0,3);break;case 3:setAt(bt.KNIGHT,0,4);break;case 4:setAt(bt.KNIGHT,1,2);break;case 5:setAt(bt.KNIGHT,1,3);break;case 6:setAt(bt.KNIGHT,1,4);break;case 7:setAt(bt.KNIGHT,2,3);break;case 8:setAt(bt.KNIGHT,2,4);break;case 9:setAt(bt.KNIGHT,3,4)}return forEachEmpty(function(file,emptyIndex){1===emptyIndex?(scheme[file]=bt.KING,kingFile=file):(scheme[file]=bt.ROOK,castling|=1<<file)}),{scheme:scheme,castling:castling,kingFile:kingFile}}(scharnaglCode),r1=info.scheme.map(function(piece){return 2*piece+bt.WHITE}),r8=info.scheme.map(function(piece){return 2*piece+bt.BLACK});return{board:[r1[0],r1[1],r1[2],r1[3],r1[4],r1[5],r1[6],r1[7],INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,bt.WP,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,EMPTY,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,bt.BP,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,INVALID,r8[0],r8[1],r8[2],r8[3],r8[4],r8[5],r8[6],r8[7]],turn:bt.WHITE,castling:[info.castling,info.castling],enPassant:-1,variant:bt.CHESS_960,legal:!0,king:[info.kingFile,112+info.kingFile]}},exports.makeCopy=function(position){return{board:position.board.slice(),turn:position.turn,castling:position.castling.slice(),enPassant:position.enPassant,variant:position.variant,legal:position.legal,king:position.king.slice()}}},{"../basetypes":42}],52:[function(require,module,exports){"use strict";var bt=require("../basetypes"),attacks=require("./attacks");exports.isLegal=function(position){return refreshLegalFlagAndKingSquares(position),position.legal};var refreshLegalFlagAndKingSquares=exports.refreshLegalFlagAndKingSquares=function(position){if(null===position.legal&&(position.legal=!1,refreshKingSquare(position,bt.WHITE),refreshKingSquare(position,bt.BLACK),!(position.king[bt.WHITE]<0||position.king[bt.BLACK]<0||attacks.isAttacked(position,position.king[1-position.turn],position.turn)))){for(var c=0;c<8;++c){var cp1=position.board[c],cp8=position.board[112+c];if(cp1===bt.WP||cp8===bt.WP||cp1===bt.BP||cp8===bt.BP)return}for(var isCastlingFlagLegalFun=position.variant===bt.CHESS_960?isCastlingFlagLegalForChess960:isCastlingFlagLegalForRegularChess,color=0;color<2;++color)if(!isCastlingFlagLegalFun(position,color))return;if(0<=position.enPassant){var square2=16*(6-5*position.turn)+position.enPassant,square3=16*(5-3*position.turn)+position.enPassant,square4=16*(4-position.turn)+position.enPassant;if(position.board[square2]!==bt.EMPTY||position.board[square3]!==bt.EMPTY||position.board[square4]!==2*bt.PAWN+1-position.turn)return}position.legal=!0}};function refreshKingSquare(position,color){var target=2*bt.KING+color;position.king[color]=-1;for(var sq=0;sq<120;sq+=7==(7&sq)?9:1)if(position.board[sq]===target){if(!(position.king[color]<0))return void(position.king[color]=-1);position.king[color]=sq}}function isCastlingFlagLegalForRegularChess(position,color){var skipOO=0==(128&position.castling[color]),skipOOO=0==(1&position.castling[color]),rookHOK=skipOO||position.board[7+112*color]===2*bt.ROOK+color,rookAOK=skipOOO||position.board[0+112*color]===2*bt.ROOK+color;return(skipOO&&skipOOO||position.board[4+112*color]===2*bt.KING+color)&&rookAOK&&rookHOK}function isCastlingFlagLegalForChess960(position,color){for(var files=[],file=0;file<8;++file)if(0!=(position.castling[color]&1<<file)){if(position.board[file+112*color]!==2*bt.ROOK+color)return;files.push(file)}switch(files.length){case 0:return!0;case 1:return position.king[color]>=112*color&&position.king[color]<=7+112*color;case 2:return position.king[color]>files[0]+112*color&&position.king[color]<files[1]+112*color;default:return!1}}},{"../basetypes":42,"./attacks":49}],53:[function(require,module,exports){"use strict";var bt=require("../basetypes"),moveDescriptor=require("../movedescriptor"),attacks=require("./attacks"),legality=require("./legality"),DISPLACEMENT_LOOKUP=[204,0,0,0,0,0,0,60,0,0,0,0,0,0,204,0,0,204,0,0,0,0,0,60,0,0,0,0,0,204,0,0,0,0,204,0,0,0,0,60,0,0,0,0,204,0,0,0,0,0,0,204,0,0,0,60,0,0,0,204,0,0,0,0,0,0,0,0,204,0,0,60,0,0,204,0,0,0,0,0,0,0,0,0,0,204,768,60,768,204,0,0,0,0,0,0,0,0,0,0,0,768,2255,2111,2255,768,0,0,0,0,0,0,60,60,60,60,60,60,63,0,63,60,60,60,60,60,60,0,0,0,0,0,0,768,1231,1087,1231,768,0,0,0,0,0,0,0,0,0,0,0,204,768,60,768,204,0,0,0,0,0,0,0,0,0,0,204,0,0,60,0,0,204,0,0,0,0,0,0,0,0,204,0,0,0,60,0,0,0,204,0,0,0,0,0,0,204,0,0,0,0,60,0,0,0,0,204,0,0,0,0,204,0,0,0,0,0,60,0,0,0,0,0,204,0,0,204,0,0,0,0,0,0,60,0,0,0,0,0,0,204,0],SLIDING_DIRECTION=[-17,0,0,0,0,0,0,-16,0,0,0,0,0,0,-15,0,0,-17,0,0,0,0,0,-16,0,0,0,0,0,-15,0,0,0,0,-17,0,0,0,0,-16,0,0,0,0,-15,0,0,0,0,0,0,-17,0,0,0,-16,0,0,0,-15,0,0,0,0,0,0,0,0,-17,0,0,-16,0,0,-15,0,0,0,0,0,0,0,0,0,0,-17,0,-16,0,-15,0,0,0,0,0,0,0,0,0,0,0,0,-17,-16,-15,0,0,0,0,0,0,0,-1,-1,-1,-1,-1,-1,-1,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,15,16,17,0,0,0,0,0,0,0,0,0,0,0,0,15,0,16,0,17,0,0,0,0,0,0,0,0,0,0,15,0,0,16,0,0,17,0,0,0,0,0,0,0,0,15,0,0,0,16,0,0,0,17,0,0,0,0,0,0,15,0,0,0,0,16,0,0,0,0,17,0,0,0,0,15,0,0,0,0,0,16,0,0,0,0,0,17,0,0,15,0,0,0,0,0,0,16,0,0,0,0,0,0,17,0];exports.isCheck=function(position){return legality.isLegal(position)&&attacks.isAttacked(position,position.king[position.turn],1-position.turn)},exports.isCheckmate=function(position){return legality.isLegal(position)&&!hasMove(position)&&attacks.isAttacked(position,position.king[position.turn],1-position.turn)},exports.isStalemate=function(position){return legality.isLegal(position)&&!hasMove(position)&&!attacks.isAttacked(position,position.king[position.turn],1-position.turn)};var hasMove=exports.hasMove=function(position){function MoveFound(){}try{return generateMoves(position,function(descriptor){if(descriptor)throw new MoveFound}),!1}catch(err){if(err instanceof MoveFound)return!0;throw err}};function generateMoves(position,fun){if(legality.isLegal(position))for(var from=0;from<120;from+=7==(7&from)?9:1){var fromContent=position.board[from],movingPiece=Math.floor(fromContent/2);if(!(fromContent<0||fromContent%2!==position.turn)){if(movingPiece===bt.PAWN){for(var attackDirections=attacks.ATTACK_DIRECTIONS[fromContent],i=0;i<attackDirections.length;++i){if(0==(136&(to=from+attackDirections[i])))0<=(toContent=position.board[to])&&toContent%2!==position.turn?fun(isKingSafeAfterMove(position,from,to,-1),to<8||112<=to):toContent<0&&to===16*(5-3*position.turn)+position.enPassant&&fun(isKingSafeAfterMove(position,from,to,16*(4-position.turn)+position.enPassant),!1)}var moveDirection=16-32*position.turn,to=from+moveDirection;if(position.board[to]<0){fun(isKingSafeAfterMove(position,from,to,-1),to<8||112<=to);var firstSquareOfRow=16*(1+5*position.turn);firstSquareOfRow<=from&&from<firstSquareOfRow+8&&(to+=moveDirection,position.board[to]<0&&fun(isKingSafeAfterMove(position,from,to,-1),!1))}}else if(movingPiece===bt.KNIGHT||movingPiece===bt.KING){var directions=attacks.ATTACK_DIRECTIONS[fromContent];for(i=0;i<directions.length;++i){if(0==(136&(to=from+directions[i])))((toContent=position.board[to])<0||toContent%2!==position.turn)&&fun(isKingSafeAfterMove(position,from,to,-1),!1)}}else for(directions=attacks.ATTACK_DIRECTIONS[fromContent],i=0;i<directions.length;++i)for(to=from+directions[i];0==(136&to);to+=directions[i]){var toContent;if(((toContent=position.board[to])<0||toContent%2!==position.turn)&&fun(isKingSafeAfterMove(position,from,to,-1),!1),0<=toContent)break}movingPiece===bt.KING&&0!==position.castling[position.turn]&&(fun(isCastlingLegal(position,from,2+112*position.turn),!1),fun(isCastlingLegal(position,from,6+112*position.turn),!1))}}}exports.moves=function(position){var res=[];return generateMoves(position,function(descriptor,generatePromotions){descriptor&&(generatePromotions?(res.push(moveDescriptor.makePromotion(descriptor._from,descriptor._to,position.turn,bt.QUEEN,descriptor._optionalPiece)),res.push(moveDescriptor.makePromotion(descriptor._from,descriptor._to,position.turn,bt.ROOK,descriptor._optionalPiece)),res.push(moveDescriptor.makePromotion(descriptor._from,descriptor._to,position.turn,bt.BISHOP,descriptor._optionalPiece)),res.push(moveDescriptor.makePromotion(descriptor._from,descriptor._to,position.turn,bt.KNIGHT,descriptor._optionalPiece))):res.push(descriptor))}),res};var isKingSafeAfterMove=exports.isKingSafeAfterMove=function(position,from,to,enPassantSquare){var fromContent=position.board[from],toContent=position.board[to],movingPiece=Math.floor(fromContent/2);position.board[to]=fromContent,position.board[from]=bt.EMPTY,0<=enPassantSquare&&(position.board[enPassantSquare]=bt.EMPTY);var kingSquare=movingPiece===bt.KING?to:position.king[position.turn],kingIsInCheck=attacks.isAttacked(position,kingSquare,1-position.turn);return position.board[from]=fromContent,position.board[to]=toContent,0<=enPassantSquare&&(position.board[enPassantSquare]=2*bt.PAWN+1-position.turn),!kingIsInCheck&&(0<=enPassantSquare?moveDescriptor.makeEnPassant(from,to,enPassantSquare,position.turn):moveDescriptor.make(from,to,position.turn,movingPiece,toContent))},isCastlingLegal=exports.isCastlingLegal=function(position,from,to){var castleFile=-1,rookTo=-1;if(to===2+112*position.turn)castleFile=position.variant===bt.CHESS_960?findCastleFile(position.castling[position.turn],from%16,-1):0,rookTo=3+112*position.turn;else{if(to!==6+112*position.turn)return!1;castleFile=position.variant===bt.CHESS_960?findCastleFile(position.castling[position.turn],from%16,1):7,rookTo=5+112*position.turn}if(position.variant===bt.CHESS_960){if(-1===castleFile)return!1}else if(0==(position.castling[position.turn]&1<<castleFile))return!1;for(var rookFrom=castleFile+112*position.turn,sq=Math.min(from,to,rookFrom,rookTo);sq<=Math.max(from,to,rookFrom,rookTo);++sq)if(sq!==from&&sq!==rookFrom&&position.board[sq]!==bt.EMPTY)return!1;var byWho=1-position.turn;for(sq=Math.min(from,to);sq<=Math.max(from,to);++sq)if(attacks.isAttacked(position,sq,byWho))return!1;return moveDescriptor.makeCastling(from,to,rookFrom,rookTo,position.turn)};function findCastleFile(castlingFlag,kingFile,offset){for(var file=kingFile+offset;0<=file&&file<8;file+=offset)if(0!=(castlingFlag&1<<file))return file;return-1}exports.isMoveLegal=function(position,from,to){if(!legality.isLegal(position))return!1;var fromContent=position.board[from],toContent=position.board[to],movingPiece=Math.floor(fromContent/2);if(fromContent<0||fromContent%2!==position.turn)return!1;var displacement=to-from+119,enPassantSquare=-1,isTwoSquarePawnMove=!1,isPromotion=movingPiece===bt.PAWN&&(to<8||112<=to),castlingDescriptor=!1;if(movingPiece===bt.KING&&0!==position.castling[position.turn]&&(castlingDescriptor=isCastlingLegal(position,from,to)),0==(DISPLACEMENT_LOOKUP[displacement]&1<<fromContent)){if(movingPiece!==bt.PAWN||displacement!==151-64*position.turn)return castlingDescriptor;var firstSquareOfRow=16*(1+5*position.turn);if(from<firstSquareOfRow||firstSquareOfRow+8<=from)return!1;isTwoSquarePawnMove=!0}if(movingPiece===bt.PAWN){if(displacement===135-32*position.turn||isTwoSquarePawnMove){if(toContent!==bt.EMPTY)return!1}else if(toContent===bt.EMPTY){if(position.enPassant<0||to!==16*(5-3*position.turn)+position.enPassant)return!1;enPassantSquare=16*(4-position.turn)+position.enPassant}else if(toContent%2===position.turn)return!1}else if(0<=toContent&&toContent%2===position.turn)return castlingDescriptor;if(movingPiece===bt.BISHOP||movingPiece===bt.ROOK||movingPiece===bt.QUEEN){for(var direction=SLIDING_DIRECTION[displacement],sq=from+direction;sq!==to;sq+=direction)if(position.board[sq]!==bt.EMPTY)return!1}else if(isTwoSquarePawnMove&&position.board[(from+to)/2]!==bt.EMPTY)return!1;var descriptor=isKingSafeAfterMove(position,from,to,enPassantSquare);return descriptor&&isPromotion?{type:"promotion",build:function(promotion){return promotion!==bt.PAWN&&promotion!==bt.KING&&moveDescriptor.makePromotion(descriptor._from,descriptor._to,descriptor._movingPiece%2,promotion,descriptor._optionalPiece)}}:descriptor&&castlingDescriptor?{type:"castle960",build:function(type){return type?castlingDescriptor:descriptor}}:descriptor||(castlingDescriptor||!1)},exports.play=function(position,descriptor){position.board[descriptor._from]=bt.EMPTY,descriptor.isEnPassant()?position.board[descriptor._optionalSquare1]=bt.EMPTY:descriptor.isCastling()&&(position.board[descriptor._optionalSquare1]=bt.EMPTY,position.board[descriptor._optionalSquare2]=descriptor._optionalPiece),position.board[descriptor._to]=descriptor._finalPiece;var movingPiece=Math.floor(descriptor._movingPiece/2);if(movingPiece===bt.KING&&(position.castling[position.turn]=0),descriptor._from<8&&(position.castling[bt.WHITE]&=~(1<<descriptor._from)),descriptor._to<8&&(position.castling[bt.WHITE]&=~(1<<descriptor._to)),112<=descriptor._from&&(position.castling[bt.BLACK]&=~(1<<descriptor._from%16)),112<=descriptor._to&&(position.castling[bt.BLACK]&=~(1<<descriptor._to%16)),position.enPassant=-1,movingPiece===bt.PAWN&&32===Math.abs(descriptor._from-descriptor._to)){var otherPawn=1^descriptor._movingPiece,squareBefore=descriptor._to-1,squareAfter=descriptor._to+1;(0==(136&squareBefore)&&position.board[squareBefore]===otherPawn||0==(136&squareAfter)&&position.board[squareAfter]===otherPawn)&&(position.enPassant=descriptor._to%16)}movingPiece===bt.KING&&(position.king[position.turn]=descriptor._to),position.turn=1-position.turn};var isNullMoveLegal=exports.isNullMoveLegal=function(position){return legality.isLegal(position)&&!attacks.isAttacked(position,position.king[position.turn],1-position.turn)};exports.playNullMove=function(position){return!!isNullMoveLegal(position)&&(position.turn=1-position.turn,position.enPassant=-1,!0)}},{"../basetypes":42,"../movedescriptor":46,"./attacks":49,"./legality":52}],54:[function(require,module,exports){"use strict";var bt=require("../basetypes"),moveDescriptor=require("../movedescriptor"),exception=require("../exception"),i18n=require("../i18n"),impl=require("./impl"),fen=require("./fen"),attacks=require("./attacks"),legality=require("./legality"),moveGeneration=require("./movegeneration");function getCheckCheckmateSymbol(position,descriptor){var nextPosition=impl.makeCopy(position);return moveGeneration.play(nextPosition,descriptor),moveGeneration.isCheck(nextPosition)?moveGeneration.hasMove(nextPosition)?"+":"#":""}function getDisambiguationSymbol(position,from,to){var attackers=attacks.getAttacks(position,to,position.turn).filter(function(sq){return position.board[sq]===position.board[from]});if(attackers.length<2)return"";for(var foundNotPined=!1,foundOnSameRank=!1,foundOnSameFile=!1,rankFrom=Math.floor(from/16),fileFrom=from%16,i=0;i<attackers.length;++i){var sq=attackers[i];sq===from||isPinned(position,sq)||(foundNotPined=!0,rankFrom===Math.floor(sq/16)&&(foundOnSameRank=!0),fileFrom===sq%16&&(foundOnSameFile=!0))}return foundOnSameFile?foundOnSameRank?bt.squareToString(from):bt.rankToString(rankFrom):foundNotPined?bt.fileToString(fileFrom):""}function isPinned(position,sq){var kingSquare=position.king[position.turn],vector=Math.abs(kingSquare-sq);if(0===vector)return!1;var pinnerQueen=2*bt.QUEEN+1-position.turn,pinnerRook=2*bt.ROOK+1-position.turn,pinnerBishop=2*bt.BISHOP+1-position.turn;return vector<8?pinningLoockup(position,kingSquare,sq,kingSquare<sq?1:-1,pinnerRook,pinnerQueen):vector%16==0?pinningLoockup(position,kingSquare,sq,kingSquare<sq?16:-16,pinnerRook,pinnerQueen):vector%15==0?pinningLoockup(position,kingSquare,sq,kingSquare<sq?15:-15,pinnerBishop,pinnerQueen):vector%17==0&&pinningLoockup(position,kingSquare,sq,kingSquare<sq?17:-17,pinnerBishop,pinnerQueen)}function pinningLoockup(position,kingSquare,targetSquare,direction,pinnerColoredPiece1,pinnerColoredPiece2){for(var sq=kingSquare+direction;0==(136&sq);sq+=direction)if(sq!==targetSquare&&position.board[sq]!==bt.EMPTY)return position.board[sq]===pinnerColoredPiece1||position.board[sq]===pinnerColoredPiece2}exports.getNotation=function(position,descriptor){var res="";return descriptor.isCastling()?res=descriptor._to%16==6?"O-O":"O-O-O":Math.floor(descriptor._movingPiece/2)===bt.PAWN?(descriptor.isCapture()&&(res+=bt.fileToString(descriptor._from%16)+"x"),res+=bt.squareToString(descriptor._to),descriptor.isPromotion()&&(res+="="+bt.pieceToString(Math.floor(descriptor._finalPiece/2)).toUpperCase())):(res+=bt.pieceToString(Math.floor(descriptor._movingPiece/2)).toUpperCase(),res+=getDisambiguationSymbol(position,descriptor._from,descriptor._to),descriptor.isCapture()&&(res+="x"),res+=bt.squareToString(descriptor._to)),res+=getCheckCheckmateSymbol(position,descriptor)},exports.parseNotation=function(position,notation,strict){var m=/^(?:(O-O-O)|(O-O)|([KQRBN])([a-h])?([1-8])?(x)?([a-h][1-8])|(?:([a-h])(x)?)?([a-h][1-8])(?:(=)?([KQRBNP]))?)([\+#])?$/.exec(notation);if(null===m)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_MOVE_NOTATION_SYNTAX);if(!legality.isLegal(position))throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.ILLEGAL_POSITION);var descriptor=null;if(m[1]||m[2]){var from=position.king[position.turn],to=(m[2]?6:2)+112*position.turn;if(!(descriptor=moveGeneration.isCastlingLegal(position,from,to))){var message=m[2]?i18n.ILLEGAL_KING_SIDE_CASTLING:i18n.ILLEGAL_QUEEN_SIDE_CASTLING;throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,message)}}else if(m[3]){var movingPiece=bt.pieceFromString(m[3].toLowerCase()),toContent=(to=bt.squareFromString(m[7]),position.board[to]);if(0<=toContent&&toContent%2===position.turn)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.TRYING_TO_CAPTURE_YOUR_OWN_PIECES);var attackers=attacks.getAttacks(position,to,position.turn).filter(function(sq){return position.board[sq]===2*movingPiece+position.turn});if(m[4]){var fileFrom=bt.fileFromString(m[4]);attackers=attackers.filter(function(sq){return sq%16===fileFrom})}if(m[5]){var rankFrom=bt.rankFromString(m[5]);attackers=attackers.filter(function(sq){return Math.floor(sq/16)===rankFrom})}if(0===attackers.length){message=m[4]||m[5]?i18n.NO_PIECE_CAN_MOVE_TO_DISAMBIGUATION:i18n.NO_PIECE_CAN_MOVE_TO;throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,message,m[3],m[7])}for(var i=0;i<attackers.length;++i){var currentDescriptor=moveGeneration.isKingSafeAfterMove(position,attackers[i],to,-1);if(currentDescriptor){if(null!==descriptor)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.REQUIRE_DISAMBIGUATION,m[3],m[7]);descriptor=currentDescriptor}}if(null===descriptor){message=position.turn===bt.WHITE?i18n.NOT_SAFE_FOR_WHITE_KING:i18n.NOT_SAFE_FOR_BLACK_KING;throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,message)}if(strict){var expectedDS=getDisambiguationSymbol(position,descriptor._from,to),observedDS=(m[4]?m[4]:"")+(m[5]?m[5]:"");if(expectedDS!==observedDS)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.WRONG_DISAMBIGUATION_SYMBOL,expectedDS,observedDS)}}else if(m[10]){to=bt.squareFromString(m[10]);if(!(descriptor=m[8]?function(position,notation,columnFrom,to){var from=to-16+32*position.turn;if(0!=(136&from))throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_CAPTURING_PAWN_MOVE);var columnTo=to%16;if(columnTo-columnFrom==1)from-=1;else{if(columnTo-columnFrom!=-1)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_CAPTURING_PAWN_MOVE);from+=1}if(position.board[from]!==2*bt.PAWN+position.turn)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_CAPTURING_PAWN_MOVE);var toContent=position.board[to];if(toContent<0){if(to===16*(5-3*position.turn)+position.enPassant)return moveGeneration.isKingSafeAfterMove(position,from,to,16*(4-position.turn)+position.enPassant)}else if(toContent%2!==position.turn)return moveGeneration.isKingSafeAfterMove(position,from,to,-1);throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_CAPTURING_PAWN_MOVE)}(position,notation,bt.fileFromString(m[8]),to):function(position,notation,to){var offset=16-32*position.turn,from=to-offset;if(0!=(136&from))throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_NON_CAPTURING_PAWN_MOVE);if(0<=position.board[to])throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_NON_CAPTURING_PAWN_MOVE);var expectedFromContent=2*bt.PAWN+position.turn;{if(position.board[from]===expectedFromContent)return moveGeneration.isKingSafeAfterMove(position,from,to,-1);if(position.board[from]<0){from-=offset;var firstSquareOfRow=16*(1+5*position.turn);if(firstSquareOfRow<=from&&from<firstSquareOfRow+8&&position.board[from]===expectedFromContent)return moveGeneration.isKingSafeAfterMove(position,from,to,-1)}}throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_NON_CAPTURING_PAWN_MOVE)}(position,notation,to))){message=position.turn===bt.WHITE?i18n.NOT_SAFE_FOR_WHITE_KING:i18n.NOT_SAFE_FOR_BLACK_KING;throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,message)}if(to<8||112<=to){if(!m[12])throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.MISSING_PROMOTION);var promotion=bt.pieceFromString(m[12].toLowerCase());if(promotion===bt.PAWN||promotion===bt.KING)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.INVALID_PROMOTED_PIECE,m[12]);if(descriptor=moveDescriptor.makePromotion(descriptor._from,descriptor._to,descriptor._movingPiece%2,promotion,descriptor._optionalPiece),strict&&!m[11])throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.MISSING_PROMOTION_SYMBOL)}else if(m[12])throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.ILLEGAL_PROMOTION)}if(strict){if(descriptor.isCapture()!==(m[6]||m[9])){message=descriptor.isCapture()?i18n.MISSING_CAPTURE_SYMBOL:i18n.INVALID_CAPTURE_SYMBOL;throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,message)}var expectedCCS=getCheckCheckmateSymbol(position,descriptor),observedCCS=m[13]?m[13]:"";if(expectedCCS!==observedCCS)throw new exception.InvalidNotation(fen.getFEN(position,0,1),notation,i18n.WRONG_CHECK_CHECKMATE_SYMBOL,expectedCCS,observedCCS)}return descriptor}},{"../basetypes":42,"../exception":43,"../i18n":45,"../movedescriptor":46,"./attacks":49,"./fen":50,"./impl":51,"./legality":52,"./movegeneration":53}],55:[function(require,module,exports){"use strict";var bt=require("./basetypes"),exception=require("./exception");exports.forEachSquare=function(callback){for(var rank=0;rank<8;++rank)for(var file=0;file<8;++file)callback(bt.squareToString(16*rank+file))},exports.squareColor=function(square){if((square=bt.squareFromString(square))<0)throw new exception.IllegalArgument("squareColor()");return Math.floor(square/16)%2==square%2?"b":"w"},exports.squareToCoordinates=function(square){if((square=bt.squareFromString(square))<0)throw new exception.IllegalArgument("squareToCoordinates()");return{rank:Math.floor(square/16),file:square%16}},exports.coordinatesToSquare=function(file,rank){if(file<0||8<=file||rank<0||8<=rank)throw new exception.IllegalArgument("coordinatesToSquare()");return bt.fileToString(file)+bt.rankToString(rank)}},{"./basetypes":42,"./exception":43}],56:[function(require,module,exports){(function(global){var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",boolTag="[object Boolean]",dateTag="[object Date]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reFlags=/\w*$/,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,cloneableTags={};cloneableTags[argsTag]=cloneableTags["[object Array]"]=cloneableTags[arrayBufferTag]=cloneableTags[dataViewTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[setTag]=cloneableTags[stringTag]=cloneableTags[symbolTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0,cloneableTags["[object Error]"]=cloneableTags[funcTag]=cloneableTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports;function addMapEntry(map,pair){return map.set(pair[0],pair[1]),map}function addSetEntry(set,value){return set.add(value),set}function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array?array.length:0;for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array);return accumulator}function isHostObject(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size);return map.forEach(function(value,key){result[++index]=[key,value]}),result}function overArg(func,transform){return function(arg){return func(transform(arg))}}function setToArray(set){var index=-1,result=Array(set.size);return set.forEach(function(value){result[++index]=value}),result}var uid,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeGetSymbols=Object.getOwnPropertySymbols,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function Hash(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=entries?entries.length:0;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){this.__data__=new ListCache(entries)}function arrayLikeKeys(value,inherited){var result=isArray(value)||function(value){return function(value){return function(value){return!!value&&"object"==typeof value}(value)&&isArrayLike(value)}(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}(value)?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length,skipIndexes=!!length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isIndex(key,length))||result.push(key);return result}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||(object[key]=value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseClone(value,isDeep,isFull,customizer,key,object,stack){var result;if(customizer&&(result=object?customizer(value,key,object,stack):customizer(value)),void 0!==result)return result;if(!isObject(value))return value;var isArr=isArray(value);if(isArr){if(result=function(array){var length=array.length,result=array.constructor(length);length&&"string"==typeof array[0]&&hasOwnProperty.call(array,"index")&&(result.index=array.index,result.input=array.input);return result}(value),!isDeep)return function(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(value,result)}else{var tag=getTag(value),isFunc=tag==funcTag||tag==genTag;if(isBuffer(value))return function(buffer,isDeep){if(isDeep)return buffer.slice();var result=new buffer.constructor(buffer.length);return buffer.copy(result),result}(value,isDeep);if(tag==objectTag||tag==argsTag||isFunc&&!object){if(isHostObject(value))return object?value:{};if(result=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:(proto=getPrototype(object),isObject(proto)?objectCreate(proto):{});var proto}(isFunc?{}:value),!isDeep)return function(source,object){return copyObject(source,getSymbols(source),object)}(value,function(object,source){return object&&copyObject(source,keys(source),object)}(result,value))}else{if(!cloneableTags[tag])return object?value:{};result=function(object,tag,cloneFunc,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return cloneArrayBuffer(object);case boolTag:case dateTag:return new Ctor(+object);case dataViewTag:return function(dataView,isDeep){var buffer=isDeep?cloneArrayBuffer(dataView.buffer):dataView.buffer;return new dataView.constructor(buffer,dataView.byteOffset,dataView.byteLength)}(object,isDeep);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:return function(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}(object,isDeep);case mapTag:return function(map,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(mapToArray(map),!0):mapToArray(map),addMapEntry,new map.constructor)}(object,isDeep,cloneFunc);case numberTag:case stringTag:return new Ctor(object);case regexpTag:return(result=new(regexp=object).constructor(regexp.source,reFlags.exec(regexp))).lastIndex=regexp.lastIndex,result;case setTag:return function(set,isDeep,cloneFunc){return arrayReduce(isDeep?cloneFunc(setToArray(set),!0):setToArray(set),addSetEntry,new set.constructor)}(object,isDeep,cloneFunc);case symbolTag:return symbol=object,symbolValueOf?Object(symbolValueOf.call(symbol)):{}}var symbol;var regexp,result}(value,tag,baseClone,isDeep)}}stack||(stack=new Stack);var stacked=stack.get(value);if(stacked)return stacked;if(stack.set(value,result),!isArr)var props=isFull?function(object){return function(object,keysFunc,symbolsFunc){var result=keysFunc(object);return isArray(object)?result:function(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index];return array}(result,symbolsFunc(object))}(object,keys,getSymbols)}(value):keys(value);return function(array,iteratee){for(var index=-1,length=array?array.length:0;++index<length&&!1!==iteratee(array[index],index,array););}(props||value,function(subValue,key){props&&(subValue=value[key=subValue]),assignValue(result,key,baseClone(subValue,isDeep,isFull,customizer,key,value,stack))}),result}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)||isHostObject(value)?reIsNative:reIsHostCtor).test(toSource(value));var func}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);return new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result}function copyObject(source,props,object,customizer){object||(object={});for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;assignValue(object,key,void 0===newValue?source[key]:newValue)}return object}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{}},Hash.prototype.delete=function(key){return this.has(key)&&delete this.__data__[key]},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){return this.__data__[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[]},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),0))},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?data.push([key,value]):data[index][1]=value,this},MapCache.prototype.clear=function(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){return getMapData(this,key).delete(key)},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){return getMapData(this,key).set(key,value),this},Stack.prototype.clear=function(){this.__data__=new ListCache},Stack.prototype.delete=function(key){return this.__data__.delete(key)},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var cache=this.__data__;if(cache instanceof ListCache){var pairs=cache.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this;cache=this.__data__=new MapCache(pairs)}return cache.set(key,value),this};var getSymbols=nativeGetSymbols?overArg(nativeGetSymbols,Object):function(){return[]},getTag=function(value){return objectToString.call(value)};function isIndex(value,length){return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==typeof value||reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}function toSource(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!=value&&other!=other}(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&"[object Promise]"!=getTag(Promise.resolve())||Set&&getTag(new Set)!=setTag||WeakMap&&"[object WeakMap]"!=getTag(new WeakMap))&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:void 0,ctorString=Ctor?toSource(Ctor):void 0;if(ctorString)switch(ctorString){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return"[object Promise]";case setCtorString:return setTag;case weakMapCtorString:return"[object WeakMap]"}return result});var isArray=Array.isArray;function isArrayLike(value){return null!=value&&function(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER}(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&("object"==type||"function"==type)}function keys(object){return isArrayLike(object)?arrayLikeKeys(object):function(object){if(!isPrototype(object))return nativeKeys(object);var result=[];for(var key in Object(object))hasOwnProperty.call(object,key)&&"constructor"!=key&&result.push(key);return result}(object)}module.exports=function(value){return baseClone(value,!0,!0)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(require,module,exports){(function(global){var INFINITY=1/0,symbolTag="[object Symbol]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source),freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectToString=Object.prototype.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function baseToString(value){if("string"==typeof value)return value;if(function(value){return"symbol"==typeof value||function(value){return!!value&&"object"==typeof value}(value)&&objectToString.call(value)==symbolTag}(value))return symbolToString?symbolToString.call(value):"";var result=value+"";return"0"==result&&1/value==-INFINITY?"-0":result}module.exports=function(string){var value;return(string=null==(value=string)?"":baseToString(value))&&reHasRegExpChar.test(string)?string.replace(reRegExpChar,"\\$&"):string}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],58:[function(require,module,exports){var func,transform,funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString,getPrototype=(func=Object.getPrototypeOf,transform=Object,function(arg){return func(transform(arg))});module.exports=function(value){if(!function(value){return!!value&&"object"==typeof value}(value)||"[object Object]"!=objectToString.call(value)||function(value){var result=!1;if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}(value))return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}},{}],59:[function(require,module,exports){var objectToString=Object.prototype.toString,isArray=Array.isArray;module.exports=function(value){return"string"==typeof value||!isArray(value)&&function(value){return!!value&&"object"==typeof value}(value)&&"[object String]"==objectToString.call(value)}},{}],60:[function(require,module,exports){(function(global){var MAX_SAFE_INTEGER=9007199254740991,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",undefinedTag="[object Undefined]",reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags[funcTag]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags[objectTag]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function safeGet(object,key){return"__proto__"==key?void 0:object[key]}var uid,func,transform,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,maskSrcKey=(uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||""))?"Symbol(src)_1."+uid:"",nativeObjectToString=objectProto.toString,objectCtorString=funcToString.call(Object),reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0,getPrototype=(func=Object.getPrototypeOf,transform=Object,function(arg){return func(transform(arg))}),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:void 0,defineProperty=function(){try{var func=getNative(Object,"defineProperty");return func({},"",{}),func}catch(e){}}(),nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeMax=Math.max,nativeNow=Date.now,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),baseCreate=function(){function object(){}return function(proto){if(!isObject(proto))return{};if(objectCreate)return objectCreate(proto);object.prototype=proto;var result=new object;return object.prototype=void 0,result}}();function Hash(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function ListCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function MapCache(entries){var index=-1,length=null==entries?0:entries.length;for(this.clear();++index<length;){var entry=entries[index];this.set(entry[0],entry[1])}}function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?function(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index);return result}(value.length,String):[],length=result.length;for(var key in value)!inherited&&!hasOwnProperty.call(value,key)||skipIndexes&&("length"==key||isBuff&&("offset"==key||"parent"==key)||isType&&("buffer"==key||"byteLength"==key||"byteOffset"==key)||isIndex(key,length))||result.push(key);return result}function assignMergeValue(object,key,value){(void 0===value||eq(object[key],value))&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function assignValue(object,key,value){var objValue=object[key];hasOwnProperty.call(object,key)&&eq(objValue,value)&&(void 0!==value||key in object)||baseAssignValue(object,key,value)}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length;return-1}function baseAssignValue(object,key,value){"__proto__"==key&&defineProperty?defineProperty(object,key,{configurable:!0,enumerable:!0,value:value,writable:!0}):object[key]=value}Hash.prototype.clear=function(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0},Hash.prototype.delete=function(key){var result=this.has(key)&&delete this.__data__[key];return this.size-=result?1:0,result},Hash.prototype.get=function(key){var data=this.__data__;if(nativeCreate){var result=data[key];return"__lodash_hash_undefined__"===result?void 0:result}return hasOwnProperty.call(data,key)?data[key]:void 0},Hash.prototype.has=function(key){var data=this.__data__;return nativeCreate?void 0!==data[key]:hasOwnProperty.call(data,key)},Hash.prototype.set=function(key,value){var data=this.__data__;return this.size+=this.has(key)?0:1,data[key]=nativeCreate&&void 0===value?"__lodash_hash_undefined__":value,this},ListCache.prototype.clear=function(){this.__data__=[],this.size=0},ListCache.prototype.delete=function(key){var data=this.__data__,index=assocIndexOf(data,key);return!(index<0||(index==data.length-1?data.pop():splice.call(data,index,1),--this.size,0))},ListCache.prototype.get=function(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?void 0:data[index][1]},ListCache.prototype.has=function(key){return-1<assocIndexOf(this.__data__,key)},ListCache.prototype.set=function(key,value){var data=this.__data__,index=assocIndexOf(data,key);return index<0?(++this.size,data.push([key,value])):data[index][1]=value,this},MapCache.prototype.clear=function(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}},MapCache.prototype.delete=function(key){var result=getMapData(this,key).delete(key);return this.size-=result?1:0,result},MapCache.prototype.get=function(key){return getMapData(this,key).get(key)},MapCache.prototype.has=function(key){return getMapData(this,key).has(key)},MapCache.prototype.set=function(key,value){var data=getMapData(this,key),size=data.size;return data.set(key,value),this.size+=data.size==size?0:1,this},Stack.prototype.clear=function(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function(key){var data=this.__data__,result=data.delete(key);return this.size=data.size,result},Stack.prototype.get=function(key){return this.__data__.get(key)},Stack.prototype.has=function(key){return this.__data__.has(key)},Stack.prototype.set=function(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<199)return pairs.push([key,value]),this.size=++data.size,this;data=this.__data__=new MapCache(pairs)}return data.set(key,value),this.size=data.size,this};var fromRight,baseFor=function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index];if(!1===iteratee(iterable[key],key,iterable))break}return object};function baseGetTag(value){return null==value?void 0===value?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?function(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{var unmasked=!(value[symToStringTag]=void 0)}catch(e){}var result=nativeObjectToString.call(value);unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]);return result}(value):function(value){return nativeObjectToString.call(value)}(value)}function baseIsArguments(value){return isObjectLike(value)&&"[object Arguments]"==baseGetTag(value)}function baseIsNative(value){return!(!isObject(value)||(func=value,maskSrcKey&&maskSrcKey in func))&&(isFunction(value)?reIsNative:reIsHostCtor).test(function(func){if(null!=func){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}(value));var func}function baseKeysIn(object){if(!isObject(object))return function(object){var result=[];if(null!=object)for(var key in Object(object))result.push(key);return result}(object);var isProto=isPrototype(object),result=[];for(var key in object)("constructor"!=key||!isProto&&hasOwnProperty.call(object,key))&&result.push(key);return result}function baseMerge(object,source,srcIndex,customizer,stack){object!==source&&baseFor(source,function(srcValue,key){if(isObject(srcValue))stack||(stack=new Stack),function(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked)return assignMergeValue(object,key,stacked);var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):void 0,isCommon=void 0===newValue;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue,isArr||isBuff||isTyped?isArray(objValue)?newValue=objValue:isObjectLike(value=objValue)&&isArrayLike(value)?newValue=function(source,array){var index=-1,length=source.length;array||(array=Array(length));for(;++index<length;)array[index]=source[index];return array}(objValue):isBuff?newValue=function(buffer,isDeep){if(isDeep)return buffer.slice();var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);return buffer.copy(result),result}(srcValue,!(isCommon=!1)):isTyped?(typedArray=srcValue,buffer=!(isCommon=!1)?(arrayBuffer=typedArray.buffer,result=new arrayBuffer.constructor(arrayBuffer.byteLength),new Uint8Array(result).set(new Uint8Array(arrayBuffer)),result):typedArray.buffer,newValue=new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)):newValue=[]:function(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(null===proto)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}(srcValue)||isArguments(srcValue)?isArguments(newValue=objValue)?newValue=function(value){return function(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;for(;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):void 0;void 0===newValue&&(newValue=source[key]),isNew?baseAssignValue(object,key,newValue):assignValue(object,key,newValue)}return object}(value,keysIn(value))}(objValue):(!isObject(objValue)||srcIndex&&isFunction(objValue))&&(newValue=function(object){return"function"!=typeof object.constructor||isPrototype(object)?{}:baseCreate(getPrototype(object))}(srcValue)):isCommon=!1}var typedArray,buffer,arrayBuffer,result;var value;isCommon&&(stack.set(srcValue,newValue),mergeFunc(newValue,srcValue,srcIndex,customizer,stack),stack.delete(srcValue));assignMergeValue(object,key,newValue)}(object,source,key,srcIndex,baseMerge,customizer,stack);else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):void 0;void 0===newValue&&(newValue=srcValue),assignMergeValue(object,key,newValue)}},keysIn)}function baseRest(func,start){return setToString(function(func,start,transform){return start=nativeMax(void 0===start?func.length-1:start,0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index];index=-1;for(var otherArgs=Array(start+1);++index<start;)otherArgs[index]=args[index];return otherArgs[start]=transform(array),function(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}(func,this,otherArgs)}}(func,start,identity),func+"")}function getMapData(map,key){var value,type,data=map.__data__;return("string"==(type=typeof(value=key))||"number"==type||"symbol"==type||"boolean"==type?"__proto__"!==value:null===value)?data["string"==typeof key?"string":"hash"]:data.map}function getNative(object,key){var value=function(object,key){return null==object?void 0:object[key]}(object,key);return baseIsNative(value)?value:void 0}function isIndex(value,length){var type=typeof value;return!!(length=null==length?MAX_SAFE_INTEGER:length)&&("number"==type||"symbol"!=type&&reIsUint.test(value))&&-1<value&&value%1==0&&value<length}function isPrototype(value){var Ctor=value&&value.constructor;return value===("function"==typeof Ctor&&Ctor.prototype||objectProto)}var setToString=function(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=16-(stamp-lastCalled);if(lastCalled=stamp,0<remaining){if(800<=++count)return arguments[0]}else count=0;return func.apply(void 0,arguments)}}(defineProperty?function(func,string){return defineProperty(func,"toString",{configurable:!0,enumerable:!1,value:(value=string,function(){return value}),writable:!0});var value}:identity);function eq(value,other){return value===other||value!=value&&other!=other}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")},isArray=Array.isArray;function isArrayLike(value){return null!=value&&isLength(value.length)&&!isFunction(value)}var isBuffer=nativeIsBuffer||function(){return!1};function isFunction(value){if(!isObject(value))return!1;var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return"number"==typeof value&&-1<value&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return null!=value&&("object"==type||"function"==type)}function isObjectLike(value){return null!=value&&"object"==typeof value}var isTypedArray=nodeIsTypedArray?function(func){return function(value){return func(value)}}(nodeIsTypedArray):function(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]};function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,!0):baseKeysIn(object)}var assigner,mergeWith=(assigner=function(object,source,srcIndex,customizer){baseMerge(object,source,srcIndex,customizer)},baseRest(function(object,sources){var index=-1,length=sources.length,customizer=1<length?sources[length-1]:void 0,guard=2<length?sources[2]:void 0;for(customizer=3<assigner.length&&"function"==typeof customizer?(length--,customizer):void 0,guard&&function(value,index,object){if(!isObject(object))return!1;var type=typeof index;return!!("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)&&eq(object[index],value)}(sources[0],sources[1],guard)&&(customizer=length<3?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index];source&&assigner(object,source,index,customizer)}return object}));function identity(value){return value}module.exports=mergeWith}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],61:[function(require,module,exports){"use strict";module.exports=Number.isNaN||function(x){return x!=x}},{}],62:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length-1;0<=i;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};function filter(xs,f){if(xs.filter)return xs.filter(f);for(var res=[],i=0;i<xs.length;i++)f(xs[i],i,xs)&&res.push(xs[i]);return res}exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;-1<=i&&!resolvedAbsolute;i--){var path=0<=i?arguments[i]:process.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return(resolvedAbsolute?"/":"")+(resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/"))||"."},exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash="/"===substr(path,-1);return(path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/"))||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.isAbsolute=function(path){return"/"===path.charAt(0)},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if("string"!=typeof p)throw new TypeError("Arguments to path.join must be strings");return p}).join("/"))},exports.relative=function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;0<=end&&""===arr[end];end--);return end<start?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}var outputParts=[];for(i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return(outputParts=outputParts.concat(toParts.slice(samePartsLength))).join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},exports.basename=function(path,ext){var f=splitPath(path)[2];return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){return splitPath(path)[3]};var substr="b"==="ab".substr(-1)?function(str,start,len){return str.substr(start,len)}:function(str,start,len){return start<0&&(start=str.length+start),str.substr(start,len)}}).call(this,require("_process"))},{_process:89}],63:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_container=require("./container");var AtRule=function(_Container){function AtRule(defaults){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AtRule);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Container.call(this,defaults));return _this.type="atrule",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(AtRule,_Container),AtRule.prototype.append=function(){var _Container$prototype$;this.nodes||(this.nodes=[]);for(var _len=arguments.length,children=Array(_len),_key=0;_key<_len;_key++)children[_key]=arguments[_key];return(_Container$prototype$=_Container.prototype.append).call.apply(_Container$prototype$,[this].concat(children))},AtRule.prototype.prepend=function(){var _Container$prototype$2;this.nodes||(this.nodes=[]);for(var _len2=arguments.length,children=Array(_len2),_key2=0;_key2<_len2;_key2++)children[_key2]=arguments[_key2];return(_Container$prototype$2=_Container.prototype.prepend).call.apply(_Container$prototype$2,[this].concat(children))},AtRule}(((obj=_container)&&obj.__esModule?obj:{default:obj}).default);exports.default=AtRule,module.exports=exports.default},{"./container":65}],64:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_node=require("./node");var Comment=function(_Node){function Comment(defaults){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Comment);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Node.call(this,defaults));return _this.type="comment",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Comment,_Node),Comment}(((obj=_node)&&obj.__esModule?obj:{default:obj}).default);exports.default=Comment,module.exports=exports.default},{"./node":72}],65:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_declaration2=_interopRequireDefault(require("./declaration")),_comment2=_interopRequireDefault(require("./comment"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Container=function(_Node){function Container(){return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Container),function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Node.apply(this,arguments))}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Container,_Node),Container.prototype.push=function(child){return(child.parent=this).nodes.push(child),this},Container.prototype.each=function(callback){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var id=this.lastEach;if(this.indexes[id]=0,this.nodes){for(var index=void 0,result=void 0;this.indexes[id]<this.nodes.length&&(index=this.indexes[id],!1!==(result=callback(this.nodes[index],index)));)this.indexes[id]+=1;return delete this.indexes[id],result}},Container.prototype.walk=function(callback){return this.each(function(child,i){var result=callback(child,i);return!1!==result&&child.walk&&(result=child.walk(callback)),result})},Container.prototype.walkDecls=function(prop,callback){return callback?prop instanceof RegExp?this.walk(function(child,i){if("decl"===child.type&&prop.test(child.prop))return callback(child,i)}):this.walk(function(child,i){if("decl"===child.type&&child.prop===prop)return callback(child,i)}):(callback=prop,this.walk(function(child,i){if("decl"===child.type)return callback(child,i)}))},Container.prototype.walkRules=function(selector,callback){return callback?selector instanceof RegExp?this.walk(function(child,i){if("rule"===child.type&&selector.test(child.selector))return callback(child,i)}):this.walk(function(child,i){if("rule"===child.type&&child.selector===selector)return callback(child,i)}):(callback=selector,this.walk(function(child,i){if("rule"===child.type)return callback(child,i)}))},Container.prototype.walkAtRules=function(name,callback){return callback?name instanceof RegExp?this.walk(function(child,i){if("atrule"===child.type&&name.test(child.name))return callback(child,i)}):this.walk(function(child,i){if("atrule"===child.type&&child.name===name)return callback(child,i)}):(callback=name,this.walk(function(child,i){if("atrule"===child.type)return callback(child,i)}))},Container.prototype.walkComments=function(callback){return this.walk(function(child,i){if("comment"===child.type)return callback(child,i)})},Container.prototype.append=function(){for(var _len=arguments.length,children=Array(_len),_key=0;_key<_len;_key++)children[_key]=arguments[_key];var _iterator=children,_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}var child=_ref,_iterator2=this.normalize(child,this.last),_isArray2=Array.isArray(_iterator2),_i2=0;for(_iterator2=_isArray2?_iterator2:_iterator2[Symbol.iterator]();;){var _ref2;if(_isArray2){if(_i2>=_iterator2.length)break;_ref2=_iterator2[_i2++]}else{if((_i2=_iterator2.next()).done)break;_ref2=_i2.value}var node=_ref2;this.nodes.push(node)}}return this},Container.prototype.prepend=function(){for(var _len2=arguments.length,children=Array(_len2),_key2=0;_key2<_len2;_key2++)children[_key2]=arguments[_key2];var _iterator3=children=children.reverse(),_isArray3=Array.isArray(_iterator3),_i3=0;for(_iterator3=_isArray3?_iterator3:_iterator3[Symbol.iterator]();;){var _ref3;if(_isArray3){if(_i3>=_iterator3.length)break;_ref3=_iterator3[_i3++]}else{if((_i3=_iterator3.next()).done)break;_ref3=_i3.value}var child=_ref3,nodes=this.normalize(child,this.first,"prepend").reverse(),_iterator4=nodes,_isArray4=Array.isArray(_iterator4),_i4=0;for(_iterator4=_isArray4?_iterator4:_iterator4[Symbol.iterator]();;){var _ref4;if(_isArray4){if(_i4>=_iterator4.length)break;_ref4=_iterator4[_i4++]}else{if((_i4=_iterator4.next()).done)break;_ref4=_i4.value}var node=_ref4;this.nodes.unshift(node)}for(var id in this.indexes)this.indexes[id]=this.indexes[id]+nodes.length}return this},Container.prototype.cleanRaws=function(keepBetween){if(_Node.prototype.cleanRaws.call(this,keepBetween),this.nodes){var _iterator5=this.nodes,_isArray5=Array.isArray(_iterator5),_i5=0;for(_iterator5=_isArray5?_iterator5:_iterator5[Symbol.iterator]();;){var _ref5;if(_isArray5){if(_i5>=_iterator5.length)break;_ref5=_iterator5[_i5++]}else{if((_i5=_iterator5.next()).done)break;_ref5=_i5.value}_ref5.cleanRaws(keepBetween)}}},Container.prototype.insertBefore=function(exist,add){var type=0===(exist=this.index(exist))&&"prepend",nodes=this.normalize(add,this.nodes[exist],type).reverse(),_iterator6=nodes,_isArray6=Array.isArray(_iterator6),_i6=0;for(_iterator6=_isArray6?_iterator6:_iterator6[Symbol.iterator]();;){var _ref6;if(_isArray6){if(_i6>=_iterator6.length)break;_ref6=_iterator6[_i6++]}else{if((_i6=_iterator6.next()).done)break;_ref6=_i6.value}var node=_ref6;this.nodes.splice(exist,0,node)}var index=void 0;for(var id in this.indexes)exist<=(index=this.indexes[id])&&(this.indexes[id]=index+nodes.length);return this},Container.prototype.insertAfter=function(exist,add){exist=this.index(exist);var nodes=this.normalize(add,this.nodes[exist]).reverse(),_iterator7=nodes,_isArray7=Array.isArray(_iterator7),_i7=0;for(_iterator7=_isArray7?_iterator7:_iterator7[Symbol.iterator]();;){var _ref7;if(_isArray7){if(_i7>=_iterator7.length)break;_ref7=_iterator7[_i7++]}else{if((_i7=_iterator7.next()).done)break;_ref7=_i7.value}var node=_ref7;this.nodes.splice(exist+1,0,node)}var index=void 0;for(var id in this.indexes)exist<(index=this.indexes[id])&&(this.indexes[id]=index+nodes.length);return this},Container.prototype.removeChild=function(child){child=this.index(child),this.nodes[child].parent=void 0,this.nodes.splice(child,1);var index=void 0;for(var id in this.indexes)child<=(index=this.indexes[id])&&(this.indexes[id]=index-1);return this},Container.prototype.removeAll=function(){var _iterator8=this.nodes,_isArray8=Array.isArray(_iterator8),_i8=0;for(_iterator8=_isArray8?_iterator8:_iterator8[Symbol.iterator]();;){var _ref8;if(_isArray8){if(_i8>=_iterator8.length)break;_ref8=_iterator8[_i8++]}else{if((_i8=_iterator8.next()).done)break;_ref8=_i8.value}_ref8.parent=void 0}return this.nodes=[],this},Container.prototype.replaceValues=function(pattern,opts,callback){return callback||(callback=opts,opts={}),this.walkDecls(function(decl){opts.props&&-1===opts.props.indexOf(decl.prop)||opts.fast&&-1===decl.value.indexOf(opts.fast)||(decl.value=decl.value.replace(pattern,callback))}),this},Container.prototype.every=function(condition){return this.nodes.every(condition)},Container.prototype.some=function(condition){return this.nodes.some(condition)},Container.prototype.index=function(child){return"number"==typeof child?child:this.nodes.indexOf(child)},Container.prototype.normalize=function(nodes,sample){var _this2=this;if("string"==typeof nodes)nodes=function cleanSource(nodes){return nodes.map(function(i){return i.nodes&&(i.nodes=cleanSource(i.nodes)),delete i.source,i})}(require("./parse")(nodes).nodes);else if(Array.isArray(nodes)){var _iterator9=nodes=nodes.slice(0),_isArray9=Array.isArray(_iterator9),_i9=0;for(_iterator9=_isArray9?_iterator9:_iterator9[Symbol.iterator]();;){var _ref9;if(_isArray9){if(_i9>=_iterator9.length)break;_ref9=_iterator9[_i9++]}else{if((_i9=_iterator9.next()).done)break;_ref9=_i9.value}var i=_ref9;i.parent&&i.parent.removeChild(i,"ignore")}}else if("root"===nodes.type){var _iterator10=nodes=nodes.nodes.slice(0),_isArray10=Array.isArray(_iterator10),_i11=0;for(_iterator10=_isArray10?_iterator10:_iterator10[Symbol.iterator]();;){var _ref10;if(_isArray10){if(_i11>=_iterator10.length)break;_ref10=_iterator10[_i11++]}else{if((_i11=_iterator10.next()).done)break;_ref10=_i11.value}var _i10=_ref10;_i10.parent&&_i10.parent.removeChild(_i10,"ignore")}}else if(nodes.type)nodes=[nodes];else if(nodes.prop){if(void 0===nodes.value)throw new Error("Value field is missed in node creation");"string"!=typeof nodes.value&&(nodes.value=String(nodes.value)),nodes=[new _declaration2.default(nodes)]}else if(nodes.selector){nodes=[new(require("./rule"))(nodes)]}else if(nodes.name){nodes=[new(require("./at-rule"))(nodes)]}else{if(!nodes.text)throw new Error("Unknown node type in node creation");nodes=[new _comment2.default(nodes)]}return nodes.map(function(i){return"function"!=typeof i.before&&(i=_this2.rebuild(i)),i.parent&&i.parent.removeChild(i),void 0===i.raws.before&&sample&&void 0!==sample.raws.before&&(i.raws.before=sample.raws.before.replace(/[^\s]/g,"")),i.parent=_this2,i})},Container.prototype.rebuild=function(node,parent){var _this3=this,fix=void 0;if("root"===node.type){var Root=require("./root");fix=new Root}else if("atrule"===node.type){var AtRule=require("./at-rule");fix=new AtRule}else if("rule"===node.type){var Rule=require("./rule");fix=new Rule}else"decl"===node.type?fix=new _declaration2.default:"comment"===node.type&&(fix=new _comment2.default);for(var i in node)"nodes"===i?fix.nodes=node.nodes.map(function(j){return _this3.rebuild(j,fix)}):"parent"===i&&parent?fix.parent=parent:node.hasOwnProperty(i)&&(fix[i]=node[i]);return fix},_createClass(Container,[{key:"first",get:function(){if(this.nodes)return this.nodes[0]}},{key:"last",get:function(){if(this.nodes)return this.nodes[this.nodes.length-1]}}]),Container}(_interopRequireDefault(require("./node")).default);exports.default=Container,module.exports=exports.default},{"./at-rule":63,"./comment":64,"./declaration":67,"./node":72,"./parse":73,"./root":79,"./rule":80}],66:[function(require,module,exports){"use strict";exports.__esModule=!0;var _supportsColor2=_interopRequireDefault(require("supports-color")),_chalk2=_interopRequireDefault(require("chalk")),_terminalHighlight2=_interopRequireDefault(require("./terminal-highlight"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CssSyntaxError=function(){function CssSyntaxError(message,line,column,source,file,plugin){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CssSyntaxError),this.name="CssSyntaxError",this.reason=message,file&&(this.file=file),source&&(this.source=source),plugin&&(this.plugin=plugin),void 0!==line&&void 0!==column&&(this.line=line,this.column=column),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,CssSyntaxError)}return CssSyntaxError.prototype.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},CssSyntaxError.prototype.showSourceCode=function(color){var _this=this;if(!this.source)return"";var css=this.source;void 0===color&&(color=_supportsColor2.default.stdout),color&&(css=(0,_terminalHighlight2.default)(css));var lines=css.split(/\r?\n/),start=Math.max(this.line-3,0),end=Math.min(this.line+2,lines.length),maxWidth=String(end).length;function mark(text){return color&&_chalk2.default.red?_chalk2.default.red.bold(text):text}function aside(text){return color&&_chalk2.default.gray?_chalk2.default.gray(text):text}return lines.slice(start,end).map(function(line,index){var number=start+1+index,gutter=" "+(" "+number).slice(-maxWidth)+" | ";if(number!==_this.line)return" "+aside(gutter)+line;var spacing=aside(gutter.replace(/\d/g," "))+line.slice(0,_this.column-1).replace(/[^\t]/g," ");return mark(">")+aside(gutter)+line+"\n "+spacing+mark("^")}).join("\n")},CssSyntaxError.prototype.toString=function(){var code=this.showSourceCode();return code&&(code="\n\n"+code+"\n"),this.name+": "+this.message+code},CssSyntaxError}();exports.default=CssSyntaxError,module.exports=exports.default},{"./terminal-highlight":83,chalk:4,"supports-color":4}],67:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_node=require("./node");var Declaration=function(_Node){function Declaration(defaults){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Declaration);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Node.call(this,defaults));return _this.type="decl",_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Declaration,_Node),Declaration}(((obj=_node)&&obj.__esModule?obj:{default:obj}).default);exports.default=Declaration,module.exports=exports.default},{"./node":72}],68:[function(require,module,exports){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_cssSyntaxError2=_interopRequireDefault(require("./css-syntax-error")),_previousMap2=_interopRequireDefault(require("./previous-map")),_path2=_interopRequireDefault(require("path"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var sequence=0,Input=function(){function Input(css){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Input),null===css||"object"===(void 0===css?"undefined":_typeof(css))&&!css.toString)throw new Error("PostCSS received "+css+" instead of CSS string");this.css=css.toString(),"\ufeff"!==this.css[0]&&"￾"!==this.css[0]||(this.css=this.css.slice(1)),opts.from&&(/^\w+:\/\//.test(opts.from)?this.file=opts.from:this.file=_path2.default.resolve(opts.from));var map=new _previousMap2.default(this.css,opts);if(map.text){var file=(this.map=map).consumer().file;!this.file&&file&&(this.file=this.mapResolve(file))}this.file||(sequence+=1,this.id="<input css "+sequence+">"),this.map&&(this.map.file=this.from)}return Input.prototype.error=function(message,line,column){var opts=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},result=void 0,origin=this.origin(line,column);return(result=origin?new _cssSyntaxError2.default(message,origin.line,origin.column,origin.source,origin.file,opts.plugin):new _cssSyntaxError2.default(message,line,column,this.css,this.file,opts.plugin)).input={line:line,column:column,source:this.css},this.file&&(result.input.file=this.file),result},Input.prototype.origin=function(line,column){if(!this.map)return!1;var consumer=this.map.consumer(),from=consumer.originalPositionFor({line:line,column:column});if(!from.source)return!1;var result={file:this.mapResolve(from.source),line:from.line,column:from.column},source=consumer.sourceContentFor(from.source);return source&&(result.source=source),result},Input.prototype.mapResolve=function(file){return/^\w+:\/\//.test(file)?file:_path2.default.resolve(this.map.consumer().sourceRoot||".",file)},_createClass(Input,[{key:"from",get:function(){return this.file||this.id}}]),Input}();exports.default=Input,module.exports=exports.default},{"./css-syntax-error":66,"./previous-map":76,path:62}],69:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_mapGenerator2=_interopRequireDefault(require("./map-generator")),_stringify3=_interopRequireDefault(require("./stringify")),_warnOnce2=_interopRequireDefault(require("./warn-once")),_result2=_interopRequireDefault(require("./result")),_parse2=_interopRequireDefault(require("./parse"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function isPromise(obj){return"object"===(void 0===obj?"undefined":_typeof(obj))&&"function"==typeof obj.then}var LazyResult=function(){function LazyResult(processor,css,opts){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LazyResult),this.stringified=!1,this.processed=!1;var root=void 0;if("object"===(void 0===css?"undefined":_typeof(css))&&null!==css&&"root"===css.type)root=css;else if(css instanceof LazyResult||css instanceof _result2.default)root=css.root,css.map&&(void 0===opts.map&&(opts.map={}),opts.map.inline||(opts.map.inline=!1),opts.map.prev=css.map);else{var parser=_parse2.default;opts.syntax&&(parser=opts.syntax.parse),opts.parser&&(parser=opts.parser),parser.parse&&(parser=parser.parse);try{root=parser(css,opts)}catch(error){this.error=error}}this.result=new _result2.default(processor,root,opts)}return LazyResult.prototype.warnings=function(){return this.sync().warnings()},LazyResult.prototype.toString=function(){return this.css},LazyResult.prototype.then=function(onFulfilled,onRejected){return"from"in this.opts||(0,_warnOnce2.default)("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning."),this.async().then(onFulfilled,onRejected)},LazyResult.prototype.catch=function(onRejected){return this.async().catch(onRejected)},LazyResult.prototype.handleError=function(error,plugin){try{if("CssSyntaxError"!==(this.error=error).name||error.plugin){if(plugin.postcssVersion){var pluginName=plugin.postcssPlugin,pluginVer=plugin.postcssVersion,runtimeVer=this.result.processor.version,a=pluginVer.split("."),b=runtimeVer.split(".");(a[0]!==b[0]||parseInt(a[1])>parseInt(b[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+runtimeVer+", but "+pluginName+" uses "+pluginVer+". Perhaps this is the source of the error below.")}}else error.plugin=plugin.postcssPlugin,error.setMessage()}catch(err){console&&console.error&&console.error(err)}},LazyResult.prototype.asyncTick=function(resolve,reject){var _this=this;if(this.plugin>=this.processor.plugins.length)return this.processed=!0,resolve();try{var plugin=this.processor.plugins[this.plugin],promise=this.run(plugin);this.plugin+=1,isPromise(promise)?promise.then(function(){_this.asyncTick(resolve,reject)}).catch(function(error){_this.handleError(error,plugin),_this.processed=!0,reject(error)}):this.asyncTick(resolve,reject)}catch(error){this.processed=!0,reject(error)}},LazyResult.prototype.async=function(){var _this2=this;return this.processed?new Promise(function(resolve,reject){_this2.error?reject(_this2.error):resolve(_this2.stringify())}):(this.processing||(this.processing=new Promise(function(resolve,reject){if(_this2.error)return reject(_this2.error);_this2.plugin=0,_this2.asyncTick(resolve,reject)}).then(function(){return _this2.processed=!0,_this2.stringify()})),this.processing)},LazyResult.prototype.sync=function(){if(this.processed)return this.result;if(this.processed=!0,this.processing)throw new Error("Use process(css).then(cb) to work with async plugins");if(this.error)throw this.error;var _iterator=this.result.processor.plugins,_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}var plugin=_ref;if(isPromise(this.run(plugin)))throw new Error("Use process(css).then(cb) to work with async plugins")}return this.result},LazyResult.prototype.run=function(plugin){this.result.lastPlugin=plugin;try{return plugin(this.result.root,this.result)}catch(error){throw this.handleError(error,plugin),error}},LazyResult.prototype.stringify=function(){if(this.stringified)return this.result;this.stringified=!0,this.sync();var opts=this.result.opts,str=_stringify3.default;opts.syntax&&(str=opts.syntax.stringify),opts.stringifier&&(str=opts.stringifier),str.stringify&&(str=str.stringify);var data=new _mapGenerator2.default(str,this.result.root,this.result.opts).generate();return this.result.css=data[0],this.result.map=data[1],this.result},_createClass(LazyResult,[{key:"processor",get:function(){return this.result.processor}},{key:"opts",get:function(){return this.result.opts}},{key:"css",get:function(){return this.stringify().css}},{key:"content",get:function(){return this.stringify().content}},{key:"map",get:function(){return this.stringify().map}},{key:"root",get:function(){return this.sync().root}},{key:"messages",get:function(){return this.sync().messages}}]),LazyResult}();exports.default=LazyResult,module.exports=exports.default},{"./map-generator":71,"./parse":73,"./result":78,"./stringify":82,"./warn-once":86}],70:[function(require,module,exports){"use strict";exports.__esModule=!0;var list={split:function(string,separators,last){for(var array=[],current="",split=!1,func=0,quote=!1,escape=!1,i=0;i<string.length;i++){var letter=string[i];quote?escape?escape=!1:"\\"===letter?escape=!0:letter===quote&&(quote=!1):'"'===letter||"'"===letter?quote=letter:"("===letter?func+=1:")"===letter?0<func&&(func-=1):0===func&&-1!==separators.indexOf(letter)&&(split=!0),split?(""!==current&&array.push(current.trim()),current="",split=!1):current+=letter}return(last||""!==current)&&array.push(current.trim()),array},space:function(string){return list.split(string,[" ","\n","\t"])},comma:function(string){return list.split(string,[","],!0)}};exports.default=list,module.exports=exports.default},{}],71:[function(require,module,exports){(function(Buffer){"use strict";exports.__esModule=!0;var _sourceMap2=_interopRequireDefault(require("source-map")),_path2=_interopRequireDefault(require("path"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var MapGenerator=function(){function MapGenerator(stringify,root,opts){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MapGenerator),this.stringify=stringify,this.mapOpts=opts.map||{},this.root=root,this.opts=opts}return MapGenerator.prototype.isMap=function(){return void 0!==this.opts.map?!!this.opts.map:0<this.previous().length},MapGenerator.prototype.previous=function(){var _this=this;return this.previousMaps||(this.previousMaps=[],this.root.walk(function(node){if(node.source&&node.source.input.map){var map=node.source.input.map;-1===_this.previousMaps.indexOf(map)&&_this.previousMaps.push(map)}})),this.previousMaps},MapGenerator.prototype.isInline=function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var annotation=this.mapOpts.annotation;return(void 0===annotation||!0===annotation)&&(!this.previous().length||this.previous().some(function(i){return i.inline}))},MapGenerator.prototype.isSourcesContent=function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some(function(i){return i.withContent()})},MapGenerator.prototype.clearAnnotation=function(){if(!1!==this.mapOpts.annotation)for(var node=void 0,i=this.root.nodes.length-1;0<=i;i--)"comment"===(node=this.root.nodes[i]).type&&0===node.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(i)},MapGenerator.prototype.setSourcesContent=function(){var _this2=this,already={};this.root.walk(function(node){if(node.source){var from=node.source.input.from;if(from&&!already[from]){already[from]=!0;var relative=_this2.relative(from);_this2.map.setSourceContent(relative,node.source.input.css)}}})},MapGenerator.prototype.applyPrevMaps=function(){var _iterator=this.previous(),_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}var prev=_ref,from=this.relative(prev.file),root=prev.root||_path2.default.dirname(prev.file),map=void 0;!1===this.mapOpts.sourcesContent?(map=new _sourceMap2.default.SourceMapConsumer(prev.text)).sourcesContent&&(map.sourcesContent=map.sourcesContent.map(function(){return null})):map=prev.consumer(),this.map.applySourceMap(map,from,this.relative(root))}},MapGenerator.prototype.isAnnotation=function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some(function(i){return i.annotation}))},MapGenerator.prototype.toBase64=function(str){return Buffer?Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from(str).toString("base64"):new Buffer(str).toString("base64"):window.btoa(unescape(encodeURIComponent(str)))},MapGenerator.prototype.addAnnotation=function(){var content=void 0;content=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:this.outputFile()+".map";var eol="\n";-1!==this.css.indexOf("\r\n")&&(eol="\r\n"),this.css+=eol+"/*# sourceMappingURL="+content+" */"},MapGenerator.prototype.outputFile=function(){return this.opts.to?this.relative(this.opts.to):this.opts.from?this.relative(this.opts.from):"to.css"},MapGenerator.prototype.generateMap=function(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),0<this.previous().length&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},MapGenerator.prototype.relative=function(file){if(0===file.indexOf("<"))return file;if(/^\w+:\/\//.test(file))return file;var from=this.opts.to?_path2.default.dirname(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(from=_path2.default.dirname(_path2.default.resolve(from,this.mapOpts.annotation))),file=_path2.default.relative(from,file),"\\"===_path2.default.sep?file.replace(/\\/g,"/"):file},MapGenerator.prototype.sourcePath=function(node){return this.mapOpts.from?this.mapOpts.from:this.relative(node.source.input.from)},MapGenerator.prototype.generateString=function(){var _this3=this;this.css="",this.map=new _sourceMap2.default.SourceMapGenerator({file:this.outputFile()});var line=1,column=1,lines=void 0,last=void 0;this.stringify(this.root,function(str,node,type){_this3.css+=str,node&&"end"!==type&&(node.source&&node.source.start?_this3.map.addMapping({source:_this3.sourcePath(node),generated:{line:line,column:column-1},original:{line:node.source.start.line,column:node.source.start.column-1}}):_this3.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:line,column:column-1}})),(lines=str.match(/\n/g))?(line+=lines.length,last=str.lastIndexOf("\n"),column=str.length-last):column+=str.length,node&&"start"!==type&&(node.source&&node.source.end?_this3.map.addMapping({source:_this3.sourcePath(node),generated:{line:line,column:column-1},original:{line:node.source.end.line,column:node.source.end.column}}):_this3.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:line,column:column-1}}))})},MapGenerator.prototype.generate=function(){if(this.clearAnnotation(),this.isMap())return this.generateMap();var result="";return this.stringify(this.root,function(i){result+=i}),[result]},MapGenerator}();exports.default=MapGenerator,module.exports=exports.default}).call(this,require("buffer").Buffer)},{buffer:5,path:62,"source-map":119}],72:[function(require,module,exports){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_cssSyntaxError2=_interopRequireDefault(require("./css-syntax-error")),_stringifier2=_interopRequireDefault(require("./stringifier")),_stringify2=_interopRequireDefault(require("./stringify")),_warnOnce2=_interopRequireDefault(require("./warn-once"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Node=function(){function Node(){var defaults=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Node),this.raws={},"object"!==(void 0===defaults?"undefined":_typeof(defaults))&&void 0!==defaults)throw new Error("PostCSS nodes constructor accepts object, not "+JSON.stringify(defaults));for(var name in defaults)this[name]=defaults[name]}return Node.prototype.error=function(message){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(this.source){var pos=this.positionBy(opts);return this.source.input.error(message,pos.line,pos.column,opts)}return new _cssSyntaxError2.default(message)},Node.prototype.warn=function(result,text,opts){var data={node:this};for(var i in opts)data[i]=opts[i];return result.warn(text,data)},Node.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},Node.prototype.toString=function(){var stringifier=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_stringify2.default;stringifier.stringify&&(stringifier=stringifier.stringify);var result="";return stringifier(this,function(i){result+=i}),result},Node.prototype.clone=function(){var overrides=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},cloned=function cloneNode(obj,parent){var cloned=new obj.constructor;for(var i in obj)if(obj.hasOwnProperty(i)){var value=obj[i],type=void 0===value?"undefined":_typeof(value);"parent"===i&&"object"===type?parent&&(cloned[i]=parent):"source"===i?cloned[i]=value:value instanceof Array?cloned[i]=value.map(function(j){return cloneNode(j,cloned)}):("object"===type&&null!==value&&(value=cloneNode(value)),cloned[i]=value)}return cloned}(this);for(var name in overrides)cloned[name]=overrides[name];return cloned},Node.prototype.cloneBefore=function(){var overrides=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},cloned=this.clone(overrides);return this.parent.insertBefore(this,cloned),cloned},Node.prototype.cloneAfter=function(){var overrides=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},cloned=this.clone(overrides);return this.parent.insertAfter(this,cloned),cloned},Node.prototype.replaceWith=function(){if(this.parent){for(var _len=arguments.length,nodes=Array(_len),_key=0;_key<_len;_key++)nodes[_key]=arguments[_key];var _iterator=nodes,_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}var node=_ref;this.parent.insertBefore(this,node)}this.remove()}return this},Node.prototype.moveTo=function(newParent){return(0,_warnOnce2.default)("Node#moveTo was deprecated. Use Container#append."),this.cleanRaws(this.root()===newParent.root()),this.remove(),newParent.append(this),this},Node.prototype.moveBefore=function(otherNode){return(0,_warnOnce2.default)("Node#moveBefore was deprecated. Use Node#before."),this.cleanRaws(this.root()===otherNode.root()),this.remove(),otherNode.parent.insertBefore(otherNode,this),this},Node.prototype.moveAfter=function(otherNode){return(0,_warnOnce2.default)("Node#moveAfter was deprecated. Use Node#after."),this.cleanRaws(this.root()===otherNode.root()),this.remove(),otherNode.parent.insertAfter(otherNode,this),this},Node.prototype.next=function(){if(this.parent){var index=this.parent.index(this);return this.parent.nodes[index+1]}},Node.prototype.prev=function(){if(this.parent){var index=this.parent.index(this);return this.parent.nodes[index-1]}},Node.prototype.before=function(add){return this.parent.insertBefore(this,add),this},Node.prototype.after=function(add){return this.parent.insertAfter(this,add),this},Node.prototype.toJSON=function(){var fixed={};for(var name in this)if(this.hasOwnProperty(name)&&"parent"!==name){var value=this[name];value instanceof Array?fixed[name]=value.map(function(i){return"object"===(void 0===i?"undefined":_typeof(i))&&i.toJSON?i.toJSON():i}):"object"===(void 0===value?"undefined":_typeof(value))&&value.toJSON?fixed[name]=value.toJSON():fixed[name]=value}return fixed},Node.prototype.raw=function(prop,defaultType){return(new _stringifier2.default).raw(this,prop,defaultType)},Node.prototype.root=function(){for(var result=this;result.parent;)result=result.parent;return result},Node.prototype.cleanRaws=function(keepBetween){delete this.raws.before,delete this.raws.after,keepBetween||delete this.raws.between},Node.prototype.positionInside=function(index){for(var string=this.toString(),column=this.source.start.column,line=this.source.start.line,i=0;i<index;i++)"\n"===string[i]?line+=column=1:column+=1;return{line:line,column:column}},Node.prototype.positionBy=function(opts){var pos=this.source.start;if(opts.index)pos=this.positionInside(opts.index);else if(opts.word){var index=this.toString().indexOf(opts.word);-1!==index&&(pos=this.positionInside(index))}return pos},Node}();exports.default=Node,module.exports=exports.default},{"./css-syntax-error":66,"./stringifier":81,"./stringify":82,"./warn-once":86}],73:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(css,opts){if(opts&&opts.safe)throw new Error('Option safe was removed. Use parser: require("postcss-safe-parser")');var input=new _input2.default(css,opts),parser=new _parser2.default(input);try{parser.parse()}catch(e){throw"CssSyntaxError"===e.name&&opts&&opts.from&&(/\.scss$/i.test(opts.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(opts.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(opts.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return parser.root};var _parser2=_interopRequireDefault(require("./parser")),_input2=_interopRequireDefault(require("./input"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}module.exports=exports.default},{"./input":68,"./parser":74}],74:[function(require,module,exports){"use strict";exports.__esModule=!0;var _declaration2=_interopRequireDefault(require("./declaration")),_tokenize2=_interopRequireDefault(require("./tokenize")),_comment2=_interopRequireDefault(require("./comment")),_atRule2=_interopRequireDefault(require("./at-rule")),_root2=_interopRequireDefault(require("./root")),_rule2=_interopRequireDefault(require("./rule"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Parser=function(){function Parser(input){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Parser),this.input=input,this.root=new _root2.default,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:input,start:{line:1,column:1}}}return Parser.prototype.createTokenizer=function(){this.tokenizer=(0,_tokenize2.default)(this.input)},Parser.prototype.parse=function(){for(var token=void 0;!this.tokenizer.endOfFile();)switch((token=this.tokenizer.nextToken())[0]){case"space":this.spaces+=token[1];break;case";":this.freeSemicolon(token);break;case"}":this.end(token);break;case"comment":this.comment(token);break;case"at-word":this.atrule(token);break;case"{":this.emptyRule(token);break;default:this.other(token)}this.endFile()},Parser.prototype.comment=function(token){var node=new _comment2.default;this.init(node,token[2],token[3]),node.source.end={line:token[4],column:token[5]};var text=token[1].slice(2,-2);if(/^\s*$/.test(text))node.text="",node.raws.left=text,node.raws.right="";else{var match=text.match(/^(\s*)([^]*[^\s])(\s*)$/);node.text=match[2],node.raws.left=match[1],node.raws.right=match[3]}},Parser.prototype.emptyRule=function(token){var node=new _rule2.default;this.init(node,token[2],token[3]),node.selector="",node.raws.between="",this.current=node},Parser.prototype.other=function(start){for(var end=!1,type=null,colon=!1,bracket=null,brackets=[],tokens=[],token=start;token;){if(type=token[0],tokens.push(token),"("===type||"["===type)bracket||(bracket=token),brackets.push("("===type?")":"]");else if(0===brackets.length){if(";"===type){if(colon)return void this.decl(tokens);break}if("{"===type)return void this.rule(tokens);if("}"===type){this.tokenizer.back(tokens.pop()),end=!0;break}":"===type&&(colon=!0)}else type===brackets[brackets.length-1]&&(brackets.pop(),0===brackets.length&&(bracket=null));token=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(end=!0),0<brackets.length&&this.unclosedBracket(bracket),end&&colon){for(;tokens.length&&("space"===(token=tokens[tokens.length-1][0])||"comment"===token);)this.tokenizer.back(tokens.pop());this.decl(tokens)}else this.unknownWord(tokens)},Parser.prototype.rule=function(tokens){tokens.pop();var node=new _rule2.default;this.init(node,tokens[0][2],tokens[0][3]),node.raws.between=this.spacesAndCommentsFromEnd(tokens),this.raw(node,"selector",tokens),this.current=node},Parser.prototype.decl=function(tokens){var node=new _declaration2.default;this.init(node);var last=tokens[tokens.length-1];for(";"===last[0]&&(this.semicolon=!0,tokens.pop()),last[4]?node.source.end={line:last[4],column:last[5]}:node.source.end={line:last[2],column:last[3]};"word"!==tokens[0][0];)1===tokens.length&&this.unknownWord(tokens),node.raws.before+=tokens.shift()[1];for(node.source.start={line:tokens[0][2],column:tokens[0][3]},node.prop="";tokens.length;){var type=tokens[0][0];if(":"===type||"space"===type||"comment"===type)break;node.prop+=tokens.shift()[1]}node.raws.between="";for(var token=void 0;tokens.length;){if(":"===(token=tokens.shift())[0]){node.raws.between+=token[1];break}node.raws.between+=token[1]}"_"!==node.prop[0]&&"*"!==node.prop[0]||(node.raws.before+=node.prop[0],node.prop=node.prop.slice(1)),node.raws.between+=this.spacesAndCommentsFromStart(tokens),this.precheckMissedSemicolon(tokens);for(var i=tokens.length-1;0<i;i--){if("!important"===(token=tokens[i])[1].toLowerCase()){node.important=!0;var string=this.stringFrom(tokens,i);" !important"!==(string=this.spacesFromEnd(tokens)+string)&&(node.raws.important=string);break}if("important"===token[1].toLowerCase()){for(var cache=tokens.slice(0),str="",j=i;0<j;j--){var _type=cache[j][0];if(0===str.trim().indexOf("!")&&"space"!==_type)break;str=cache.pop()[1]+str}0===str.trim().indexOf("!")&&(node.important=!0,node.raws.important=str,tokens=cache)}if("space"!==token[0]&&"comment"!==token[0])break}this.raw(node,"value",tokens),-1!==node.value.indexOf(":")&&this.checkMissedSemicolon(tokens)},Parser.prototype.atrule=function(token){var node=new _atRule2.default;node.name=token[1].slice(1),""===node.name&&this.unnamedAtrule(node,token),this.init(node,token[2],token[3]);for(var prev=void 0,shift=void 0,last=!1,open=!1,params=[];!this.tokenizer.endOfFile();){if(";"===(token=this.tokenizer.nextToken())[0]){node.source.end={line:token[2],column:token[3]},this.semicolon=!0;break}if("{"===token[0]){open=!0;break}if("}"===token[0]){if(0<params.length){for(prev=params[shift=params.length-1];prev&&"space"===prev[0];)prev=params[--shift];prev&&(node.source.end={line:prev[4],column:prev[5]})}this.end(token);break}if(params.push(token),this.tokenizer.endOfFile()){last=!0;break}}node.raws.between=this.spacesAndCommentsFromEnd(params),params.length?(node.raws.afterName=this.spacesAndCommentsFromStart(params),this.raw(node,"params",params),last&&(token=params[params.length-1],node.source.end={line:token[4],column:token[5]},this.spaces=node.raws.between,node.raws.between="")):(node.raws.afterName="",node.params=""),open&&(node.nodes=[],this.current=node)},Parser.prototype.end=function(token){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end={line:token[2],column:token[3]},this.current=this.current.parent):this.unexpectedClose(token)},Parser.prototype.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces},Parser.prototype.freeSemicolon=function(token){if(this.spaces+=token[1],this.current.nodes){var prev=this.current.nodes[this.current.nodes.length-1];prev&&"rule"===prev.type&&!prev.raws.ownSemicolon&&(prev.raws.ownSemicolon=this.spaces,this.spaces="")}},Parser.prototype.init=function(node,line,column){this.current.push(node),node.source={start:{line:line,column:column},input:this.input},node.raws.before=this.spaces,this.spaces="","comment"!==node.type&&(this.semicolon=!1)},Parser.prototype.raw=function(node,prop,tokens){for(var token=void 0,type=void 0,length=tokens.length,value="",clean=!0,next=void 0,prev=void 0,pattern=/^([.|#])?([\w])+/i,i=0;i<length;i+=1)"comment"!==(type=(token=tokens[i])[0])||"rule"!==node.type?"comment"===type||"space"===type&&i===length-1?clean=!1:value+=token[1]:(prev=tokens[i-1],next=tokens[i+1],"space"!==prev[0]&&"space"!==next[0]&&pattern.test(prev[1])&&pattern.test(next[1])?value+=token[1]:clean=!1);if(!clean){var raw=tokens.reduce(function(all,i){return all+i[1]},"");node.raws[prop]={value:value,raw:raw}}node[prop]=value},Parser.prototype.spacesAndCommentsFromEnd=function(tokens){for(var lastTokenType=void 0,spaces="";tokens.length&&("space"===(lastTokenType=tokens[tokens.length-1][0])||"comment"===lastTokenType);)spaces=tokens.pop()[1]+spaces;return spaces},Parser.prototype.spacesAndCommentsFromStart=function(tokens){for(var next=void 0,spaces="";tokens.length&&("space"===(next=tokens[0][0])||"comment"===next);)spaces+=tokens.shift()[1];return spaces},Parser.prototype.spacesFromEnd=function(tokens){for(var spaces="";tokens.length&&"space"===tokens[tokens.length-1][0];)spaces=tokens.pop()[1]+spaces;return spaces},Parser.prototype.stringFrom=function(tokens,from){for(var result="",i=from;i<tokens.length;i++)result+=tokens[i][1];return tokens.splice(from,tokens.length-from),result},Parser.prototype.colon=function(tokens){for(var brackets=0,token=void 0,type=void 0,prev=void 0,i=0;i<tokens.length;i++){if("("===(type=(token=tokens[i])[0]))brackets+=1;else if(")"===type)brackets-=1;else if(0===brackets&&":"===type){if(prev){if("word"===prev[0]&&"progid"===prev[1])continue;return i}this.doubleColon(token)}prev=token}return!1},Parser.prototype.unclosedBracket=function(bracket){throw this.input.error("Unclosed bracket",bracket[2],bracket[3])},Parser.prototype.unknownWord=function(tokens){throw this.input.error("Unknown word",tokens[0][2],tokens[0][3])},Parser.prototype.unexpectedClose=function(token){throw this.input.error("Unexpected }",token[2],token[3])},Parser.prototype.unclosedBlock=function(){var pos=this.current.source.start;throw this.input.error("Unclosed block",pos.line,pos.column)},Parser.prototype.doubleColon=function(token){throw this.input.error("Double colon",token[2],token[3])},Parser.prototype.unnamedAtrule=function(node,token){throw this.input.error("At-rule without name",token[2],token[3])},Parser.prototype.precheckMissedSemicolon=function(tokens){},Parser.prototype.checkMissedSemicolon=function(tokens){var colon=this.colon(tokens);if(!1!==colon){for(var founded=0,token=void 0,j=colon-1;0<=j&&("space"===(token=tokens[j])[0]||2!==(founded+=1));j--);throw this.input.error("Missed semicolon",token[2],token[3])}},Parser}();exports.default=Parser,module.exports=exports.default},{"./at-rule":63,"./comment":64,"./declaration":67,"./root":79,"./rule":80,"./tokenize":84}],75:[function(require,module,exports){"use strict";exports.__esModule=!0;var _declaration2=_interopRequireDefault(require("./declaration")),_processor2=_interopRequireDefault(require("./processor")),_stringify2=_interopRequireDefault(require("./stringify")),_comment2=_interopRequireDefault(require("./comment")),_atRule2=_interopRequireDefault(require("./at-rule")),_vendor2=_interopRequireDefault(require("./vendor")),_parse2=_interopRequireDefault(require("./parse")),_list2=_interopRequireDefault(require("./list")),_rule2=_interopRequireDefault(require("./rule")),_root2=_interopRequireDefault(require("./root"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function postcss(){for(var _len=arguments.length,plugins=Array(_len),_key=0;_key<_len;_key++)plugins[_key]=arguments[_key];return 1===plugins.length&&Array.isArray(plugins[0])&&(plugins=plugins[0]),new _processor2.default(plugins)}postcss.plugin=function(name,initializer){var creator=function(){var transformer=initializer.apply(void 0,arguments);return transformer.postcssPlugin=name,transformer.postcssVersion=(new _processor2.default).version,transformer},cache=void 0;return Object.defineProperty(creator,"postcss",{get:function(){return cache||(cache=creator()),cache}}),creator.process=function(css,processOpts,pluginOpts){return postcss([creator(pluginOpts)]).process(css,processOpts)},creator},postcss.stringify=_stringify2.default,postcss.parse=_parse2.default,postcss.vendor=_vendor2.default,postcss.list=_list2.default,postcss.comment=function(defaults){return new _comment2.default(defaults)},postcss.atRule=function(defaults){return new _atRule2.default(defaults)},postcss.decl=function(defaults){return new _declaration2.default(defaults)},postcss.rule=function(defaults){return new _rule2.default(defaults)},postcss.root=function(defaults){return new _root2.default(defaults)},exports.default=postcss,module.exports=exports.default},{"./at-rule":63,"./comment":64,"./declaration":67,"./list":70,"./parse":73,"./processor":77,"./root":79,"./rule":80,"./stringify":82,"./vendor":85}],76:[function(require,module,exports){(function(Buffer){"use strict";exports.__esModule=!0;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_sourceMap2=_interopRequireDefault(require("source-map")),_path2=_interopRequireDefault(require("path")),_fs2=_interopRequireDefault(require("fs"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PreviousMap=function(){function PreviousMap(css,opts){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PreviousMap),this.loadAnnotation(css),this.inline=this.startWith(this.annotation,"data:");var prev=opts.map?opts.map.prev:void 0,text=this.loadMap(opts.from,prev);text&&(this.text=text)}return PreviousMap.prototype.consumer=function(){return this.consumerCache||(this.consumerCache=new _sourceMap2.default.SourceMapConsumer(this.text)),this.consumerCache},PreviousMap.prototype.withContent=function(){return!!(this.consumer().sourcesContent&&0<this.consumer().sourcesContent.length)},PreviousMap.prototype.startWith=function(string,start){return!!string&&string.substr(0,start.length)===start},PreviousMap.prototype.loadAnnotation=function(css){var match=css.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//);match&&(this.annotation=match[1].trim())},PreviousMap.prototype.decodeInline=function(text){var uri="data:application/json,";if(this.startWith(text,uri))return decodeURIComponent(text.substr(uri.length));if(/^data:application\/json;(?:charset=utf-?8;)?base64,/.test(text))return str=text.substr(RegExp.lastMatch.length),Buffer?Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from(str,"base64").toString():new Buffer(str,"base64").toString():window.atob(str);var str,encoding=text.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+encoding)},PreviousMap.prototype.loadMap=function(file,prev){if(!1===prev)return!1;if(prev){if("string"==typeof prev)return prev;if("function"==typeof prev){var prevPath=prev(file);if(prevPath&&_fs2.default.existsSync&&_fs2.default.existsSync(prevPath))return _fs2.default.readFileSync(prevPath,"utf-8").toString().trim();throw new Error("Unable to load previous source map: "+prevPath.toString())}if(prev instanceof _sourceMap2.default.SourceMapConsumer)return _sourceMap2.default.SourceMapGenerator.fromSourceMap(prev).toString();if(prev instanceof _sourceMap2.default.SourceMapGenerator)return prev.toString();if(this.isMap(prev))return JSON.stringify(prev);throw new Error("Unsupported previous source map format: "+prev.toString())}if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var map=this.annotation;return file&&(map=_path2.default.join(_path2.default.dirname(file),map)),this.root=_path2.default.dirname(map),!(!_fs2.default.existsSync||!_fs2.default.existsSync(map))&&_fs2.default.readFileSync(map,"utf-8").toString().trim()}},PreviousMap.prototype.isMap=function(map){return"object"===(void 0===map?"undefined":_typeof(map))&&("string"==typeof map.mappings||"string"==typeof map._mappings)},PreviousMap}();exports.default=PreviousMap,module.exports=exports.default}).call(this,require("buffer").Buffer)},{buffer:5,fs:4,path:62,"source-map":119}],77:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_lazyResult=require("./lazy-result"),_lazyResult2=(obj=_lazyResult)&&obj.__esModule?obj:{default:obj};var Processor=function(){function Processor(){var plugins=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Processor),this.version="6.0.23",this.plugins=this.normalize(plugins)}return Processor.prototype.use=function(plugin){return this.plugins=this.plugins.concat(this.normalize([plugin])),this},Processor.prototype.process=function(css){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new _lazyResult2.default(this,css,opts)},Processor.prototype.normalize=function(plugins){var normalized=[],_iterator=plugins,_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}var i=_ref;if(i.postcss&&(i=i.postcss),"object"===(void 0===i?"undefined":_typeof(i))&&Array.isArray(i.plugins))normalized=normalized.concat(i.plugins);else{if("function"!=typeof i)throw"object"===(void 0===i?"undefined":_typeof(i))&&(i.parse||i.stringify)?new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation."):new Error(i+" is not a PostCSS plugin");normalized.push(i)}}return normalized},Processor}();exports.default=Processor,module.exports=exports.default},{"./lazy-result":69}],78:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_warning=require("./warning"),_warning2=(obj=_warning)&&obj.__esModule?obj:{default:obj};var Result=function(){function Result(processor,root,opts){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Result),this.processor=processor,this.messages=[],this.root=root,this.opts=opts,this.css=void 0,this.map=void 0}return Result.prototype.toString=function(){return this.css},Result.prototype.warn=function(text){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};opts.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(opts.plugin=this.lastPlugin.postcssPlugin);var warning=new _warning2.default(text,opts);return this.messages.push(warning),warning},Result.prototype.warnings=function(){return this.messages.filter(function(i){return"warning"===i.type})},_createClass(Result,[{key:"content",get:function(){return this.css}}]),Result}();exports.default=Result,module.exports=exports.default},{"./warning":87}],79:[function(require,module,exports){"use strict";exports.__esModule=!0;var obj,_container=require("./container");var Root=function(_Container){function Root(defaults){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Root);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Container.call(this,defaults));return _this.type="root",_this.nodes||(_this.nodes=[]),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Root,_Container),Root.prototype.removeChild=function(child,ignore){var index=this.index(child);return!ignore&&0===index&&1<this.nodes.length&&(this.nodes[1].raws.before=this.nodes[index].raws.before),_Container.prototype.removeChild.call(this,child)},Root.prototype.normalize=function(child,sample,type){var nodes=_Container.prototype.normalize.call(this,child);if(sample)if("prepend"===type)1<this.nodes.length?sample.raws.before=this.nodes[1].raws.before:delete sample.raws.before;else if(this.first!==sample){var _iterator=nodes,_isArray=Array.isArray(_iterator),_i=0;for(_iterator=_isArray?_iterator:_iterator[Symbol.iterator]();;){var _ref;if(_isArray){if(_i>=_iterator.length)break;_ref=_iterator[_i++]}else{if((_i=_iterator.next()).done)break;_ref=_i.value}_ref.raws.before=sample.raws.before}}return nodes},Root.prototype.toResult=function(){var opts=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new(require("./lazy-result"))(new(require("./processor")),this,opts).stringify()},Root}(((obj=_container)&&obj.__esModule?obj:{default:obj}).default);exports.default=Root,module.exports=exports.default},{"./container":65,"./lazy-result":69,"./processor":77}],80:[function(require,module,exports){"use strict";exports.__esModule=!0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_container2=_interopRequireDefault(require("./container")),_list2=_interopRequireDefault(require("./list"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Rule=function(_Container){function Rule(defaults){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Rule);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,_Container.call(this,defaults));return _this.type="rule",_this.nodes||(_this.nodes=[]),_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Rule,_Container),_createClass(Rule,[{key:"selectors",get:function(){return _list2.default.comma(this.selector)},set:function(values){var match=this.selector?this.selector.match(/,\s*/):null,sep=match?match[0]:","+this.raw("between","beforeOpen");this.selector=values.join(sep)}}]),Rule}(_container2.default);exports.default=Rule,module.exports=exports.default},{"./container":65,"./list":70}],81:[function(require,module,exports){"use strict";exports.__esModule=!0;var defaultRaw={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" "};var Stringifier=function(){function Stringifier(builder){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Stringifier),this.builder=builder}return Stringifier.prototype.stringify=function(node,semicolon){this[node.type](node,semicolon)},Stringifier.prototype.root=function(node){this.body(node),node.raws.after&&this.builder(node.raws.after)},Stringifier.prototype.comment=function(node){var left=this.raw(node,"left","commentLeft"),right=this.raw(node,"right","commentRight");this.builder("/*"+left+node.text+right+"*/",node)},Stringifier.prototype.decl=function(node,semicolon){var between=this.raw(node,"between","colon"),string=node.prop+between+this.rawValue(node,"value");node.important&&(string+=node.raws.important||" !important"),semicolon&&(string+=";"),this.builder(string,node)},Stringifier.prototype.rule=function(node){this.block(node,this.rawValue(node,"selector")),node.raws.ownSemicolon&&this.builder(node.raws.ownSemicolon,node,"end")},Stringifier.prototype.atrule=function(node,semicolon){var name="@"+node.name,params=node.params?this.rawValue(node,"params"):"";if(void 0!==node.raws.afterName?name+=node.raws.afterName:params&&(name+=" "),node.nodes)this.block(node,name+params);else{var end=(node.raws.between||"")+(semicolon?";":"");this.builder(name+params+end,node)}},Stringifier.prototype.body=function(node){for(var last=node.nodes.length-1;0<last&&"comment"===node.nodes[last].type;)last-=1;for(var semicolon=this.raw(node,"semicolon"),i=0;i<node.nodes.length;i++){var child=node.nodes[i],before=this.raw(child,"before");before&&this.builder(before),this.stringify(child,last!==i||semicolon)}},Stringifier.prototype.block=function(node,start){var between=this.raw(node,"between","beforeOpen");this.builder(start+between+"{",node,"start");var after=void 0;node.nodes&&node.nodes.length?(this.body(node),after=this.raw(node,"after")):after=this.raw(node,"after","emptyBody"),after&&this.builder(after),this.builder("}",node,"end")},Stringifier.prototype.raw=function(node,own,detect){var value=void 0;if(detect||(detect=own),own&&void 0!==(value=node.raws[own]))return value;var parent=node.parent;if("before"===detect&&(!parent||"root"===parent.type&&parent.first===node))return"";if(!parent)return defaultRaw[detect];var root=node.root();if(root.rawCache||(root.rawCache={}),void 0!==root.rawCache[detect])return root.rawCache[detect];if("before"===detect||"after"===detect)return this.beforeAfter(node,detect);var str,method="raw"+((str=detect)[0].toUpperCase()+str.slice(1));return this[method]?value=this[method](root,node):root.walk(function(i){if(void 0!==(value=i.raws[own]))return!1}),void 0===value&&(value=defaultRaw[detect]),root.rawCache[detect]=value},Stringifier.prototype.rawSemicolon=function(root){var value=void 0;return root.walk(function(i){if(i.nodes&&i.nodes.length&&"decl"===i.last.type&&void 0!==(value=i.raws.semicolon))return!1}),value},Stringifier.prototype.rawEmptyBody=function(root){var value=void 0;return root.walk(function(i){if(i.nodes&&0===i.nodes.length&&void 0!==(value=i.raws.after))return!1}),value},Stringifier.prototype.rawIndent=function(root){if(root.raws.indent)return root.raws.indent;var value=void 0;return root.walk(function(i){var p=i.parent;if(p&&p!==root&&p.parent&&p.parent===root&&void 0!==i.raws.before){var parts=i.raws.before.split("\n");return value=(value=parts[parts.length-1]).replace(/[^\s]/g,""),!1}}),value},Stringifier.prototype.rawBeforeComment=function(root,node){var value=void 0;return root.walkComments(function(i){if(void 0!==i.raws.before)return-1!==(value=i.raws.before).indexOf("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),void 0===value?value=this.raw(node,null,"beforeDecl"):value&&(value=value.replace(/[^\s]/g,"")),value},Stringifier.prototype.rawBeforeDecl=function(root,node){var value=void 0;return root.walkDecls(function(i){if(void 0!==i.raws.before)return-1!==(value=i.raws.before).indexOf("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),void 0===value?value=this.raw(node,null,"beforeRule"):value&&(value=value.replace(/[^\s]/g,"")),value},Stringifier.prototype.rawBeforeRule=function(root){var value=void 0;return root.walk(function(i){if(i.nodes&&(i.parent!==root||root.first!==i)&&void 0!==i.raws.before)return-1!==(value=i.raws.before).indexOf("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/[^\s]/g,"")),value},Stringifier.prototype.rawBeforeClose=function(root){var value=void 0;return root.walk(function(i){if(i.nodes&&0<i.nodes.length&&void 0!==i.raws.after)return-1!==(value=i.raws.after).indexOf("\n")&&(value=value.replace(/[^\n]+$/,"")),!1}),value&&(value=value.replace(/[^\s]/g,"")),value},Stringifier.prototype.rawBeforeOpen=function(root){var value=void 0;return root.walk(function(i){if("decl"!==i.type&&void 0!==(value=i.raws.between))return!1}),value},Stringifier.prototype.rawColon=function(root){var value=void 0;return root.walkDecls(function(i){if(void 0!==i.raws.between)return value=i.raws.between.replace(/[^\s:]/g,""),!1}),value},Stringifier.prototype.beforeAfter=function(node,detect){var value=void 0;value="decl"===node.type?this.raw(node,null,"beforeDecl"):"comment"===node.type?this.raw(node,null,"beforeComment"):"before"===detect?this.raw(node,null,"beforeRule"):this.raw(node,null,"beforeClose");for(var buf=node.parent,depth=0;buf&&"root"!==buf.type;)depth+=1,buf=buf.parent;if(-1!==value.indexOf("\n")){var indent=this.raw(node,null,"indent");if(indent.length)for(var step=0;step<depth;step++)value+=indent}return value},Stringifier.prototype.rawValue=function(node,prop){var value=node[prop],raw=node.raws[prop];return raw&&raw.value===value?raw.raw:value},Stringifier}();exports.default=Stringifier,module.exports=exports.default},{}],82:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(node,builder){new _stringifier2.default(builder).stringify(node)};var obj,_stringifier=require("./stringifier"),_stringifier2=(obj=_stringifier)&&obj.__esModule?obj:{default:obj};module.exports=exports.default},{"./stringifier":81}],83:[function(require,module,exports){"use strict";exports.__esModule=!0;var _chalk2=_interopRequireDefault(require("chalk")),_tokenize2=_interopRequireDefault(require("./tokenize")),_input2=_interopRequireDefault(require("./input"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var HIGHLIGHT_THEME={brackets:_chalk2.default.cyan,"at-word":_chalk2.default.cyan,call:_chalk2.default.cyan,comment:_chalk2.default.gray,string:_chalk2.default.green,class:_chalk2.default.yellow,hash:_chalk2.default.magenta,"(":_chalk2.default.cyan,")":_chalk2.default.cyan,"{":_chalk2.default.yellow,"}":_chalk2.default.yellow,"[":_chalk2.default.yellow,"]":_chalk2.default.yellow,":":_chalk2.default.yellow,";":_chalk2.default.yellow};exports.default=function(css){for(var processor=(0,_tokenize2.default)(new _input2.default(css),{ignoreErrors:!0}),result="",_loop=function(){var token=processor.nextToken(),color=HIGHLIGHT_THEME[function(_ref,processor){var type=_ref[0],value=_ref[1];if("word"===type){if("."===value[0])return"class";if("#"===value[0])return"hash"}if(!processor.endOfFile()){var next=processor.nextToken();if(processor.back(next),"brackets"===next[0]||"("===next[0])return"call"}return type}(token,processor)];result+=color?token[1].split(/\r?\n/).map(function(i){return color(i)}).join("\n"):token[1]};!processor.endOfFile();)_loop();return result},module.exports=exports.default},{"./input":68,"./tokenize":84,chalk:4}],84:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(input){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},css=input.css.valueOf(),ignore=options.ignoreErrors,code=void 0,next=void 0,quote=void 0,lines=void 0,last=void 0,content=void 0,escape=void 0,nextLine=void 0,nextOffset=void 0,escaped=void 0,escapePos=void 0,prev=void 0,n=void 0,currentToken=void 0,length=css.length,offset=-1,line=1,pos=0,buffer=[],returned=[];function unclosed(what){throw input.error("Unclosed "+what,line,pos-offset)}return{back:function(token){returned.push(token)},nextToken:function(){if(returned.length)return returned.pop();if(length<=pos)return;((code=css.charCodeAt(pos))===NEWLINE||code===FEED||code===CR&&css.charCodeAt(pos+1)!==NEWLINE)&&(offset=pos,line+=1);switch(code){case NEWLINE:case SPACE:case TAB:case CR:case FEED:for(next=pos;next+=1,(code=css.charCodeAt(next))===NEWLINE&&(offset=next,line+=1),code===SPACE||code===NEWLINE||code===TAB||code===CR||code===FEED;);currentToken=["space",css.slice(pos,next)],pos=next-1;break;case OPEN_SQUARE:currentToken=["[","[",line,pos-offset];break;case CLOSE_SQUARE:currentToken=["]","]",line,pos-offset];break;case OPEN_CURLY:currentToken=["{","{",line,pos-offset];break;case CLOSE_CURLY:currentToken=["}","}",line,pos-offset];break;case COLON:currentToken=[":",":",line,pos-offset];break;case SEMICOLON:currentToken=[";",";",line,pos-offset];break;case OPEN_PARENTHESES:if(prev=buffer.length?buffer.pop()[1]:"",n=css.charCodeAt(pos+1),"url"===prev&&n!==SINGLE_QUOTE&&n!==DOUBLE_QUOTE&&n!==SPACE&&n!==NEWLINE&&n!==TAB&&n!==FEED&&n!==CR){next=pos;do{if(escaped=!1,-1===(next=css.indexOf(")",next+1))){if(ignore){next=pos;break}unclosed("bracket")}for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH;)escapePos-=1,escaped=!escaped}while(escaped);currentToken=["brackets",css.slice(pos,next+1),line,pos-offset,line,next-offset],pos=next}else next=css.indexOf(")",pos+1),content=css.slice(pos,next+1),-1===next||RE_BAD_BRACKET.test(content)?currentToken=["(","(",line,pos-offset]:(currentToken=["brackets",content,line,pos-offset,line,next-offset],pos=next);break;case CLOSE_PARENTHESES:currentToken=[")",")",line,pos-offset];break;case SINGLE_QUOTE:case DOUBLE_QUOTE:quote=code===SINGLE_QUOTE?"'":'"',next=pos;do{if(escaped=!1,-1===(next=css.indexOf(quote,next+1))){if(ignore){next=pos+1;break}unclosed("string")}for(escapePos=next;css.charCodeAt(escapePos-1)===BACKSLASH;)escapePos-=1,escaped=!escaped}while(escaped);content=css.slice(pos,next+1),lines=content.split("\n"),0<(last=lines.length-1)?(nextLine=line+last,nextOffset=next-lines[last].length):(nextLine=line,nextOffset=offset),currentToken=["string",css.slice(pos,next+1),line,pos-offset,nextLine,next-nextOffset],offset=nextOffset,line=nextLine,pos=next;break;case AT:RE_AT_END.lastIndex=pos+1,RE_AT_END.test(css),next=0===RE_AT_END.lastIndex?css.length-1:RE_AT_END.lastIndex-2,currentToken=["at-word",css.slice(pos,next+1),line,pos-offset,line,next-offset],pos=next;break;case BACKSLASH:for(next=pos,escape=!0;css.charCodeAt(next+1)===BACKSLASH;)next+=1,escape=!escape;if(code=css.charCodeAt(next+1),escape&&code!==SLASH&&code!==SPACE&&code!==NEWLINE&&code!==TAB&&code!==CR&&code!==FEED&&(next+=1,RE_HEX_ESCAPE.test(css.charAt(next)))){for(;RE_HEX_ESCAPE.test(css.charAt(next+1));)next+=1;css.charCodeAt(next+1)===SPACE&&(next+=1)}currentToken=["word",css.slice(pos,next+1),line,pos-offset,line,next-offset],pos=next;break;default:code===SLASH&&css.charCodeAt(pos+1)===ASTERISK?(0===(next=css.indexOf("*/",pos+2)+1)&&(ignore?next=css.length:unclosed("comment")),content=css.slice(pos,next+1),lines=content.split("\n"),0<(last=lines.length-1)?(nextLine=line+last,nextOffset=next-lines[last].length):(nextLine=line,nextOffset=offset),currentToken=["comment",content,line,pos-offset,nextLine,next-nextOffset],offset=nextOffset,line=nextLine):(RE_WORD_END.lastIndex=pos+1,RE_WORD_END.test(css),next=0===RE_WORD_END.lastIndex?css.length-1:RE_WORD_END.lastIndex-2,currentToken=["word",css.slice(pos,next+1),line,pos-offset,line,next-offset],buffer.push(currentToken)),pos=next}return pos++,currentToken},endOfFile:function(){return 0===returned.length&&length<=pos}}};var SINGLE_QUOTE=39,DOUBLE_QUOTE=34,BACKSLASH=92,SLASH=47,NEWLINE=10,SPACE=32,FEED=12,TAB=9,CR=13,OPEN_SQUARE=91,CLOSE_SQUARE=93,OPEN_PARENTHESES=40,CLOSE_PARENTHESES=41,OPEN_CURLY=123,CLOSE_CURLY=125,SEMICOLON=59,ASTERISK=42,COLON=58,AT=64,RE_AT_END=/[ \n\t\r\f\{\}\(\)'"\\;/\[\]#]/g,RE_WORD_END=/[ \n\t\r\f\(\)\{\}:;@!'"\\\]\[#]|\/(?=\*)/g,RE_BAD_BRACKET=/.[\\\/\("'\n]/,RE_HEX_ESCAPE=/[a-f0-9]/i;module.exports=exports.default},{}],85:[function(require,module,exports){"use strict";exports.__esModule=!0;exports.default={prefix:function(prop){var match=prop.match(/^(-\w+-)/);return match?match[0]:""},unprefixed:function(prop){return prop.replace(/^-\w+-/,"")}},module.exports=exports.default},{}],86:[function(require,module,exports){"use strict";exports.__esModule=!0,exports.default=function(message){if(printed[message])return;printed[message]=!0,"undefined"!=typeof console&&console.warn&&console.warn(message)};var printed={};module.exports=exports.default},{}],87:[function(require,module,exports){"use strict";exports.__esModule=!0;var Warning=function(){function Warning(text){var opts=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Warning),this.type="warning",this.text=text,opts.node&&opts.node.source){var pos=opts.node.positionBy(opts);this.line=pos.line,this.column=pos.column}for(var opt in opts)this[opt]=opts[opt]}return Warning.prototype.toString=function(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},Warning}();exports.default=Warning,module.exports=exports.default},{}],88:[function(require,module,exports){(function(process){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?module.exports={nextTick:function(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw new TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function(){fn.call(null,arg1)});case 3:return process.nextTick(function(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function(){fn.call(null,arg1,arg2,arg3)});default:for(args=new Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(function(){fn.apply(null,args)})}}}:module.exports=process}).call(this,require("_process"))},{_process:89}],89:[function(require,module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],90:[function(require,module,exports){(function(global){!function(root){var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule="object"==typeof module&&module&&!module.nodeType&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self!==freeGlobal||(root=freeGlobal);var punycode,key,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return 1<parts.length&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)55296<=(value=string.charCodeAt(counter++))&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return 65535<value&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);baseMinusTMin*tMax>>1<delta;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for((basic=input.lastIndexOf(delimiter))<0&&(basic=0),j=0;j<basic;++j)128<=input.charCodeAt(j)&&error("not-basic"),output.push(input.charCodeAt(j));for(index=0<basic?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;inputLength<=index&&error("invalid-input"),codePoint=input.charCodeAt(index++),(base<=(digit=codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base)||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?tMin:bias+tMax<=k?tMax:k-bias));k+=base)w>floor(maxInt/(baseMinusT=base-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=initialN,bias=initialBias,j=delta=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)n<=(currentValue=input[j])&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;!(q<(t=k<=bias?tMin:bias+tMax<=k?tMax:k-bias));k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}if(punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})},toUnicode:function(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return punycode});else if(freeExports&&freeModule)if(module.exports==freeExports)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&",eq=eq||"=";var obj={};if("string"!=typeof qs||0===qs.length)return obj;var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;options&&"number"==typeof options.maxKeys&&(maxKeys=options.maxKeys);var len=qs.length;0<maxKeys&&maxKeys<len&&(len=maxKeys);for(var i=0;i<len;++i){var kstr,vstr,k,v,x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq);0<=idx?(kstr=x.substr(0,idx),vstr=x.substr(idx+1)):(kstr=x,vstr=""),k=decodeURIComponent(kstr),v=decodeURIComponent(vstr),hasOwnProperty(obj,k)?isArray(obj[k])?obj[k].push(v):obj[k]=[obj[k],v]:obj[k]=v}return obj};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},{}],92:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){return sep=sep||"&",eq=eq||"=",null===obj&&(obj=void 0),"object"==typeof obj?map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;return isArray(obj[k])?map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep):ks+encodeURIComponent(stringifyPrimitive(obj[k]))}).join(sep):name?encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj)):""};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function map(xs,f){if(xs.map)return xs.map(f);for(var res=[],i=0;i<xs.length;i++)res.push(f(xs[i],i));return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&res.push(key);return res}},{}],93:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode")},{"./decode":91,"./encode":92}],94:[function(require,module,exports){module.exports=require("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":95}],95:[function(require,module,exports){"use strict";var pna=require("process-nextick-args"),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self){self.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},{"./_stream_readable":97,"./_stream_writable":99,"core-util-is":6,inherits:38,"process-nextick-args":88}],96:[function(require,module,exports){"use strict";module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},{"./_stream_transform":98,"core-util-is":6,inherits:38}],97:[function(require,module,exports){(function(process,global){"use strict";var pna=require("process-nextick-args");module.exports=Readable;var Duplex,isArray=require("isarray");Readable.ReadableState=ReadableState;require("events").EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};var util=require("core-util-is");util.inherits=require("inherits");var debugUtil=require("util"),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var StringDecoder,BufferList=require("./internal/streams/BufferList"),destroyImpl=require("./internal/streams/destroy");util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){options=options||{};var isDuplex=stream instanceof(Duplex=Duplex||require("./_stream_duplex"));this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(readableHwm||0===readableHwm)?readableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||require("./_stream_duplex"),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var er,state=stream._readableState;null===chunk?(state.reading=!1,function(stream,state){if(state.ended)return;if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}(stream,state)):(skipChunkCheck||(er=function(state,chunk){var er;obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array||"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk"));var obj;return er}(state,chunk)),er?stream.emit("error",er):state.objectMode||chunk&&0<chunk.length?("string"==typeof chunk||state.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),addToFront?state.endEmitted?stream.emit("error",new Error("stream.unshift() after end event")):addChunk(stream,state,chunk,!0):state.ended?stream.emit("error",new Error("stream.push() after EOF")):(state.reading=!1,state.decoder&&!encoding?(chunk=state.decoder.write(chunk),state.objectMode||0!==chunk.length?addChunk(stream,state,chunk,!1):maybeReadMore(stream,state)):addChunk(stream,state,chunk,!1))):addToFront||(state.reading=!1));return function(state){return!state.ended&&(state.needReadable||state.length<state.highWaterMark||0===state.length)}(state)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this};var MAX_HWM=8388608;function howMuchToRead(n,state){return n<=0||0===state.length&&state.ended?0:state.objectMode?1:n!=n?state.flowing&&state.length?state.buffer.head.data.length:state.length:(n>state.highWaterMark&&(state.highWaterMark=function(n){return MAX_HWM<=n?n=MAX_HWM:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n}(n)),n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0))}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self){debug("readable nexttick read 0"),self.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):ret=function(n,list,hasStrings){var ret;n<list.head.data.length?(ret=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret=n===list.head.data.length?list.shift():hasStrings?function(n,list){var p=list.head,c=1,ret=p.data;n-=ret.length;for(;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0===(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p).data=str.slice(nb);break}++c}return list.length-=c,ret}(n,list):function(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;p.data.copy(ret),n-=p.data.length;for(;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0===(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p).data=buf.slice(nb);break}++c}return list.length-=c,ret}(n,list);return ret}(n,state.buffer,state.decoder),ret);var ret}function endReadable(stream){var state=stream._readableState;if(0<state.length)throw new Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return-1}Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var ret,doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=0<n?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",new Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=(!pipeOpts||!1!==pipeOpts.end)&&dest!==process.stdout&&dest!==process.stderr?onend:unpipe;function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,!state.awaitDrain||dest._writableState&&!dest._writableState.needDrain||ondrain())}function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",onunpipe);var ondrain=function(src){return function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))}}(src);dest.on("drain",ondrain);var cleanedUp=!1;var increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),(increasedAwaitDrain=!1)!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||1<state.pipesCount&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return-1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.addListener=Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.resume=function(){var state=this._readableState;return state.flowing||(debug("resume"),state.flowing=!0,function(stream,state){state.resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,stream,state))}(this,state)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)}),stream.on("data",function(chunk){(debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),state.objectMode&&null==chunk)||(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))}),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":95,"./internal/streams/BufferList":100,"./internal/streams/destroy":101,"./internal/streams/stream":102,_process:89,"core-util-is":6,events:28,inherits:38,isarray:40,"process-nextick-args":88,"safe-buffer":107,"string_decoder/":122,util:4}],98:[function(require,module,exports){"use strict";module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:function(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",new Error("write callback called multiple times"));ts.writechunk=null,(ts.writecb=null)!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush(function(er,data){done(_this,er,data)}):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw new Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw new Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2),_this2.emit("close")})}},{"./_stream_duplex":95,"core-util-is":6,inherits:38}],99:[function(require,module,exports){(function(process,global,setImmediate){"use strict";var pna=require("process-nextick-args");function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){!function(corkReq,state,err){var entry=corkReq.entry;corkReq.entry=null;for(;entry;){var cb=entry.callback;state.pendingcb--,cb(err),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq}(_this,state)}}module.exports=Writable;var Duplex,asyncWrite=!process.browser&&-1<["v0.10","v0.9."].indexOf(process.version.slice(0,5))?setImmediate:pna.nextTick;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var internalUtil={deprecate:require("util-deprecate")},Stream=require("./internal/streams/stream"),Buffer=require("safe-buffer").Buffer,OurUint8Array=global.Uint8Array||function(){};var realHasInstance,destroyImpl=require("./internal/streams/destroy");function nop(){}function WritableState(options,stream){Duplex=Duplex||require("./_stream_duplex"),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;this.highWaterMark=hwm||0===hwm?hwm:isDuplex&&(writableHwm||0===writableHwm)?writableHwm:defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var noDecode=(this.destroyed=!1)===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){!function(stream,er){var state=stream._writableState,sync=state.sync,cb=state.writecb;if(function(state){state.writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0}(state),er)!function(stream,state,sync,er,cb){--state.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream,state),stream._writableState.errorEmitted=!0,stream.emit("error",er)):(cb(er),stream._writableState.errorEmitted=!0,stream.emit("error",er),finishMaybe(stream,state))}(stream,state,sync,er,cb);else{var finished=needFinish(state);finished||state.corked||state.bufferProcessing||!state.bufferedRequest||clearBuffer(stream,state),sync?asyncWrite(afterWrite,stream,state,finished,cb):afterWrite(stream,state,finished,cb)}}(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||require("./_stream_duplex"),!(realHasInstance.call(Writable,this)||this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){finished||function(stream,state){0===state.length&&state.needDrain&&(state.needDrain=!1,stream.emit("drain"))}(stream,state),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var l=state.bufferedRequestCount,buffer=new Array(l),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)(buffer[count]=entry).isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback;if(doWrite(stream,state,!1,state.objectMode?1:chunk.length,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)})}function finishMaybe(stream,state){var need=needFinish(state);return need&&(!function(stream,state){state.prefinished||state.finalCalled||("function"==typeof stream._final?(state.pendingcb++,state.finalCalled=!0,pna.nextTick(callFinal,stream,state)):(state.prefinished=!0,stream.emit("prefinish")))}(stream,state),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&(object&&object._writableState instanceof WritableState)}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var obj,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk=function(chunk){return Buffer.from(chunk)}(chunk)),"function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended?function(stream,cb){var er=new Error("write after end");stream.emit("error",er),pna.nextTick(cb,er)}(this,cb):(isBuf||function(stream,state,chunk,cb){var valid=!0,er=!1;return null===chunk?er=new TypeError("May not write null values to stream"):"string"==typeof chunk||void 0===chunk||state.objectMode||(er=new TypeError("Invalid non-string/buffer chunk")),er&&(stream.emit("error",er),pna.nextTick(cb,er),valid=!1),valid}(this,state,chunk,cb))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var newChunk=function(state,chunk,encoding){state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk||(chunk=Buffer.from(chunk,encoding));return chunk}(state,chunk,encoding);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;ret||(state.needDrain=!0);if(state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){this._writableState.corked++},Writable.prototype.uncork=function(){var state=this._writableState;state.corked&&(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())))throw new TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(new Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var state=this._writableState;"function"==typeof chunk?(cb=chunk,encoding=chunk=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state.corked&&(state.corked=1,this.uncork()),state.ending||state.finished||function(stream,state,cb){state.ending=!0,finishMaybe(stream,state),cb&&(state.finished?pna.nextTick(cb):stream.once("finish",cb));state.ended=!0,stream.writable=!1}(this,state,cb)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("timers").setImmediate)},{"./_stream_duplex":95,"./internal/streams/destroy":101,"./internal/streams/stream":102,_process:89,"core-util-is":6,inherits:38,"process-nextick-args":88,"safe-buffer":107,timers:123,"util-deprecate":126}],100:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer,util=require("util");module.exports=function(){function BufferList(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function(v){var entry={data:v,next:null};0<this.length?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var src,target,offset,ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)src=p.data,target=ret,offset=i,src.copy(target,offset),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},{"safe-buffer":107,util:4}],101:[function(require,module,exports){"use strict";var pna=require("process-nextick-args");function emitErrorNT(self,err){self.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":88}],102:[function(require,module,exports){module.exports=require("events").EventEmitter},{events:28}],103:[function(require,module,exports){module.exports=require("./readable").PassThrough},{"./readable":104}],104:[function(require,module,exports){(((exports=module.exports=require("./lib/_stream_readable.js")).Stream=exports).Readable=exports).Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":95,"./lib/_stream_passthrough.js":96,"./lib/_stream_readable.js":97,"./lib/_stream_transform.js":98,"./lib/_stream_writable.js":99}],105:[function(require,module,exports){module.exports=require("./readable").Transform},{"./readable":104}],106:[function(require,module,exports){module.exports=require("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":99}],107:[function(require,module,exports){var buffer=require("buffer"),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},{buffer:5}],108:[function(require,module,exports){"use strict";var htmlparser=require("htmlparser2"),extend=require("xtend"),quoteRegexp=require("lodash.escaperegexp"),cloneDeep=require("lodash.clonedeep"),mergeWith=require("lodash.mergewith"),isString=require("lodash.isstring"),isPlainObject=require("lodash.isplainobject"),srcset=require("srcset"),postcss=require("postcss"),url=require("url");function each(obj,cb){obj&&Object.keys(obj).forEach(function(key){cb(obj[key],key)})}function has(obj,key){return{}.hasOwnProperty.call(obj,key)}function filter(a,cb){var n=[];return each(a,function(v){cb(v)&&n.push(v)}),n}module.exports=sanitizeHtml;var VALID_HTML_ATTRIBUTE_NAME=/^[^\0\t\n\f\r /<=>]+$/;function sanitizeHtml(html,options,_recursing){var result="";function Frame(tag,attribs){var that=this;this.tag=tag,this.attribs=attribs||{},this.tagPosition=result.length,this.text="",this.updateParentNodeText=function(){stack.length&&(stack[stack.length-1].text+=that.text)}}options?(options=extend(sanitizeHtml.defaults,options)).parser?options.parser=extend(htmlParserDefaults,options.parser):options.parser=htmlParserDefaults:(options=sanitizeHtml.defaults).parser=htmlParserDefaults;var allowedAttributesMap,allowedAttributesGlobMap,nonTextTagsArray=options.nonTextTags||["script","style","textarea"];options.allowedAttributes&&(allowedAttributesMap={},allowedAttributesGlobMap={},each(options.allowedAttributes,function(attributes,tag){allowedAttributesMap[tag]=[];var globRegex=[];attributes.forEach(function(obj){isString(obj)&&0<=obj.indexOf("*")?globRegex.push(quoteRegexp(obj).replace(/\\\*/g,".*")):allowedAttributesMap[tag].push(obj)}),allowedAttributesGlobMap[tag]=new RegExp("^("+globRegex.join("|")+")$")}));var allowedClassesMap={};each(options.allowedClasses,function(classes,tag){allowedAttributesMap&&(has(allowedAttributesMap,tag)||(allowedAttributesMap[tag]=[]),allowedAttributesMap[tag].push("class")),allowedClassesMap[tag]=classes});var transformTagsAll,transformTagsMap={};each(options.transformTags,function(transform,tag){var transFun;"function"==typeof transform?transFun=transform:"string"==typeof transform&&(transFun=sanitizeHtml.simpleTransform(transform)),"*"===tag?transformTagsAll=transFun:transformTagsMap[tag]=transFun});var depth=0,stack=[],skipMap={},transformMap={},skipText=!1,skipTextDepth=0,parser=new htmlparser.Parser({onopentag:function(name,attribs){if(skipText)skipTextDepth++;else{var frame=new Frame(name,attribs);stack.push(frame);var transformedTag,skip=!1,hasText=!!frame.text;has(transformTagsMap,name)&&(transformedTag=transformTagsMap[name](name,attribs),frame.attribs=attribs=transformedTag.attribs,void 0!==transformedTag.text&&(frame.innerText=transformedTag.text),name!==transformedTag.tagName&&(frame.name=name=transformedTag.tagName,transformMap[depth]=transformedTag.tagName)),transformTagsAll&&(transformedTag=transformTagsAll(name,attribs),frame.attribs=attribs=transformedTag.attribs,name!==transformedTag.tagName&&(frame.name=name=transformedTag.tagName,transformMap[depth]=transformedTag.tagName)),options.allowedTags&&-1===options.allowedTags.indexOf(name)&&(skip=!0,-1!==nonTextTagsArray.indexOf(name)&&(skipText=!0,skipTextDepth=1),skipMap[depth]=!0),depth++,skip||(result+="<"+name,(!allowedAttributesMap||has(allowedAttributesMap,name)||allowedAttributesMap["*"])&&each(attribs,function(value,a){if(VALID_HTML_ATTRIBUTE_NAME.test(a)){var parsed,classes,allowed,passedAllowedAttributesMapCheck=!1;if(!allowedAttributesMap||has(allowedAttributesMap,name)&&-1!==allowedAttributesMap[name].indexOf(a)||allowedAttributesMap["*"]&&-1!==allowedAttributesMap["*"].indexOf(a)||has(allowedAttributesGlobMap,name)&&allowedAttributesGlobMap[name].test(a)||allowedAttributesGlobMap["*"]&&allowedAttributesGlobMap["*"].test(a))passedAllowedAttributesMapCheck=!0;else if(allowedAttributesMap&&allowedAttributesMap[name]){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=allowedAttributesMap[name][Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var o=_step.value;if(isPlainObject(o)&&o.name&&o.name===a){var newValue="";if((passedAllowedAttributesMapCheck=!0)===o.multiple){var splitStrArray=value.split(" "),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=splitStrArray[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var s=_step2.value;-1!==o.values.indexOf(s)&&(""===newValue?newValue=s:newValue+=" "+s)}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}else 0<=o.values.indexOf(value)&&(newValue=value);value=newValue}}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}if(passedAllowedAttributesMapCheck){if(-1!==options.allowedSchemesAppliedToAttributes.indexOf(a)&&naughtyHref(name,value))return void delete frame.attribs[a];if("iframe"===name&&"src"===a)try{if(parsed=url.parse(value,!1,!0),options.allowedIframeHostnames)if(!options.allowedIframeHostnames.find(function(hostname){return hostname===parsed.hostname}))return void delete frame.attribs[a]}catch(e){return void delete frame.attribs[a]}if("srcset"===a)try{if(each(parsed=srcset.parse(value),function(value){naughtyHref("srcset",value.url)&&(value.evil=!0)}),!(parsed=filter(parsed,function(v){return!v.evil})).length)return void delete frame.attribs[a];value=srcset.stringify(filter(parsed,function(v){return!v.evil})),frame.attribs[a]=value}catch(e){return void delete frame.attribs[a]}if("class"===a&&(classes=value,!(value=(allowed=allowedClassesMap[name])?(classes=classes.split(/\s+/)).filter(function(clss){return-1!==allowed.indexOf(clss)}).join(" "):classes).length))return void delete frame.attribs[a];if("style"===a)try{if(0===(value=function(filteredAST){return filteredAST.nodes[0].nodes.reduce(function(extractedAttributes,attributeObject){return extractedAttributes.push(attributeObject.prop+":"+attributeObject.value+";"),extractedAttributes},[]).join("")}(function(abstractSyntaxTree,allowedStyles){if(!allowedStyles)return abstractSyntaxTree;var selectedRule,filteredAST=cloneDeep(abstractSyntaxTree),astRules=abstractSyntaxTree.nodes[0];selectedRule=allowedStyles[astRules.selector]&&allowedStyles["*"]?mergeWith(cloneDeep(allowedStyles[astRules.selector]),allowedStyles["*"],function(objValue,srcValue){if(Array.isArray(objValue))return objValue.concat(srcValue)}):allowedStyles[astRules.selector]||allowedStyles["*"];selectedRule&&(filteredAST.nodes[0].nodes=astRules.nodes.reduce(function(selectedRule){return function(allowedDeclarationsList,attributeObject){if(selectedRule.hasOwnProperty(attributeObject.prop)){var matchesRegex=selectedRule[attributeObject.prop].some(function(regularExpression){return regularExpression.test(attributeObject.value)});matchesRegex&&allowedDeclarationsList.push(attributeObject)}return allowedDeclarationsList}}(selectedRule),[]));return filteredAST}(postcss.parse(name+" {"+value+"}"),options.allowedStyles))).length)return void delete frame.attribs[a]}catch(e){return void delete frame.attribs[a]}result+=" "+a,value.length&&(result+='="'+escapeHtml(value)+'"')}else delete frame.attribs[a]}else delete frame.attribs[a]}),-1!==options.selfClosing.indexOf(name)?result+=" />":(result+=">",!frame.innerText||hasText||options.textFilter||(result+=frame.innerText)))}},ontext:function(text){if(!skipText){var tag,lastFrame=stack[stack.length-1];if(lastFrame&&(tag=lastFrame.tag,text=void 0!==lastFrame.innerText?lastFrame.innerText:text),"script"===tag||"style"===tag)result+=text;else{var escaped=escapeHtml(text);options.textFilter?result+=options.textFilter(escaped):result+=escaped}if(stack.length)stack[stack.length-1].text+=text}},onclosetag:function(name){if(skipText){if(--skipTextDepth)return;skipText=!1}var frame=stack.pop();if(frame){if(skipText=!1,skipMap[--depth])return delete skipMap[depth],void frame.updateParentNodeText();transformMap[depth]&&(name=transformMap[depth],delete transformMap[depth]),options.exclusiveFilter&&options.exclusiveFilter(frame)?result=result.substr(0,frame.tagPosition):(frame.updateParentNodeText(),-1===options.selfClosing.indexOf(name)&&(result+="</"+name+">"))}}},options.parser);return parser.write(html),parser.end(),result;function escapeHtml(s){return"string"!=typeof s&&(s+=""),s.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")}function naughtyHref(name,href){var matches=(href=(href=href.replace(/[\x00-\x20]+/g,"")).replace(/<\!\-\-.*?\-\-\>/g,"")).match(/^([a-zA-Z]+)\:/);if(!matches)return!!href.match(/^[\/\\]{2}/)&&!options.allowProtocolRelative;var scheme=matches[1].toLowerCase();return has(options.allowedSchemesByTag,name)?-1===options.allowedSchemesByTag[name].indexOf(scheme):!options.allowedSchemes||-1===options.allowedSchemes.indexOf(scheme)}}var htmlParserDefaults={decodeEntities:!0};sanitizeHtml.defaults={allowedTags:["h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe"],allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0},sanitizeHtml.simpleTransform=function(newTagName,newAttribs,merge){return merge=void 0===merge||merge,newAttribs=newAttribs||{},function(tagName,attribs){var attrib;if(merge)for(attrib in newAttribs)attribs[attrib]=newAttribs[attrib];else attribs=newAttribs;return{tagName:newTagName,attribs:attribs}}}},{htmlparser2:36,"lodash.clonedeep":56,"lodash.escaperegexp":57,"lodash.isplainobject":58,"lodash.isstring":59,"lodash.mergewith":60,postcss:75,srcset:120,url:124,xtend:127}],109:[function(require,module,exports){var util=require("./util"),has=Object.prototype.hasOwnProperty,hasNativeMap="undefined"!=typeof Map;function ArraySet(){this._array=[],this._set=hasNativeMap?new Map:Object.create(null)}ArraySet.fromArray=function(aArray,aAllowDuplicates){for(var set=new ArraySet,i=0,len=aArray.length;i<len;i++)set.add(aArray[i],aAllowDuplicates);return set},ArraySet.prototype.size=function(){return hasNativeMap?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet.prototype.add=function(aStr,aAllowDuplicates){var sStr=hasNativeMap?aStr:util.toSetString(aStr),isDuplicate=hasNativeMap?this.has(aStr):has.call(this._set,sStr),idx=this._array.length;isDuplicate&&!aAllowDuplicates||this._array.push(aStr),isDuplicate||(hasNativeMap?this._set.set(aStr,idx):this._set[sStr]=idx)},ArraySet.prototype.has=function(aStr){if(hasNativeMap)return this._set.has(aStr);var sStr=util.toSetString(aStr);return has.call(this._set,sStr)},ArraySet.prototype.indexOf=function(aStr){if(hasNativeMap){var idx=this._set.get(aStr);if(0<=idx)return idx}else{var sStr=util.toSetString(aStr);if(has.call(this._set,sStr))return this._set[sStr]}throw new Error('"'+aStr+'" is not in the set.')},ArraySet.prototype.at=function(aIdx){if(0<=aIdx&&aIdx<this._array.length)return this._array[aIdx];throw new Error("No element indexed by "+aIdx)},ArraySet.prototype.toArray=function(){return this._array.slice()},exports.ArraySet=ArraySet},{"./util":118}],110:[function(require,module,exports){var base64=require("./base64");exports.encode=function(aValue){for(var digit,encoded="",vlq=function(aValue){return aValue<0?1+(-aValue<<1):0+(aValue<<1)}(aValue);digit=31&vlq,0<(vlq>>>=5)&&(digit|=32),encoded+=base64.encode(digit),0<vlq;);return encoded},exports.decode=function(aStr,aIndex,aOutParam){var continuation,digit,aValue,shifted,strLen=aStr.length,result=0,shift=0;do{if(strLen<=aIndex)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(digit=base64.decode(aStr.charCodeAt(aIndex++))))throw new Error("Invalid base64 digit: "+aStr.charAt(aIndex-1));continuation=!!(32&digit),result+=(digit&=31)<<shift,shift+=5}while(continuation);aOutParam.value=(shifted=(aValue=result)>>1,1==(1&aValue)?-shifted:shifted),aOutParam.rest=aIndex}},{"./base64":111}],111:[function(require,module,exports){var intToCharMap="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");exports.encode=function(number){if(0<=number&&number<intToCharMap.length)return intToCharMap[number];throw new TypeError("Must be between 0 and 63: "+number)},exports.decode=function(charCode){return 65<=charCode&&charCode<=90?charCode-65:97<=charCode&&charCode<=122?charCode-97+26:48<=charCode&&charCode<=57?charCode-48+52:43==charCode?62:47==charCode?63:-1}},{}],112:[function(require,module,exports){exports.GREATEST_LOWER_BOUND=1,exports.LEAST_UPPER_BOUND=2,exports.search=function(aNeedle,aHaystack,aCompare,aBias){if(0===aHaystack.length)return-1;var index=function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare,aBias){var mid=Math.floor((aHigh-aLow)/2)+aLow,cmp=aCompare(aNeedle,aHaystack[mid],!0);return 0===cmp?mid:0<cmp?1<aHigh-mid?recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare,aBias):aBias==exports.LEAST_UPPER_BOUND?aHigh<aHaystack.length?aHigh:-1:mid:1<mid-aLow?recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare,aBias):aBias==exports.LEAST_UPPER_BOUND?mid:aLow<0?-1:aLow}(-1,aHaystack.length,aNeedle,aHaystack,aCompare,aBias||exports.GREATEST_LOWER_BOUND);if(index<0)return-1;for(;0<=index-1&&0===aCompare(aHaystack[index],aHaystack[index-1],!0);)--index;return index}},{}],113:[function(require,module,exports){var util=require("./util");function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)},MappingList.prototype.add=function(aMapping){var mappingA,mappingB,lineA,lineB,columnA,columnB;mappingA=this._last,mappingB=aMapping,lineA=mappingA.generatedLine,lineB=mappingB.generatedLine,columnA=mappingA.generatedColumn,columnB=mappingB.generatedColumn,lineA<lineB||lineB==lineA&&columnA<=columnB||util.compareByGeneratedPositionsInflated(mappingA,mappingB)<=0?this._last=aMapping:this._sorted=!1,this._array.push(aMapping)},MappingList.prototype.toArray=function(){return this._sorted||(this._array.sort(util.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},exports.MappingList=MappingList},{"./util":118}],114:[function(require,module,exports){function swap(ary,x,y){var temp=ary[x];ary[x]=ary[y],ary[y]=temp}function doQuickSort(ary,comparator,p,r){if(p<r){var i=p-1;swap(ary,(low=p,high=r,Math.round(low+Math.random()*(high-low))),r);for(var pivot=ary[r],j=p;j<r;j++)comparator(ary[j],pivot)<=0&&swap(ary,i+=1,j);swap(ary,i+1,j);var q=i+1;doQuickSort(ary,comparator,p,q-1),doQuickSort(ary,comparator,q+1,r)}var low,high}exports.quickSort=function(ary,comparator){doQuickSort(ary,comparator,0,ary.length-1)}},{}],115:[function(require,module,exports){var util=require("./util"),binarySearch=require("./binary-search"),ArraySet=require("./array-set").ArraySet,base64VLQ=require("./base64-vlq"),quickSort=require("./quick-sort").quickSort;function SourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;return"string"==typeof aSourceMap&&(sourceMap=util.parseSourceMapInput(aSourceMap)),null!=sourceMap.sections?new IndexedSourceMapConsumer(sourceMap,aSourceMapURL):new BasicSourceMapConsumer(sourceMap,aSourceMapURL)}function BasicSourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;"string"==typeof aSourceMap&&(sourceMap=util.parseSourceMapInput(aSourceMap));var version=util.getArg(sourceMap,"version"),sources=util.getArg(sourceMap,"sources"),names=util.getArg(sourceMap,"names",[]),sourceRoot=util.getArg(sourceMap,"sourceRoot",null),sourcesContent=util.getArg(sourceMap,"sourcesContent",null),mappings=util.getArg(sourceMap,"mappings"),file=util.getArg(sourceMap,"file",null);if(version!=this._version)throw new Error("Unsupported version: "+version);sourceRoot&&(sourceRoot=util.normalize(sourceRoot)),sources=sources.map(String).map(util.normalize).map(function(source){return sourceRoot&&util.isAbsolute(sourceRoot)&&util.isAbsolute(source)?util.relative(sourceRoot,source):source}),this._names=ArraySet.fromArray(names.map(String),!0),this._sources=ArraySet.fromArray(sources,!0),this._absoluteSources=this._sources.toArray().map(function(s){return util.computeSourceURL(sourceRoot,s,aSourceMapURL)}),this.sourceRoot=sourceRoot,this.sourcesContent=sourcesContent,this._mappings=mappings,this._sourceMapURL=aSourceMapURL,this.file=file}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(aSourceMap,aSourceMapURL){var sourceMap=aSourceMap;"string"==typeof aSourceMap&&(sourceMap=util.parseSourceMapInput(aSourceMap));var version=util.getArg(sourceMap,"version"),sections=util.getArg(sourceMap,"sections");if(version!=this._version)throw new Error("Unsupported version: "+version);this._sources=new ArraySet,this._names=new ArraySet;var lastOffset={line:-1,column:0};this._sections=sections.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var offset=util.getArg(s,"offset"),offsetLine=util.getArg(offset,"line"),offsetColumn=util.getArg(offset,"column");if(offsetLine<lastOffset.line||offsetLine===lastOffset.line&&offsetColumn<lastOffset.column)throw new Error("Section offsets must be ordered and non-overlapping.");return lastOffset=offset,{generatedOffset:{generatedLine:offsetLine+1,generatedColumn:offsetColumn+1},consumer:new SourceMapConsumer(util.getArg(s,"map"),aSourceMapURL)}})}SourceMapConsumer.fromSourceMap=function(aSourceMap,aSourceMapURL){return BasicSourceMapConsumer.fromSourceMap(aSourceMap,aSourceMapURL)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function(aStr,index){var c=aStr.charAt(index);return";"===c||","===c},SourceMapConsumer.prototype._parseMappings=function(aStr,aSourceRoot){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(aCallback,aContext,aOrder){var mappings,context=aContext||null;switch(aOrder||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=null===mapping.source?null:this._sources.at(mapping.source);return{source:source=util.computeSourceURL(sourceRoot,source,this._sourceMapURL),generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:null===mapping.name?null:this._names.at(mapping.name)}},this).forEach(aCallback,context)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(aArgs){var line=util.getArg(aArgs,"line"),needle={source:util.getArg(aArgs,"source"),originalLine:line,originalColumn:util.getArg(aArgs,"column",0)};if(needle.source=this._findSourceIndex(needle.source),needle.source<0)return[];var mappings=[],index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,binarySearch.LEAST_UPPER_BOUND);if(0<=index){var mapping=this._originalMappings[index];if(void 0===aArgs.column)for(var originalLine=mapping.originalLine;mapping&&mapping.originalLine===originalLine;)mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}),mapping=this._originalMappings[++index];else for(var originalColumn=mapping.originalColumn;mapping&&mapping.originalLine===line&&mapping.originalColumn==originalColumn;)mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}),mapping=this._originalMappings[++index]}return mappings},exports.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(aSource){var i,relativeSource=aSource;if(null!=this.sourceRoot&&(relativeSource=util.relative(this.sourceRoot,relativeSource)),this._sources.has(relativeSource))return this._sources.indexOf(relativeSource);for(i=0;i<this._absoluteSources.length;++i)if(this._absoluteSources[i]==aSource)return i;return-1},BasicSourceMapConsumer.fromSourceMap=function(aSourceMap,aSourceMapURL){var smc=Object.create(BasicSourceMapConsumer.prototype),names=smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),!0),sources=smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),!0);smc.sourceRoot=aSourceMap._sourceRoot,smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot),smc.file=aSourceMap._file,smc._sourceMapURL=aSourceMapURL,smc._absoluteSources=smc._sources.toArray().map(function(s){return util.computeSourceURL(smc.sourceRoot,s,aSourceMapURL)});for(var generatedMappings=aSourceMap._mappings.toArray().slice(),destGeneratedMappings=smc.__generatedMappings=[],destOriginalMappings=smc.__originalMappings=[],i=0,length=generatedMappings.length;i<length;i++){var srcMapping=generatedMappings[i],destMapping=new Mapping;destMapping.generatedLine=srcMapping.generatedLine,destMapping.generatedColumn=srcMapping.generatedColumn,srcMapping.source&&(destMapping.source=sources.indexOf(srcMapping.source),destMapping.originalLine=srcMapping.originalLine,destMapping.originalColumn=srcMapping.originalColumn,srcMapping.name&&(destMapping.name=names.indexOf(srcMapping.name)),destOriginalMappings.push(destMapping)),destGeneratedMappings.push(destMapping)}return quickSort(smc.__originalMappings,util.compareByOriginalPositions),smc},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function(aStr,aSourceRoot){for(var mapping,str,segment,end,value,generatedLine=1,previousGeneratedColumn=0,previousOriginalLine=0,previousOriginalColumn=0,previousSource=0,previousName=0,length=aStr.length,index=0,cachedSegments={},temp={},originalMappings=[],generatedMappings=[];index<length;)if(";"===aStr.charAt(index))generatedLine++,index++,previousGeneratedColumn=0;else if(","===aStr.charAt(index))index++;else{for((mapping=new Mapping).generatedLine=generatedLine,end=index;end<length&&!this._charIsMappingSeparator(aStr,end);end++);if(segment=cachedSegments[str=aStr.slice(index,end)])index+=str.length;else{for(segment=[];index<end;)base64VLQ.decode(aStr,index,temp),value=temp.value,index=temp.rest,segment.push(value);if(2===segment.length)throw new Error("Found a source, but no line and column");if(3===segment.length)throw new Error("Found a source and line, but no column");cachedSegments[str]=segment}mapping.generatedColumn=previousGeneratedColumn+segment[0],previousGeneratedColumn=mapping.generatedColumn,1<segment.length&&(mapping.source=previousSource+segment[1],previousSource+=segment[1],mapping.originalLine=previousOriginalLine+segment[2],previousOriginalLine=mapping.originalLine,mapping.originalLine+=1,mapping.originalColumn=previousOriginalColumn+segment[3],previousOriginalColumn=mapping.originalColumn,4<segment.length&&(mapping.name=previousName+segment[4],previousName+=segment[4])),generatedMappings.push(mapping),"number"==typeof mapping.originalLine&&originalMappings.push(mapping)}quickSort(generatedMappings,util.compareByGeneratedPositionsDeflated),this.__generatedMappings=generatedMappings,quickSort(originalMappings,util.compareByOriginalPositions),this.__originalMappings=originalMappings},BasicSourceMapConsumer.prototype._findMapping=function(aNeedle,aMappings,aLineName,aColumnName,aComparator,aBias){if(aNeedle[aLineName]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName]);if(aNeedle[aColumnName]<0)throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName]);return binarySearch.search(aNeedle,aMappings,aComparator,aBias)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")},index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositionsDeflated,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=index){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);null!==source&&(source=this._sources.at(source),source=util.computeSourceURL(this.sourceRoot,source,this._sourceMapURL));var name=util.getArg(mapping,"name",null);return null!==name&&(name=this._names.at(name)),{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:name}}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&(this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(sc){return null==sc}))},BasicSourceMapConsumer.prototype.sourceContentFor=function(aSource,nullOnMissing){if(!this.sourcesContent)return null;var index=this._findSourceIndex(aSource);if(0<=index)return this.sourcesContent[index];var url,relativeSource=aSource;if(null!=this.sourceRoot&&(relativeSource=util.relative(this.sourceRoot,relativeSource)),null!=this.sourceRoot&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=relativeSource.replace(/^file:\/\//,"");if("file"==url.scheme&&this._sources.has(fileUriAbsPath))return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)];if((!url.path||"/"==url.path)&&this._sources.has("/"+relativeSource))return this.sourcesContent[this._sources.indexOf("/"+relativeSource)]}if(nullOnMissing)return null;throw new Error('"'+relativeSource+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(aArgs){var source=util.getArg(aArgs,"source");if((source=this._findSourceIndex(source))<0)return{line:null,column:null,lastColumn:null};var needle={source:source,originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")},index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions,util.getArg(aArgs,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=index){var mapping=this._originalMappings[index];if(mapping.source===needle.source)return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},exports.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var sources=[],i=0;i<this._sections.length;i++)for(var j=0;j<this._sections[i].consumer.sources.length;j++)sources.push(this._sections[i].consumer.sources[j]);return sources}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")},sectionIndex=binarySearch.search(needle,this._sections,function(needle,section){var cmp=needle.generatedLine-section.generatedOffset.generatedLine;return cmp||needle.generatedColumn-section.generatedOffset.generatedColumn}),section=this._sections[sectionIndex];return section?section.consumer.originalPositionFor({line:needle.generatedLine-(section.generatedOffset.generatedLine-1),column:needle.generatedColumn-(section.generatedOffset.generatedLine===needle.generatedLine?section.generatedOffset.generatedColumn-1:0),bias:aArgs.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(s){return s.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function(aSource,nullOnMissing){for(var i=0;i<this._sections.length;i++){var content=this._sections[i].consumer.sourceContentFor(aSource,!0);if(content)return content}if(nullOnMissing)return null;throw new Error('"'+aSource+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(aArgs){for(var i=0;i<this._sections.length;i++){var section=this._sections[i];if(-1!==section.consumer._findSourceIndex(util.getArg(aArgs,"source"))){var generatedPosition=section.consumer.generatedPositionFor(aArgs);if(generatedPosition)return{line:generatedPosition.line+(section.generatedOffset.generatedLine-1),column:generatedPosition.column+(section.generatedOffset.generatedLine===generatedPosition.line?section.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function(aStr,aSourceRoot){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var section=this._sections[i],sectionMappings=section.consumer._generatedMappings,j=0;j<sectionMappings.length;j++){var mapping=sectionMappings[j],source=section.consumer._sources.at(mapping.source);source=util.computeSourceURL(section.consumer.sourceRoot,source,this._sourceMapURL),this._sources.add(source),source=this._sources.indexOf(source);var name=null;mapping.name&&(name=section.consumer._names.at(mapping.name),this._names.add(name),name=this._names.indexOf(name));var adjustedMapping={source:source,generatedLine:mapping.generatedLine+(section.generatedOffset.generatedLine-1),generatedColumn:mapping.generatedColumn+(section.generatedOffset.generatedLine===mapping.generatedLine?section.generatedOffset.generatedColumn-1:0),originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:name};this.__generatedMappings.push(adjustedMapping),"number"==typeof adjustedMapping.originalLine&&this.__originalMappings.push(adjustedMapping)}quickSort(this.__generatedMappings,util.compareByGeneratedPositionsDeflated),quickSort(this.__originalMappings,util.compareByOriginalPositions)},exports.IndexedSourceMapConsumer=IndexedSourceMapConsumer},{"./array-set":109,"./base64-vlq":110,"./binary-search":112,"./quick-sort":114,"./util":118}],116:[function(require,module,exports){var base64VLQ=require("./base64-vlq"),util=require("./util"),ArraySet=require("./array-set").ArraySet,MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){aArgs||(aArgs={}),this._file=util.getArg(aArgs,"file",null),this._sourceRoot=util.getArg(aArgs,"sourceRoot",null),this._skipValidation=util.getArg(aArgs,"skipValidation",!1),this._sources=new ArraySet,this._names=new ArraySet,this._mappings=new MappingList,this._sourcesContents=null}SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot,generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});return aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};null!=mapping.source&&(newMapping.source=mapping.source,null!=sourceRoot&&(newMapping.source=util.relative(sourceRoot,newMapping.source)),newMapping.original={line:mapping.originalLine,column:mapping.originalColumn},null!=mapping.name&&(newMapping.name=mapping.name)),generator.addMapping(newMapping)}),aSourceMapConsumer.sources.forEach(function(sourceFile){var sourceRelative=sourceFile;null!==sourceRoot&&(sourceRelative=util.relative(sourceRoot,sourceFile)),generator._sources.has(sourceRelative)||generator._sources.add(sourceRelative);var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&generator.setSourceContent(sourceFile,content)}),generator},SourceMapGenerator.prototype.addMapping=function(aArgs){var generated=util.getArg(aArgs,"generated"),original=util.getArg(aArgs,"original",null),source=util.getArg(aArgs,"source",null),name=util.getArg(aArgs,"name",null);this._skipValidation||this._validateMapping(generated,original,source,name),null!=source&&(source=String(source),this._sources.has(source)||this._sources.add(source)),null!=name&&(name=String(name),this._names.has(name)||this._names.add(name)),this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:null!=original&&original.line,originalColumn:null!=original&&original.column,source:source,name:name})},SourceMapGenerator.prototype.setSourceContent=function(aSourceFile,aSourceContent){var source=aSourceFile;null!=this._sourceRoot&&(source=util.relative(this._sourceRoot,source)),null!=aSourceContent?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[util.toSetString(source)]=aSourceContent):this._sourcesContents&&(delete this._sourcesContents[util.toSetString(source)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},SourceMapGenerator.prototype.applySourceMap=function(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(null==aSourceFile){if(null==aSourceMapConsumer.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;null!=sourceRoot&&(sourceFile=util.relative(sourceRoot,sourceFile));var newSources=new ArraySet,newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&null!=mapping.originalLine){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});null!=original.source&&(mapping.source=original.source,null!=aSourceMapPath&&(mapping.source=util.join(aSourceMapPath,mapping.source)),null!=sourceRoot&&(mapping.source=util.relative(sourceRoot,mapping.source)),mapping.originalLine=original.line,mapping.originalColumn=original.column,null!=original.name&&(mapping.name=original.name))}var source=mapping.source;null==source||newSources.has(source)||newSources.add(source);var name=mapping.name;null==name||newNames.has(name)||newNames.add(name)},this),this._sources=newSources,this._names=newNames,aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&(null!=aSourceMapPath&&(sourceFile=util.join(aSourceMapPath,sourceFile)),null!=sourceRoot&&(sourceFile=util.relative(sourceRoot,sourceFile)),this.setSourceContent(sourceFile,content))},this)},SourceMapGenerator.prototype._validateMapping=function(aGenerated,aOriginal,aSource,aName){if(aOriginal&&"number"!=typeof aOriginal.line&&"number"!=typeof aOriginal.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&0<aGenerated.line&&0<=aGenerated.column)||aOriginal||aSource||aName)&&!(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&0<aGenerated.line&&0<=aGenerated.column&&0<aOriginal.line&&0<=aOriginal.column&&aSource))throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))},SourceMapGenerator.prototype._serializeMappings=function(){for(var next,mapping,nameIdx,sourceIdx,previousGeneratedColumn=0,previousGeneratedLine=1,previousOriginalColumn=0,previousOriginalLine=0,previousName=0,previousSource=0,result="",mappings=this._mappings.toArray(),i=0,len=mappings.length;i<len;i++){if(next="",(mapping=mappings[i]).generatedLine!==previousGeneratedLine)for(previousGeneratedColumn=0;mapping.generatedLine!==previousGeneratedLine;)next+=";",previousGeneratedLine++;else if(0<i){if(!util.compareByGeneratedPositionsInflated(mapping,mappings[i-1]))continue;next+=","}next+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn),previousGeneratedColumn=mapping.generatedColumn,null!=mapping.source&&(sourceIdx=this._sources.indexOf(mapping.source),next+=base64VLQ.encode(sourceIdx-previousSource),previousSource=sourceIdx,next+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine),previousOriginalLine=mapping.originalLine-1,next+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn),previousOriginalColumn=mapping.originalColumn,null!=mapping.name&&(nameIdx=this._names.indexOf(mapping.name),next+=base64VLQ.encode(nameIdx-previousName),previousName=nameIdx)),result+=next}return result},SourceMapGenerator.prototype._generateSourcesContent=function(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents)return null;null!=aSourceRoot&&(source=util.relative(aSourceRoot,source));var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)},SourceMapGenerator.prototype.toJSON=function(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(map.file=this._file),null!=this._sourceRoot&&(map.sourceRoot=this._sourceRoot),this._sourcesContents&&(map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)),map},SourceMapGenerator.prototype.toString=function(){return JSON.stringify(this.toJSON())},exports.SourceMapGenerator=SourceMapGenerator},{"./array-set":109,"./base64-vlq":110,"./mapping-list":113,"./util":118}],117:[function(require,module,exports){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator,util=require("./util"),REGEX_NEWLINE=/(\r?\n)/,isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[],this.sourceContents={},this.line=null==aLine?null:aLine,this.column=null==aColumn?null:aColumn,this.source=null==aSource?null:aSource,this.name=null==aName?null:aName,this[isSourceNode]=!0,null!=aChunks&&this.add(aChunks)}SourceNode.fromStringWithSourceMap=function(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode,remainingLines=aGeneratedCode.split(REGEX_NEWLINE),remainingLinesIndex=0,shiftNextLine=function(){return getNextLine()+(getNextLine()||"");function getNextLine(){return remainingLinesIndex<remainingLines.length?remainingLines[remainingLinesIndex++]:void 0}},lastGeneratedLine=1,lastGeneratedColumn=0,lastMapping=null;return aSourceMapConsumer.eachMapping(function(mapping){if(null!==lastMapping){if(!(lastGeneratedLine<mapping.generatedLine)){var code=(nextLine=remainingLines[remainingLinesIndex]||"").substr(0,mapping.generatedColumn-lastGeneratedColumn);return remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn),lastGeneratedColumn=mapping.generatedColumn,addMappingWithCode(lastMapping,code),void(lastMapping=mapping)}addMappingWithCode(lastMapping,shiftNextLine()),lastGeneratedLine++,lastGeneratedColumn=0}for(;lastGeneratedLine<mapping.generatedLine;)node.add(shiftNextLine()),lastGeneratedLine++;if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[remainingLinesIndex]||"";node.add(nextLine.substr(0,mapping.generatedColumn)),remainingLines[remainingLinesIndex]=nextLine.substr(mapping.generatedColumn),lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this),remainingLinesIndex<remainingLines.length&&(lastMapping&&addMappingWithCode(lastMapping,shiftNextLine()),node.add(remainingLines.splice(remainingLinesIndex).join(""))),aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);null!=content&&(null!=aRelativePath&&(sourceFile=util.join(aRelativePath,sourceFile)),node.setSourceContent(sourceFile,content))}),node;function addMappingWithCode(mapping,code){if(null===mapping||void 0===mapping.source)node.add(code);else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}},SourceNode.prototype.add=function(aChunk){if(Array.isArray(aChunk))aChunk.forEach(function(chunk){this.add(chunk)},this);else{if(!aChunk[isSourceNode]&&"string"!=typeof aChunk)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);aChunk&&this.children.push(aChunk)}return this},SourceNode.prototype.prepend=function(aChunk){if(Array.isArray(aChunk))for(var i=aChunk.length-1;0<=i;i--)this.prepend(aChunk[i]);else{if(!aChunk[isSourceNode]&&"string"!=typeof aChunk)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk);this.children.unshift(aChunk)}return this},SourceNode.prototype.walk=function(aFn){for(var chunk,i=0,len=this.children.length;i<len;i++)(chunk=this.children[i])[isSourceNode]?chunk.walk(aFn):""!==chunk&&aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(aSep){var newChildren,i,len=this.children.length;if(0<len){for(newChildren=[],i=0;i<len-1;i++)newChildren.push(this.children[i]),newChildren.push(aSep);newChildren.push(this.children[i]),this.children=newChildren}return this},SourceNode.prototype.replaceRight=function(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];return lastChild[isSourceNode]?lastChild.replaceRight(aPattern,aReplacement):"string"==typeof lastChild?this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement):this.children.push("".replace(aPattern,aReplacement)),this},SourceNode.prototype.setSourceContent=function(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent},SourceNode.prototype.walkSourceContents=function(aFn){for(var i=0,len=this.children.length;i<len;i++)this.children[i][isSourceNode]&&this.children[i].walkSourceContents(aFn);var sources=Object.keys(this.sourceContents);for(i=0,len=sources.length;i<len;i++)aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])},SourceNode.prototype.toString=function(){var str="";return this.walk(function(chunk){str+=chunk}),str},SourceNode.prototype.toStringWithSourceMap=function(aArgs){var generated={code:"",line:1,column:0},map=new SourceMapGenerator(aArgs),sourceMappingActive=!1,lastOriginalSource=null,lastOriginalLine=null,lastOriginalColumn=null,lastOriginalName=null;return this.walk(function(chunk,original){generated.code+=chunk,null!==original.source&&null!==original.line&&null!==original.column?(lastOriginalSource===original.source&&lastOriginalLine===original.line&&lastOriginalColumn===original.column&&lastOriginalName===original.name||map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name}),lastOriginalSource=original.source,lastOriginalLine=original.line,lastOriginalColumn=original.column,lastOriginalName=original.name,sourceMappingActive=!0):sourceMappingActive&&(map.addMapping({generated:{line:generated.line,column:generated.column}}),lastOriginalSource=null,sourceMappingActive=!1);for(var idx=0,length=chunk.length;idx<length;idx++)10===chunk.charCodeAt(idx)?(generated.line++,generated.column=0,idx+1===length?(lastOriginalSource=null,sourceMappingActive=!1):sourceMappingActive&&map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})):generated.column++}),this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)}),{code:generated.code,map:map}},exports.SourceNode=SourceNode},{"./source-map-generator":116,"./util":118}],118:[function(require,module,exports){exports.getArg=function(aArgs,aName,aDefaultValue){if(aName in aArgs)return aArgs[aName];if(3===arguments.length)return aDefaultValue;throw new Error('"'+aName+'" is a required argument.')};var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);return match?{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}:null}function urlGenerate(aParsedUrl){var url="";return aParsedUrl.scheme&&(url+=aParsedUrl.scheme+":"),url+="//",aParsedUrl.auth&&(url+=aParsedUrl.auth+"@"),aParsedUrl.host&&(url+=aParsedUrl.host),aParsedUrl.port&&(url+=":"+aParsedUrl.port),aParsedUrl.path&&(url+=aParsedUrl.path),url}function normalize(aPath){var path=aPath,url=urlParse(aPath);if(url){if(!url.path)return aPath;path=url.path}for(var part,isAbsolute=exports.isAbsolute(path),parts=path.split(/\/+/),up=0,i=parts.length-1;0<=i;i--)"."===(part=parts[i])?parts.splice(i,1):".."===part?up++:0<up&&(""===part?(parts.splice(i+1,up),up=0):(parts.splice(i,2),up--));return""===(path=parts.join("/"))&&(path=isAbsolute?"/":"."),url?(url.path=path,urlGenerate(url)):path}function join(aRoot,aPath){""===aRoot&&(aRoot="."),""===aPath&&(aPath=".");var aPathUrl=urlParse(aPath),aRootUrl=urlParse(aRoot);if(aRootUrl&&(aRoot=aRootUrl.path||"/"),aPathUrl&&!aPathUrl.scheme)return aRootUrl&&(aPathUrl.scheme=aRootUrl.scheme),urlGenerate(aPathUrl);if(aPathUrl||aPath.match(dataUrlRegexp))return aPath;if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path)return aRootUrl.host=aPath,urlGenerate(aRootUrl);var joined="/"===aPath.charAt(0)?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);return aRootUrl?(aRootUrl.path=joined,urlGenerate(aRootUrl)):joined}exports.urlParse=urlParse,exports.urlGenerate=urlGenerate,exports.normalize=normalize,exports.join=join,exports.isAbsolute=function(aPath){return"/"===aPath.charAt(0)||urlRegexp.test(aPath)},exports.relative=function(aRoot,aPath){""===aRoot&&(aRoot="."),aRoot=aRoot.replace(/\/$/,"");for(var level=0;0!==aPath.indexOf(aRoot+"/");){var index=aRoot.lastIndexOf("/");if(index<0)return aPath;if((aRoot=aRoot.slice(0,index)).match(/^([^\/]+:\/)?\/*$/))return aPath;++level}return Array(level+1).join("../")+aPath.substr(aRoot.length+1)};var supportsNullProto=!("__proto__"in Object.create(null));function identity(s){return s}function isProtoString(s){if(!s)return!1;var length=s.length;if(length<9)return!1;if(95!==s.charCodeAt(length-1)||95!==s.charCodeAt(length-2)||111!==s.charCodeAt(length-3)||116!==s.charCodeAt(length-4)||111!==s.charCodeAt(length-5)||114!==s.charCodeAt(length-6)||112!==s.charCodeAt(length-7)||95!==s.charCodeAt(length-8)||95!==s.charCodeAt(length-9))return!1;for(var i=length-10;0<=i;i--)if(36!==s.charCodeAt(i))return!1;return!0}function strcmp(aStr1,aStr2){return aStr1===aStr2?0:null===aStr1?1:null===aStr2?-1:aStr2<aStr1?1:-1}exports.toSetString=supportsNullProto?identity:function(aStr){return isProtoString(aStr)?"$"+aStr:aStr},exports.fromSetString=supportsNullProto?identity:function(aStr){return isProtoString(aStr)?aStr.slice(1):aStr},exports.compareByOriginalPositions=function(mappingA,mappingB,onlyCompareOriginal){var cmp=strcmp(mappingA.source,mappingB.source);return 0!==cmp?cmp:0!=(cmp=mappingA.originalLine-mappingB.originalLine)?cmp:0!=(cmp=mappingA.originalColumn-mappingB.originalColumn)||onlyCompareOriginal?cmp:0!=(cmp=mappingA.generatedColumn-mappingB.generatedColumn)?cmp:0!=(cmp=mappingA.generatedLine-mappingB.generatedLine)?cmp:strcmp(mappingA.name,mappingB.name)},exports.compareByGeneratedPositionsDeflated=function(mappingA,mappingB,onlyCompareGenerated){var cmp=mappingA.generatedLine-mappingB.generatedLine;return 0!==cmp?cmp:0!=(cmp=mappingA.generatedColumn-mappingB.generatedColumn)||onlyCompareGenerated?cmp:0!==(cmp=strcmp(mappingA.source,mappingB.source))?cmp:0!=(cmp=mappingA.originalLine-mappingB.originalLine)?cmp:0!=(cmp=mappingA.originalColumn-mappingB.originalColumn)?cmp:strcmp(mappingA.name,mappingB.name)},exports.compareByGeneratedPositionsInflated=function(mappingA,mappingB){var cmp=mappingA.generatedLine-mappingB.generatedLine;return 0!==cmp?cmp:0!=(cmp=mappingA.generatedColumn-mappingB.generatedColumn)?cmp:0!==(cmp=strcmp(mappingA.source,mappingB.source))?cmp:0!=(cmp=mappingA.originalLine-mappingB.originalLine)?cmp:0!=(cmp=mappingA.originalColumn-mappingB.originalColumn)?cmp:strcmp(mappingA.name,mappingB.name)},exports.parseSourceMapInput=function(str){return JSON.parse(str.replace(/^\)]}'[^\n]*\n/,""))},exports.computeSourceURL=function(sourceRoot,sourceURL,sourceMapURL){if(sourceURL=sourceURL||"",sourceRoot&&("/"!==sourceRoot[sourceRoot.length-1]&&"/"!==sourceURL[0]&&(sourceRoot+="/"),sourceURL=sourceRoot+sourceURL),sourceMapURL){var parsed=urlParse(sourceMapURL);if(!parsed)throw new Error("sourceMapURL could not be parsed");if(parsed.path){var index=parsed.path.lastIndexOf("/");0<=index&&(parsed.path=parsed.path.substring(0,index+1))}sourceURL=join(urlGenerate(parsed),sourceURL)}return normalize(sourceURL)}},{}],119:[function(require,module,exports){exports.SourceMapGenerator=require("./lib/source-map-generator").SourceMapGenerator,exports.SourceMapConsumer=require("./lib/source-map-consumer").SourceMapConsumer,exports.SourceNode=require("./lib/source-node").SourceNode},{"./lib/source-map-consumer":115,"./lib/source-map-generator":116,"./lib/source-node":117}],120:[function(require,module,exports){"use strict";var numberIsNan=require("number-is-nan"),arrayUniq=require("array-uniq"),reInt=/^\d+$/;exports.parse=function(str){return(arr=str.split(",").map(function(el){var ret={};return el.trim().split(/\s+/).forEach(function(el,i){if(0===i)return ret.url=el;var value=el.substring(0,el.length-1),postfix=el[el.length-1],intVal=parseInt(value,10),floatVal=parseFloat(value);if("w"===postfix&&reInt.test(value))ret.width=intVal;else if("h"===postfix&&reInt.test(value))ret.height=intVal;else{if("x"!==postfix||numberIsNan(floatVal))throw new Error("Invalid srcset descriptor: "+el+".");ret.density=floatVal}}),ret})).sort().filter(function(el,i){return JSON.stringify(el)!==JSON.stringify(arr[i-1])});var arr},exports.stringify=function(arr){return arrayUniq(arr.map(function(el){if(!el.url)throw new Error("URL is required.");var ret=[el.url];return el.width&&ret.push(el.width+"w"),el.height&&ret.push(el.height+"h"),el.density&&ret.push(el.density+"x"),ret.join(" ")})).join(", ")}},{"array-uniq":2,"number-is-nan":61}],121:[function(require,module,exports){module.exports=Stream;var EE=require("events").EventEmitter;function Stream(){EE.call(this)}require("inherits")(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),(Stream.Stream=Stream).prototype.pipe=function(dest,options){var source=this;function ondata(chunk){dest.writable&&!1===dest.write(chunk)&&source.pause&&source.pause()}function ondrain(){source.readable&&source.resume&&source.resume()}source.on("data",ondata),dest.on("drain",ondrain),dest._isStdio||options&&!1===options.end||(source.on("end",onend),source.on("close",onclose));var didOnEnd=!1;function onend(){didOnEnd||(didOnEnd=!0,dest.end())}function onclose(){didOnEnd||(didOnEnd=!0,"function"==typeof dest.destroy&&dest.destroy())}function onerror(er){if(cleanup(),0===EE.listenerCount(this,"error"))throw er}function cleanup(){source.removeListener("data",ondata),dest.removeListener("drain",ondrain),source.removeListener("end",onend),source.removeListener("close",onclose),source.removeListener("error",onerror),dest.removeListener("error",onerror),source.removeListener("end",cleanup),source.removeListener("close",cleanup),dest.removeListener("close",cleanup)}return source.on("error",onerror),dest.on("error",onerror),source.on("end",cleanup),source.on("close",cleanup),dest.on("close",cleanup),dest.emit("pipe",source),dest}},{events:28,inherits:38,"readable-stream/duplex.js":94,"readable-stream/passthrough.js":103,"readable-stream/readable.js":104,"readable-stream/transform.js":105,"readable-stream/writable.js":106}],122:[function(require,module,exports){"use strict";var Buffer=require("safe-buffer").Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){if(!enc)return"utf8";for(var retried;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw new Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:return this.write=simpleWrite,void(this.end=simpleEnd)}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self,buf,p){if(128!=(192&buf[0]))return self.lastNeed=0,"�";if(1<self.lastNeed&&1<buf.length){if(128!=(192&buf[1]))return self.lastNeed=1,"�";if(2<self.lastNeed&&2<buf.length&&128!=(192&buf[2]))return self.lastNeed=2,"�"}}(this,buf);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(buf.copy(this.lastChar,p,0,buf.length),void(this.lastNeed-=buf.length))}function utf16Text(buf,i){if((buf.length-i)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1);var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(55296<=c&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}(exports.StringDecoder=StringDecoder).prototype.write=function(buf){if(0===buf.length)return"";var r,i;if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"�":r},StringDecoder.prototype.text=function(buf,i){var total=function(self,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);if(0<=nb)return 0<nb&&(self.lastNeed=nb-1),nb;if(--j<i||-2===nb)return 0;if(0<=(nb=utf8CheckByte(buf[j])))return 0<nb&&(self.lastNeed=nb-2),nb;if(--j<i||-2===nb)return 0;if(0<=(nb=utf8CheckByte(buf[j])))return 0<nb&&(2===nb?nb=0:self.lastNeed=nb-3),nb;return 0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},{"safe-buffer":107}],123:[function(require,module,exports){(function(setImmediate,clearImmediate){var nextTick=require("process/browser.js").nextTick,apply=Function.prototype.apply,slice=Array.prototype.slice,immediateIds={},nextImmediateId=0;function Timeout(id,clearFn){this._id=id,this._clearFn=clearFn}exports.setTimeout=function(){return new Timeout(apply.call(setTimeout,window,arguments),clearTimeout)},exports.setInterval=function(){return new Timeout(apply.call(setInterval,window,arguments),clearInterval)},exports.clearTimeout=exports.clearInterval=function(timeout){timeout.close()},Timeout.prototype.unref=Timeout.prototype.ref=function(){},Timeout.prototype.close=function(){this._clearFn.call(window,this._id)},exports.enroll=function(item,msecs){clearTimeout(item._idleTimeoutId),item._idleTimeout=msecs},exports.unenroll=function(item){clearTimeout(item._idleTimeoutId),item._idleTimeout=-1},exports._unrefActive=exports.active=function(item){clearTimeout(item._idleTimeoutId);var msecs=item._idleTimeout;0<=msecs&&(item._idleTimeoutId=setTimeout(function(){item._onTimeout&&item._onTimeout()},msecs))},exports.setImmediate="function"==typeof setImmediate?setImmediate:function(fn){var id=nextImmediateId++,args=!(arguments.length<2)&&slice.call(arguments,1);return immediateIds[id]=!0,nextTick(function(){immediateIds[id]&&(args?fn.apply(null,args):fn.call(null),exports.clearImmediate(id))}),id},exports.clearImmediate="function"==typeof clearImmediate?clearImmediate:function(id){delete immediateIds[id]}}).call(this,require("timers").setImmediate,require("timers").clearImmediate)},{"process/browser.js":89,timers:123}],124:[function(require,module,exports){"use strict";var punycode=require("punycode"),util=require("./util");function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}exports.parse=urlParse,exports.resolve=function(source,relative){return urlParse(source,!1,!0).resolve(relative)},exports.resolveObject=function(source,relative){return source?urlParse(source,!1,!0).resolveObject(relative):relative},exports.format=function(obj){util.isString(obj)&&(obj=urlParse(obj));return obj instanceof Url?obj.format():Url.prototype.format.call(obj)},exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,unwise=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;return u.parse(url,parseQueryString,slashesDenoteHost),u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url))throw new TypeError("Parameter 'url' must be a string, not "+typeof url);var queryIndex=url.indexOf("?"),splitter=-1!==queryIndex&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter);uSplit[0]=uSplit[0].replace(/\\/g,"/");var rest=url=uSplit.join(splitter);if(rest=rest.trim(),!slashesDenoteHost&&1===url.split("#").length){var simplePath=simplePathPattern.exec(rest);if(simplePath)return this.path=rest,this.href=rest,this.pathname=simplePath[1],simplePath[2]?(this.search=simplePath[2],this.query=parseQueryString?querystring.parse(this.search.substr(1)):this.search.substr(1)):parseQueryString&&(this.search="",this.query={}),this}var proto=protocolPattern.exec(rest);if(proto){var lowerProto=(proto=proto[0]).toLowerCase();this.protocol=lowerProto,rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes="//"===rest.substr(0,2);!slashes||proto&&hostlessProtocol[proto]||(rest=rest.substr(2),this.slashes=!0)}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){for(var auth,atSign,hostEnd=-1,i=0;i<hostEndingChars.length;i++){-1!==(hec=rest.indexOf(hostEndingChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1!==(atSign=-1===hostEnd?rest.lastIndexOf("@"):rest.lastIndexOf("@",hostEnd))&&(auth=rest.slice(0,atSign),rest=rest.slice(atSign+1),this.auth=decodeURIComponent(auth)),hostEnd=-1;for(i=0;i<nonHostChars.length;i++){var hec;-1!==(hec=rest.indexOf(nonHostChars[i]))&&(-1===hostEnd||hec<hostEnd)&&(hostEnd=hec)}-1===hostEnd&&(hostEnd=rest.length),this.host=rest.slice(0,hostEnd),rest=rest.slice(hostEnd),this.parseHost(),this.hostname=this.hostname||"";var ipv6Hostname="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ipv6Hostname)for(var hostparts=this.hostname.split(/\./),l=(i=0,hostparts.length);i<l;i++){var part=hostparts[i];if(part&&!part.match(hostnamePartPattern)){for(var newpart="",j=0,k=part.length;j<k;j++)127<part.charCodeAt(j)?newpart+="x":newpart+=part[j];if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i),notHost=hostparts.slice(i+1),bit=part.match(hostnamePartStart);bit&&(validParts.push(bit[1]),notHost.unshift(bit[2])),notHost.length&&(rest="/"+notHost.join(".")+rest),this.hostname=validParts.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),ipv6Hostname||(this.hostname=punycode.toASCII(this.hostname));var p=this.port?":"+this.port:"",h=this.hostname||"";this.host=h+p,this.href+=this.host,ipv6Hostname&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==rest[0]&&(rest="/"+rest))}if(!unsafeProtocol[lowerProto])for(i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(-1!==rest.indexOf(ae)){var esc=encodeURIComponent(ae);esc===ae&&(esc=escape(ae)),rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");-1!==hash&&(this.hash=rest.substr(hash),rest=rest.slice(0,hash));var qm=rest.indexOf("?");if(-1!==qm?(this.search=rest.substr(qm),this.query=rest.substr(qm+1),parseQueryString&&(this.query=querystring.parse(this.query)),rest=rest.slice(0,qm)):parseQueryString&&(this.search="",this.query={}),rest&&(this.pathname=rest),slashedProtocol[lowerProto]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){p=this.pathname||"";var s=this.search||"";this.path=p+s}return this.href=this.format(),this},Url.prototype.format=function(){var auth=this.auth||"";auth&&(auth=(auth=encodeURIComponent(auth)).replace(/%3A/i,":"),auth+="@");var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=!1,query="";this.host?host=auth+this.host:this.hostname&&(host=auth+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(host+=":"+this.port)),this.query&&util.isObject(this.query)&&Object.keys(this.query).length&&(query=querystring.stringify(this.query));var search=this.search||query&&"?"+query||"";return protocol&&":"!==protocol.substr(-1)&&(protocol+=":"),this.slashes||(!protocol||slashedProtocol[protocol])&&!1!==host?(host="//"+(host||""),pathname&&"/"!==pathname.charAt(0)&&(pathname="/"+pathname)):host||(host=""),hash&&"#"!==hash.charAt(0)&&(hash="#"+hash),search&&"?"!==search.charAt(0)&&(search="?"+search),protocol+host+(pathname=pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)}))+(search=search.replace("#","%23"))+hash},Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,!1,!0)).format()},Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,!1,!0),relative=rel}for(var result=new Url,tkeys=Object.keys(this),tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}if(result.hash=relative.hash,""===relative.href)return result.href=result.format(),result;if(relative.slashes&&!relative.protocol){for(var rkeys=Object.keys(relative),rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];"protocol"!==rkey&&(result[rkey]=relative[rkey])}return slashedProtocol[result.protocol]&&result.hostname&&!result.pathname&&(result.path=result.pathname="/"),result.href=result.format(),result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){for(var keys=Object.keys(relative),v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}return result.href=result.format(),result}if(result.protocol=relative.protocol,relative.host||hostlessProtocol[relative.protocol])result.pathname=relative.pathname;else{for(var relPath=(relative.pathname||"").split("/");relPath.length&&!(relative.host=relPath.shift()););relative.host||(relative.host=""),relative.hostname||(relative.hostname=""),""!==relPath[0]&&relPath.unshift(""),relPath.length<2&&relPath.unshift(""),result.pathname=relPath.join("/")}if(result.search=relative.search,result.query=relative.query,result.host=relative.host||"",result.auth=relative.auth,result.hostname=relative.hostname||relative.host,result.port=relative.port,result.pathname||result.search){var p=result.pathname||"",s=result.search||"";result.path=p+s}return result.slashes=result.slashes||relative.slashes,result.href=result.format(),result}var isSourceAbs=result.pathname&&"/"===result.pathname.charAt(0),isRelAbs=relative.host||relative.pathname&&"/"===relative.pathname.charAt(0),mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],psychotic=(relPath=relative.pathname&&relative.pathname.split("/")||[],result.protocol&&!slashedProtocol[result.protocol]);if(psychotic&&(result.hostname="",result.port=null,result.host&&(""===srcPath[0]?srcPath[0]=result.host:srcPath.unshift(result.host)),result.host="",relative.protocol&&(relative.hostname=null,relative.port=null,relative.host&&(""===relPath[0]?relPath[0]=relative.host:relPath.unshift(relative.host)),relative.host=null),mustEndAbs=mustEndAbs&&(""===relPath[0]||""===srcPath[0])),isRelAbs)result.host=relative.host||""===relative.host?relative.host:result.host,result.hostname=relative.hostname||""===relative.hostname?relative.hostname:result.hostname,result.search=relative.search,result.query=relative.query,srcPath=relPath;else if(relPath.length)srcPath||(srcPath=[]),srcPath.pop(),srcPath=srcPath.concat(relPath),result.search=relative.search,result.query=relative.query;else if(!util.isNullOrUndefined(relative.search)){if(psychotic)result.hostname=result.host=srcPath.shift(),(authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift());return result.search=relative.search,result.query=relative.query,util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.href=result.format(),result}if(!srcPath.length)return result.pathname=null,result.search?result.path="/"+result.search:result.path=null,result.href=result.format(),result;for(var last=srcPath.slice(-1)[0],hasTrailingSlash=(result.host||relative.host||1<srcPath.length)&&("."===last||".."===last)||""===last,up=0,i=srcPath.length;0<=i;i--)"."===(last=srcPath[i])?srcPath.splice(i,1):".."===last?(srcPath.splice(i,1),up++):up&&(srcPath.splice(i,1),up--);if(!mustEndAbs&&!removeAllDots)for(;up--;up)srcPath.unshift("..");!mustEndAbs||""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0)||srcPath.unshift(""),hasTrailingSlash&&"/"!==srcPath.join("/").substr(-1)&&srcPath.push("");var authInHost,isAbsolute=""===srcPath[0]||srcPath[0]&&"/"===srcPath[0].charAt(0);psychotic&&(result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"",(authInHost=!!(result.host&&0<result.host.indexOf("@"))&&result.host.split("@"))&&(result.auth=authInHost.shift(),result.host=result.hostname=authInHost.shift()));return(mustEndAbs=mustEndAbs||result.host&&srcPath.length)&&!isAbsolute&&srcPath.unshift(""),srcPath.length?result.pathname=srcPath.join("/"):(result.pathname=null,result.path=null),util.isNull(result.pathname)&&util.isNull(result.search)||(result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")),result.auth=relative.auth||result.auth,result.slashes=result.slashes||relative.slashes,result.href=result.format(),result},Url.prototype.parseHost=function(){var host=this.host,port=portPattern.exec(host);port&&(":"!==(port=port[0])&&(this.port=port.substr(1)),host=host.substr(0,host.length-port.length)),host&&(this.hostname=host)}},{"./util":125,punycode:90,querystring:93}],125:[function(require,module,exports){"use strict";module.exports={isString:function(arg){return"string"==typeof arg},isObject:function(arg){return"object"==typeof arg&&null!==arg},isNull:function(arg){return null===arg},isNullOrUndefined:function(arg){return null==arg}}},{}],126:[function(require,module,exports){(function(global){function config(name){try{if(!global.localStorage)return!1}catch(_){return!1}var val=global.localStorage[name];return null!=val&&"true"===String(val).toLowerCase()}module.exports=function(fn,msg){if(config("noDeprecation"))return fn;var warned=!1;return function(){if(!warned){if(config("throwDeprecation"))throw new Error(msg);config("traceDeprecation")?console.trace(msg):console.warn(msg),warned=!0}return fn.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],127:[function(require,module,exports){module.exports=function(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};var hasOwnProperty=Object.prototype.hasOwnProperty},{}]},{},[1]);